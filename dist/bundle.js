/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var t={873:(t,e)=>{var n,r,i=function(){var t=function(t,e){var n=t,r=s[e],i=null,o=0,c=null,y=[],w={},m=function(t,e){i=function(t){for(var e=new Array(t),n=0;n<t;n+=1){e[n]=new Array(t);for(var r=0;r<t;r+=1)e[n][r]=null}return e}(o=4*n+17),v(0,0),v(o-7,0),v(0,o-7),x(),E(),B(t,e),n>=7&&A(t),null==c&&(c=I(n,r,y)),k(c,e)},v=function(t,e){for(var n=-1;n<=7;n+=1)if(!(t+n<=-1||o<=t+n))for(var r=-1;r<=7;r+=1)e+r<=-1||o<=e+r||(i[t+n][e+r]=0<=n&&n<=6&&(0==r||6==r)||0<=r&&r<=6&&(0==n||6==n)||2<=n&&n<=4&&2<=r&&r<=4)},E=function(){for(var t=8;t<o-8;t+=1)null==i[t][6]&&(i[t][6]=t%2==0);for(var e=8;e<o-8;e+=1)null==i[6][e]&&(i[6][e]=e%2==0)},x=function(){for(var t=a.getPatternPosition(n),e=0;e<t.length;e+=1)for(var r=0;r<t.length;r+=1){var o=t[e],s=t[r];if(null==i[o][s])for(var c=-2;c<=2;c+=1)for(var u=-2;u<=2;u+=1)i[o+c][s+u]=-2==c||2==c||-2==u||2==u||0==c&&0==u}},A=function(t){for(var e=a.getBCHTypeNumber(n),r=0;r<18;r+=1){var s=!t&&1==(e>>r&1);i[Math.floor(r/3)][r%3+o-8-3]=s}for(r=0;r<18;r+=1)s=!t&&1==(e>>r&1),i[r%3+o-8-3][Math.floor(r/3)]=s},B=function(t,e){for(var n=r<<3|e,s=a.getBCHTypeInfo(n),c=0;c<15;c+=1){var u=!t&&1==(s>>c&1);c<6?i[c][8]=u:c<8?i[c+1][8]=u:i[o-15+c][8]=u}for(c=0;c<15;c+=1)u=!t&&1==(s>>c&1),c<8?i[8][o-c-1]=u:c<9?i[8][15-c-1+1]=u:i[8][15-c-1]=u;i[o-8][8]=!t},k=function(t,e){for(var n=-1,r=o-1,s=7,c=0,u=a.getMaskFunction(e),l=o-1;l>0;l-=2)for(6==l&&(l-=1);;){for(var h=0;h<2;h+=1)if(null==i[r][l-h]){var f=!1;c<t.length&&(f=1==(t[c]>>>s&1)),u(r,l-h)&&(f=!f),i[r][l-h]=f,-1==(s-=1)&&(c+=1,s=7)}if((r+=n)<0||o<=r){r-=n,n=-n;break}}},I=function(t,e,n){for(var r=l.getRSBlocks(t,e),i=h(),o=0;o<n.length;o+=1){var s=n[o];i.put(s.getMode(),4),i.put(s.getLength(),a.getLengthInBits(s.getMode(),t)),s.write(i)}var c=0;for(o=0;o<r.length;o+=1)c+=r[o].dataCount;if(i.getLengthInBits()>8*c)throw"code length overflow. ("+i.getLengthInBits()+">"+8*c+")";for(i.getLengthInBits()+4<=8*c&&i.put(0,4);i.getLengthInBits()%8!=0;)i.putBit(!1);for(;!(i.getLengthInBits()>=8*c||(i.put(236,8),i.getLengthInBits()>=8*c));)i.put(17,8);return function(t,e){for(var n=0,r=0,i=0,o=new Array(e.length),s=new Array(e.length),c=0;c<e.length;c+=1){var l=e[c].dataCount,h=e[c].totalCount-l;r=Math.max(r,l),i=Math.max(i,h),o[c]=new Array(l);for(var f=0;f<o[c].length;f+=1)o[c][f]=255&t.getBuffer()[f+n];n+=l;var d=a.getErrorCorrectPolynomial(h),p=u(o[c],d.getLength()-1).mod(d);for(s[c]=new Array(d.getLength()-1),f=0;f<s[c].length;f+=1){var g=f+p.getLength()-s[c].length;s[c][f]=g>=0?p.getAt(g):0}}var y=0;for(f=0;f<e.length;f+=1)y+=e[f].totalCount;var w=new Array(y),b=0;for(f=0;f<r;f+=1)for(c=0;c<e.length;c+=1)f<o[c].length&&(w[b]=o[c][f],b+=1);for(f=0;f<i;f+=1)for(c=0;c<e.length;c+=1)f<s[c].length&&(w[b]=s[c][f],b+=1);return w}(i,r)};w.addData=function(t,e){var n=null;switch(e=e||"Byte"){case"Numeric":n=f(t);break;case"Alphanumeric":n=d(t);break;case"Byte":n=p(t);break;case"Kanji":n=g(t);break;default:throw"mode:"+e}y.push(n),c=null},w.isDark=function(t,e){if(t<0||o<=t||e<0||o<=e)throw t+","+e;return i[t][e]},w.getModuleCount=function(){return o},w.make=function(){if(n<1){for(var t=1;t<40;t++){for(var e=l.getRSBlocks(t,r),i=h(),o=0;o<y.length;o++){var s=y[o];i.put(s.getMode(),4),i.put(s.getLength(),a.getLengthInBits(s.getMode(),t)),s.write(i)}var c=0;for(o=0;o<e.length;o++)c+=e[o].dataCount;if(i.getLengthInBits()<=8*c)break}n=t}m(!1,function(){for(var t=0,e=0,n=0;n<8;n+=1){m(!0,n);var r=a.getLostPoint(w);(0==n||t>r)&&(t=r,e=n)}return e}())},w.createTableTag=function(t,e){t=t||2;var n="";n+='<table style="',n+=" border-width: 0px; border-style: none;",n+=" border-collapse: collapse;",n+=" padding: 0px; margin: "+(e=void 0===e?4*t:e)+"px;",n+='">',n+="<tbody>";for(var r=0;r<w.getModuleCount();r+=1){n+="<tr>";for(var i=0;i<w.getModuleCount();i+=1)n+='<td style="',n+=" border-width: 0px; border-style: none;",n+=" border-collapse: collapse;",n+=" padding: 0px; margin: 0px;",n+=" width: "+t+"px;",n+=" height: "+t+"px;",n+=" background-color: ",n+=w.isDark(r,i)?"#000000":"#ffffff",n+=";",n+='"/>';n+="</tr>"}return(n+="</tbody>")+"</table>"},w.createSvgTag=function(t,e,n,r){var i={};"object"==typeof arguments[0]&&(t=(i=arguments[0]).cellSize,e=i.margin,n=i.alt,r=i.title),t=t||2,e=void 0===e?4*t:e,(n="string"==typeof n?{text:n}:n||{}).text=n.text||null,n.id=n.text?n.id||"qrcode-description":null,(r="string"==typeof r?{text:r}:r||{}).text=r.text||null,r.id=r.text?r.id||"qrcode-title":null;var o,s,a,c,u=w.getModuleCount()*t+2*e,l="";for(c="l"+t+",0 0,"+t+" -"+t+",0 0,-"+t+"z ",l+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',l+=i.scalable?"":' width="'+u+'px" height="'+u+'px"',l+=' viewBox="0 0 '+u+" "+u+'" ',l+=' preserveAspectRatio="xMinYMin meet"',l+=r.text||n.text?' role="img" aria-labelledby="'+S([r.id,n.id].join(" ").trim())+'"':"",l+=">",l+=r.text?'<title id="'+S(r.id)+'">'+S(r.text)+"</title>":"",l+=n.text?'<description id="'+S(n.id)+'">'+S(n.text)+"</description>":"",l+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',l+='<path d="',s=0;s<w.getModuleCount();s+=1)for(a=s*t+e,o=0;o<w.getModuleCount();o+=1)w.isDark(s,o)&&(l+="M"+(o*t+e)+","+a+c);return(l+='" stroke="transparent" fill="black"/>')+"</svg>"},w.createDataURL=function(t,e){t=t||2,e=void 0===e?4*t:e;var n=w.getModuleCount()*t+2*e,r=e,i=n-e;return b(n,n,(function(e,n){if(r<=e&&e<i&&r<=n&&n<i){var o=Math.floor((e-r)/t),s=Math.floor((n-r)/t);return w.isDark(s,o)?0:1}return 1}))},w.createImgTag=function(t,e,n){t=t||2,e=void 0===e?4*t:e;var r=w.getModuleCount()*t+2*e,i="";return i+="<img",i+=' src="',i+=w.createDataURL(t,e),i+='"',i+=' width="',i+=r,i+='"',i+=' height="',i+=r,i+='"',n&&(i+=' alt="',i+=S(n),i+='"'),i+"/>"};var S=function(t){for(var e="",n=0;n<t.length;n+=1){var r=t.charAt(n);switch(r){case"<":e+="&lt;";break;case">":e+="&gt;";break;case"&":e+="&amp;";break;case'"':e+="&quot;";break;default:e+=r}}return e};return w.createASCII=function(t,e){if((t=t||1)<2)return function(t){t=void 0===t?2:t;var e,n,r,i,o,s=1*w.getModuleCount()+2*t,a=t,c=s-t,u={"██":"█","█ ":"▀"," █":"▄","  ":" "},l={"██":"▀","█ ":"▀"," █":" ","  ":" "},h="";for(e=0;e<s;e+=2){for(r=Math.floor((e-a)/1),i=Math.floor((e+1-a)/1),n=0;n<s;n+=1)o="█",a<=n&&n<c&&a<=e&&e<c&&w.isDark(r,Math.floor((n-a)/1))&&(o=" "),a<=n&&n<c&&a<=e+1&&e+1<c&&w.isDark(i,Math.floor((n-a)/1))?o+=" ":o+="█",h+=t<1&&e+1>=c?l[o]:u[o];h+="\n"}return s%2&&t>0?h.substring(0,h.length-s-1)+Array(s+1).join("▀"):h.substring(0,h.length-1)}(e);t-=1,e=void 0===e?2*t:e;var n,r,i,o,s=w.getModuleCount()*t+2*e,a=e,c=s-e,u=Array(t+1).join("██"),l=Array(t+1).join("  "),h="",f="";for(n=0;n<s;n+=1){for(i=Math.floor((n-a)/t),f="",r=0;r<s;r+=1)o=1,a<=r&&r<c&&a<=n&&n<c&&w.isDark(i,Math.floor((r-a)/t))&&(o=0),f+=o?u:l;for(i=0;i<t;i+=1)h+=f+"\n"}return h.substring(0,h.length-1)},w.renderTo2dContext=function(t,e){e=e||2;for(var n=w.getModuleCount(),r=0;r<n;r++)for(var i=0;i<n;i++)t.fillStyle=w.isDark(r,i)?"black":"white",t.fillRect(r*e,i*e,e,e)},w};t.stringToBytes=(t.stringToBytesFuncs={default:function(t){for(var e=[],n=0;n<t.length;n+=1){var r=t.charCodeAt(n);e.push(255&r)}return e}}).default,t.createStringToBytes=function(t,e){var n=function(){for(var n=w(t),r=function(){var t=n.read();if(-1==t)throw"eof";return t},i=0,o={};;){var s=n.read();if(-1==s)break;var a=r(),c=r()<<8|r();o[String.fromCharCode(s<<8|a)]=c,i+=1}if(i!=e)throw i+" != "+e;return o}(),r="?".charCodeAt(0);return function(t){for(var e=[],i=0;i<t.length;i+=1){var o=t.charCodeAt(i);if(o<128)e.push(o);else{var s=n[t.charAt(i)];"number"==typeof s?(255&s)==s?e.push(s):(e.push(s>>>8),e.push(255&s)):e.push(r)}}return e}};var e,n,r,i,o,s={L:1,M:0,Q:3,H:2},a=(e=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],n=1335,r=7973,o=function(t){for(var e=0;0!=t;)e+=1,t>>>=1;return e},(i={}).getBCHTypeInfo=function(t){for(var e=t<<10;o(e)-o(n)>=0;)e^=n<<o(e)-o(n);return 21522^(t<<10|e)},i.getBCHTypeNumber=function(t){for(var e=t<<12;o(e)-o(r)>=0;)e^=r<<o(e)-o(r);return t<<12|e},i.getPatternPosition=function(t){return e[t-1]},i.getMaskFunction=function(t){switch(t){case 0:return function(t,e){return(t+e)%2==0};case 1:return function(t,e){return t%2==0};case 2:return function(t,e){return e%3==0};case 3:return function(t,e){return(t+e)%3==0};case 4:return function(t,e){return(Math.floor(t/2)+Math.floor(e/3))%2==0};case 5:return function(t,e){return t*e%2+t*e%3==0};case 6:return function(t,e){return(t*e%2+t*e%3)%2==0};case 7:return function(t,e){return(t*e%3+(t+e)%2)%2==0};default:throw"bad maskPattern:"+t}},i.getErrorCorrectPolynomial=function(t){for(var e=u([1],0),n=0;n<t;n+=1)e=e.multiply(u([1,c.gexp(n)],0));return e},i.getLengthInBits=function(t,e){if(1<=e&&e<10)switch(t){case 1:return 10;case 2:return 9;case 4:case 8:return 8;default:throw"mode:"+t}else if(e<27)switch(t){case 1:return 12;case 2:return 11;case 4:return 16;case 8:return 10;default:throw"mode:"+t}else{if(!(e<41))throw"type:"+e;switch(t){case 1:return 14;case 2:return 13;case 4:return 16;case 8:return 12;default:throw"mode:"+t}}},i.getLostPoint=function(t){for(var e=t.getModuleCount(),n=0,r=0;r<e;r+=1)for(var i=0;i<e;i+=1){for(var o=0,s=t.isDark(r,i),a=-1;a<=1;a+=1)if(!(r+a<0||e<=r+a))for(var c=-1;c<=1;c+=1)i+c<0||e<=i+c||0==a&&0==c||s==t.isDark(r+a,i+c)&&(o+=1);o>5&&(n+=3+o-5)}for(r=0;r<e-1;r+=1)for(i=0;i<e-1;i+=1){var u=0;t.isDark(r,i)&&(u+=1),t.isDark(r+1,i)&&(u+=1),t.isDark(r,i+1)&&(u+=1),t.isDark(r+1,i+1)&&(u+=1),0!=u&&4!=u||(n+=3)}for(r=0;r<e;r+=1)for(i=0;i<e-6;i+=1)t.isDark(r,i)&&!t.isDark(r,i+1)&&t.isDark(r,i+2)&&t.isDark(r,i+3)&&t.isDark(r,i+4)&&!t.isDark(r,i+5)&&t.isDark(r,i+6)&&(n+=40);for(i=0;i<e;i+=1)for(r=0;r<e-6;r+=1)t.isDark(r,i)&&!t.isDark(r+1,i)&&t.isDark(r+2,i)&&t.isDark(r+3,i)&&t.isDark(r+4,i)&&!t.isDark(r+5,i)&&t.isDark(r+6,i)&&(n+=40);var l=0;for(i=0;i<e;i+=1)for(r=0;r<e;r+=1)t.isDark(r,i)&&(l+=1);return n+Math.abs(100*l/e/e-50)/5*10},i),c=function(){for(var t=new Array(256),e=new Array(256),n=0;n<8;n+=1)t[n]=1<<n;for(n=8;n<256;n+=1)t[n]=t[n-4]^t[n-5]^t[n-6]^t[n-8];for(n=0;n<255;n+=1)e[t[n]]=n;return{glog:function(t){if(t<1)throw"glog("+t+")";return e[t]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return t[e]}}}();function u(t,e){if(void 0===t.length)throw t.length+"/"+e;var n=function(){for(var n=0;n<t.length&&0==t[n];)n+=1;for(var r=new Array(t.length-n+e),i=0;i<t.length-n;i+=1)r[i]=t[i+n];return r}(),r={getAt:function(t){return n[t]},getLength:function(){return n.length},multiply:function(t){for(var e=new Array(r.getLength()+t.getLength()-1),n=0;n<r.getLength();n+=1)for(var i=0;i<t.getLength();i+=1)e[n+i]^=c.gexp(c.glog(r.getAt(n))+c.glog(t.getAt(i)));return u(e,0)},mod:function(t){if(r.getLength()-t.getLength()<0)return r;for(var e=c.glog(r.getAt(0))-c.glog(t.getAt(0)),n=new Array(r.getLength()),i=0;i<r.getLength();i+=1)n[i]=r.getAt(i);for(i=0;i<t.getLength();i+=1)n[i]^=c.gexp(c.glog(t.getAt(i))+e);return u(n,0).mod(t)}};return r}var l=function(){var t=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],e=function(t,e){var n={};return n.totalCount=t,n.dataCount=e,n},n={getRSBlocks:function(n,r){var i=function(e,n){switch(n){case s.L:return t[4*(e-1)+0];case s.M:return t[4*(e-1)+1];case s.Q:return t[4*(e-1)+2];case s.H:return t[4*(e-1)+3];default:return}}(n,r);if(void 0===i)throw"bad rs block @ typeNumber:"+n+"/errorCorrectionLevel:"+r;for(var o=i.length/3,a=[],c=0;c<o;c+=1)for(var u=i[3*c+0],l=i[3*c+1],h=i[3*c+2],f=0;f<u;f+=1)a.push(e(l,h));return a}};return n}(),h=function(){var t=[],e=0,n={getBuffer:function(){return t},getAt:function(e){var n=Math.floor(e/8);return 1==(t[n]>>>7-e%8&1)},put:function(t,e){for(var r=0;r<e;r+=1)n.putBit(1==(t>>>e-r-1&1))},getLengthInBits:function(){return e},putBit:function(n){var r=Math.floor(e/8);t.length<=r&&t.push(0),n&&(t[r]|=128>>>e%8),e+=1}};return n},f=function(t){var e=t,n={getMode:function(){return 1},getLength:function(t){return e.length},write:function(t){for(var n=e,i=0;i+2<n.length;)t.put(r(n.substring(i,i+3)),10),i+=3;i<n.length&&(n.length-i==1?t.put(r(n.substring(i,i+1)),4):n.length-i==2&&t.put(r(n.substring(i,i+2)),7))}},r=function(t){for(var e=0,n=0;n<t.length;n+=1)e=10*e+i(t.charAt(n));return e},i=function(t){if("0"<=t&&t<="9")return t.charCodeAt(0)-"0".charCodeAt(0);throw"illegal char :"+t};return n},d=function(t){var e=t,n={getMode:function(){return 2},getLength:function(t){return e.length},write:function(t){for(var n=e,i=0;i+1<n.length;)t.put(45*r(n.charAt(i))+r(n.charAt(i+1)),11),i+=2;i<n.length&&t.put(r(n.charAt(i)),6)}},r=function(t){if("0"<=t&&t<="9")return t.charCodeAt(0)-"0".charCodeAt(0);if("A"<=t&&t<="Z")return t.charCodeAt(0)-"A".charCodeAt(0)+10;switch(t){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+t}};return n},p=function(e){var n=t.stringToBytes(e);return{getMode:function(){return 4},getLength:function(t){return n.length},write:function(t){for(var e=0;e<n.length;e+=1)t.put(n[e],8)}}},g=function(e){var n=t.stringToBytesFuncs.SJIS;if(!n)throw"sjis not supported.";!function(){var t=n("友");if(2!=t.length||38726!=(t[0]<<8|t[1]))throw"sjis not supported."}();var r=n(e),i={getMode:function(){return 8},getLength:function(t){return~~(r.length/2)},write:function(t){for(var e=r,n=0;n+1<e.length;){var i=(255&e[n])<<8|255&e[n+1];if(33088<=i&&i<=40956)i-=33088;else{if(!(57408<=i&&i<=60351))throw"illegal char at "+(n+1)+"/"+i;i-=49472}i=192*(i>>>8&255)+(255&i),t.put(i,13),n+=2}if(n<e.length)throw"illegal char at "+(n+1)}};return i},y=function(){var t=[],e={writeByte:function(e){t.push(255&e)},writeShort:function(t){e.writeByte(t),e.writeByte(t>>>8)},writeBytes:function(t,n,r){n=n||0,r=r||t.length;for(var i=0;i<r;i+=1)e.writeByte(t[i+n])},writeString:function(t){for(var n=0;n<t.length;n+=1)e.writeByte(t.charCodeAt(n))},toByteArray:function(){return t},toString:function(){var e="";e+="[";for(var n=0;n<t.length;n+=1)n>0&&(e+=","),e+=t[n];return e+"]"}};return e},w=function(t){var e=t,n=0,r=0,i=0,o={read:function(){for(;i<8;){if(n>=e.length){if(0==i)return-1;throw"unexpected end of file./"+i}var t=e.charAt(n);if(n+=1,"="==t)return i=0,-1;t.match(/^\s$/)||(r=r<<6|s(t.charCodeAt(0)),i+=6)}var o=r>>>i-8&255;return i-=8,o}},s=function(t){if(65<=t&&t<=90)return t-65;if(97<=t&&t<=122)return t-97+26;if(48<=t&&t<=57)return t-48+52;if(43==t)return 62;if(47==t)return 63;throw"c:"+t};return o},b=function(t,e,n){for(var r=function(t,e){var n=t,r=e,i=new Array(t*e),o={setPixel:function(t,e,r){i[e*n+t]=r},write:function(t){t.writeString("GIF87a"),t.writeShort(n),t.writeShort(r),t.writeByte(128),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(255),t.writeByte(255),t.writeByte(255),t.writeString(","),t.writeShort(0),t.writeShort(0),t.writeShort(n),t.writeShort(r),t.writeByte(0);var e=s(2);t.writeByte(2);for(var i=0;e.length-i>255;)t.writeByte(255),t.writeBytes(e,i,255),i+=255;t.writeByte(e.length-i),t.writeBytes(e,i,e.length-i),t.writeByte(0),t.writeString(";")}},s=function(t){for(var e=1<<t,n=1+(1<<t),r=t+1,o=a(),s=0;s<e;s+=1)o.add(String.fromCharCode(s));o.add(String.fromCharCode(e)),o.add(String.fromCharCode(n));var c,u,l,h=y(),f=(c=h,u=0,l=0,{write:function(t,e){if(t>>>e!=0)throw"length over";for(;u+e>=8;)c.writeByte(255&(t<<u|l)),e-=8-u,t>>>=8-u,l=0,u=0;l|=t<<u,u+=e},flush:function(){u>0&&c.writeByte(l)}});f.write(e,r);var d=0,p=String.fromCharCode(i[d]);for(d+=1;d<i.length;){var g=String.fromCharCode(i[d]);d+=1,o.contains(p+g)?p+=g:(f.write(o.indexOf(p),r),o.size()<4095&&(o.size()==1<<r&&(r+=1),o.add(p+g)),p=g)}return f.write(o.indexOf(p),r),f.write(n,r),f.flush(),h.toByteArray()},a=function(){var t={},e=0,n={add:function(r){if(n.contains(r))throw"dup key:"+r;t[r]=e,e+=1},size:function(){return e},indexOf:function(e){return t[e]},contains:function(e){return void 0!==t[e]}};return n};return o}(t,e),i=0;i<e;i+=1)for(var o=0;o<t;o+=1)r.setPixel(o,i,n(o,i));var s=y();r.write(s);for(var a=function(){var t=0,e=0,n=0,r="",i={},o=function(t){r+=String.fromCharCode(s(63&t))},s=function(t){if(t<0);else{if(t<26)return 65+t;if(t<52)return t-26+97;if(t<62)return t-52+48;if(62==t)return 43;if(63==t)return 47}throw"n:"+t};return i.writeByte=function(r){for(t=t<<8|255&r,e+=8,n+=1;e>=6;)o(t>>>e-6),e-=6},i.flush=function(){if(e>0&&(o(t<<6-e),t=0,e=0),n%3!=0)for(var i=3-n%3,s=0;s<i;s+=1)r+="="},i.toString=function(){return r},i}(),c=s.toByteArray(),u=0;u<c.length;u+=1)a.writeByte(c[u]);return a.flush(),"data:image/gif;base64,"+a};return t}();i.stringToBytesFuncs["UTF-8"]=function(t){return function(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e.push(r):r<2048?e.push(192|r>>6,128|63&r):r<55296||r>=57344?e.push(224|r>>12,128|r>>6&63,128|63&r):(n++,r=65536+((1023&r)<<10|1023&t.charCodeAt(n)),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r))}return e}(t)},void 0===(r="function"==typeof(n=function(){return i})?n.apply(e,[]):n)||(t.exports=r)}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={exports:{}};return t[r](o,o.exports,n),o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{"use strict";var t={};n.r(t),n.d(t,{OG:()=>P,My:()=>H,Ph:()=>T,lX:()=>_,Id:()=>D,fg:()=>F,qj:()=>z,aT:()=>R,lq:()=>q,z:()=>$,Q5:()=>V});var e={};n.r(e),n.d(e,{OG:()=>Wr,My:()=>Dr,Ph:()=>jr,lX:()=>Fr,Id:()=>Zr,fg:()=>Qr,qj:()=>Gr,aT:()=>Kr,lq:()=>Mr,z:()=>Vr,Q5:()=>ti});var r=n(873),i=n.n(r);function o(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function s(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}const a={number:o,bool:function(t){if("boolean"!=typeof t)throw new Error(`Expected boolean, not ${t}`)},bytes:s,hash:function(t){if("function"!=typeof t||"function"!=typeof t.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");o(t.outputLen),o(t.blockLen)},exists:function(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")},output:function(t,e){s(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}},c="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,u=t=>t instanceof Uint8Array,l=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),h=(t,e)=>t<<32-e|t>>>e;if(68!==new Uint8Array(new Uint32Array([287454020]).buffer)[0])throw new Error("Non little-endian hardware is not supported");const f=Array.from({length:256},((t,e)=>e.toString(16).padStart(2,"0")));function d(t){if(!u(t))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=f[t[n]];return e}function p(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(e/2);for(let e=0;e<n.length;e++){const r=2*e,i=t.slice(r,r+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");n[e]=o}return n}function g(t){if("string"==typeof t&&(t=function(t){if("string"!=typeof t)throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array((new TextEncoder).encode(t))}(t)),!u(t))throw new Error("expected Uint8Array, got "+typeof t);return t}function y(...t){const e=new Uint8Array(t.reduce(((t,e)=>t+e.length),0));let n=0;return t.forEach((t=>{if(!u(t))throw new Error("Uint8Array expected");e.set(t,n),n+=t.length})),e}class w{clone(){return this._cloneInto()}}function b(t){const e=e=>t().update(g(e)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function m(t=32){if(c&&"function"==typeof c.getRandomValues)return c.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}class v extends w{constructor(t,e,n,r){super(),this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=l(this.buffer)}update(t){a.exists(this);const{view:e,buffer:n,blockLen:r}=this,i=(t=g(t)).length;for(let o=0;o<i;){const s=Math.min(r-this.pos,i-o);if(s!==r)n.set(t.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===r&&(this.process(e,0),this.pos=0);else{const e=l(t);for(;r<=i-o;o+=r)this.process(e,o)}}return this.length+=t.length,this.roundClean(),this}digestInto(t){a.exists(this),a.output(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:r,isLE:i}=this;let{pos:o}=this;e[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>r-o&&(this.process(n,0),o=0);for(let t=o;t<r;t++)e[t]=0;!function(t,e,n,r){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,n,r);const i=BigInt(32),o=BigInt(4294967295),s=Number(n>>i&o),a=Number(n&o),c=r?4:0,u=r?0:4;t.setUint32(e+c,s,r),t.setUint32(e+u,a,r)}(n,r-8,BigInt(8*this.length),i),this.process(n,0);const s=l(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,h=this.get();if(u>h.length)throw new Error("_sha2: outputLen bigger than state");for(let t=0;t<u;t++)s.setUint32(4*t,h[t],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:r,finished:i,destroyed:o,pos:s}=this;return t.length=r,t.pos=s,t.finished=i,t.destroyed=o,r%e&&t.buffer.set(n),t}}const E=(t,e,n)=>t&e^t&n^e&n,x=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),A=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),B=new Uint32Array(64);class k extends v{constructor(){super(64,32,8,!1),this.A=0|A[0],this.B=0|A[1],this.C=0|A[2],this.D=0|A[3],this.E=0|A[4],this.F=0|A[5],this.G=0|A[6],this.H=0|A[7]}get(){const{A:t,B:e,C:n,D:r,E:i,F:o,G:s,H:a}=this;return[t,e,n,r,i,o,s,a]}set(t,e,n,r,i,o,s,a){this.A=0|t,this.B=0|e,this.C=0|n,this.D=0|r,this.E=0|i,this.F=0|o,this.G=0|s,this.H=0|a}process(t,e){for(let n=0;n<16;n++,e+=4)B[n]=t.getUint32(e,!1);for(let t=16;t<64;t++){const e=B[t-15],n=B[t-2],r=h(e,7)^h(e,18)^e>>>3,i=h(n,17)^h(n,19)^n>>>10;B[t]=i+B[t-7]+r+B[t-16]|0}let{A:n,B:r,C:i,D:o,E:s,F:a,G:c,H:u}=this;for(let t=0;t<64;t++){const e=u+(h(s,6)^h(s,11)^h(s,25))+((l=s)&a^~l&c)+x[t]+B[t]|0,f=(h(n,2)^h(n,13)^h(n,22))+E(n,r,i)|0;u=c,c=a,a=s,s=o+e|0,o=i,i=r,r=n,n=e+f|0}var l;n=n+this.A|0,r=r+this.B|0,i=i+this.C|0,o=o+this.D|0,s=s+this.E|0,a=a+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(n,r,i,o,s,a,c,u)}roundClean(){B.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class I extends k{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const S=b((()=>new k)),L=(b((()=>new I)),BigInt(0),BigInt(1)),U=BigInt(2),C=t=>t instanceof Uint8Array,O=Array.from({length:256},((t,e)=>e.toString(16).padStart(2,"0")));function H(t){if(!C(t))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=O[t[n]];return e}function N(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);return BigInt(""===t?"0":`0x${t}`)}function R(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(e/2);for(let e=0;e<n.length;e++){const r=2*e,i=t.slice(r,r+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");n[e]=o}return n}function T(t){return N(H(t))}function _(t){if(!C(t))throw new Error("Uint8Array expected");return N(H(Uint8Array.from(t).reverse()))}function q(t,e){return R(t.toString(16).padStart(2*e,"0"))}function $(t,e){return q(t,e).reverse()}function z(t,e,n){let r;if("string"==typeof e)try{r=R(e)}catch(n){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${n}`)}else{if(!C(e))throw new Error(`${t} must be hex string or Uint8Array`);r=Uint8Array.from(e)}const i=r.length;if("number"==typeof n&&i!==n)throw new Error(`${t} expected ${n} bytes, got ${i}`);return r}function D(...t){const e=new Uint8Array(t.reduce(((t,e)=>t+e.length),0));let n=0;return t.forEach((t=>{if(!C(t))throw new Error("Uint8Array expected");e.set(t,n),n+=t.length})),e}const P=t=>(U<<BigInt(t-1))-L,K=t=>new Uint8Array(t),j=t=>Uint8Array.from(t);function F(t,e,n){if("number"!=typeof t||t<2)throw new Error("hashLen must be a number");if("number"!=typeof e||e<2)throw new Error("qByteLen must be a number");if("function"!=typeof n)throw new Error("hmacFn must be a function");let r=K(t),i=K(t),o=0;const s=()=>{r.fill(1),i.fill(0),o=0},a=(...t)=>n(i,r,...t),c=(t=K())=>{i=a(j([0]),t),r=a(),0!==t.length&&(i=a(j([1]),t),r=a())},u=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let t=0;const n=[];for(;t<e;){r=a();const e=r.slice();n.push(e),t+=r.length}return D(...n)};return(t,e)=>{let n;for(s(),c(t);!(n=e(u()));)c();return s(),n}}const M={bigint:t=>"bigint"==typeof t,function:t=>"function"==typeof t,boolean:t=>"boolean"==typeof t,string:t=>"string"==typeof t,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>"function"==typeof t&&Number.isSafeInteger(t.outputLen)};function V(t,e,n={}){const r=(e,n,r)=>{const i=M[n];if("function"!=typeof i)throw new Error(`Invalid validator "${n}", expected function`);const o=t[e];if(!(r&&void 0===o||i(o,t)))throw new Error(`Invalid param ${String(e)}=${o} (${typeof o}), expected ${n}`)};for(const[t,n]of Object.entries(e))r(t,n,!1);for(const[t,e]of Object.entries(n))r(t,e,!0);return t}const G=BigInt(0),Z=BigInt(1),W=BigInt(2),Y=BigInt(3),J=BigInt(4),Q=BigInt(5),X=BigInt(8);function tt(t,e){const n=t%e;return n>=G?n:e+n}function et(t,e,n){if(n<=G||e<G)throw new Error("Expected power/modulo > 0");if(n===Z)return G;let r=Z;for(;e>G;)e&Z&&(r=r*t%n),t=t*t%n,e>>=Z;return r}function nt(t,e,n){let r=t;for(;e-- >G;)r*=r,r%=n;return r}function rt(t,e){if(t===G||e<=G)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=tt(t,e),r=e,i=G,o=Z,s=Z,a=G;for(;n!==G;){const t=r/n,e=r%n,c=i-s*t,u=o-a*t;r=n,n=e,i=s,o=a,s=c,a=u}if(r!==Z)throw new Error("invert: does not exist");return tt(i,e)}BigInt(9),BigInt(16);const it=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function ot(t,e){const n=void 0!==e?e:t.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}const st=BigInt(0),at=BigInt(1);function ct(t){return V(t.Fp,it.reduce(((t,e)=>(t[e]="function",t)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),V(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...ot(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const{Ph:ut,aT:lt}=t,ht={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(t){const{Err:e}=ht;if(t.length<2||2!==t[0])throw new e("Invalid signature integer tag");const n=t[1],r=t.subarray(2,n+2);if(!n||r.length!==n)throw new e("Invalid signature integer: wrong length");if(128&r[0])throw new e("Invalid signature integer: negative");if(0===r[0]&&!(128&r[1]))throw new e("Invalid signature integer: unnecessary leading zero");return{d:ut(r),l:t.subarray(n+2)}},toSig(t){const{Err:e}=ht,n="string"==typeof t?lt(t):t;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||48!=n[0])throw new e("Invalid signature tag");if(n[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:i,l:o}=ht._parseInt(n.subarray(2)),{d:s,l:a}=ht._parseInt(o);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s}},hexFromSig(t){const e=t=>8&Number.parseInt(t[0],16)?"00"+t:t,n=t=>{const e=t.toString(16);return 1&e.length?`0${e}`:e},r=e(n(t.s)),i=e(n(t.r)),o=r.length/2,s=i.length/2,a=n(o),c=n(s);return`30${n(s+o+4)}02${c}${i}02${a}${r}`}},ft=BigInt(0),dt=BigInt(1),pt=(BigInt(2),BigInt(3));function gt(t){const e=function(t){const e=ct(t);return V(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}(t),{Fp:n,n:r}=e,i=n.BYTES+1,o=2*n.BYTES+1;function s(t){return tt(t,r)}function a(t){return rt(t,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:u,weierstrassEquation:l,isWithinCurveOrder:h}=function(t){const e=function(t){const e=ct(t);V(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=e;if(n){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof n||"bigint"!=typeof n.beta||"function"!=typeof n.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}(t),{Fp:n}=e,r=e.toBytes||((t,e,r)=>{const i=e.toAffine();return D(Uint8Array.from([4]),n.toBytes(i.x),n.toBytes(i.y))}),i=e.fromBytes||(t=>{const e=t.subarray(1);return{x:n.fromBytes(e.subarray(0,n.BYTES)),y:n.fromBytes(e.subarray(n.BYTES,2*n.BYTES))}});function o(t){const{a:r,b:i}=e,o=n.sqr(t),s=n.mul(o,t);return n.add(n.add(s,n.mul(t,r)),i)}if(!n.eql(n.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function s(t){return"bigint"==typeof t&&ft<t&&t<e.n}function a(t){if(!s(t))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(t){const{allowedPrivateKeyLengths:n,nByteLength:r,wrapPrivateKey:i,n:o}=e;if(n&&"bigint"!=typeof t){if(t instanceof Uint8Array&&(t=H(t)),"string"!=typeof t||!n.includes(t.length))throw new Error("Invalid key");t=t.padStart(2*r,"0")}let s;try{s="bigint"==typeof t?t:T(z("private key",t,r))}catch(e){throw new Error(`private key must be ${r} bytes, hex or bigint, not ${typeof t}`)}return i&&(s=tt(s,o)),a(s),s}const u=new Map;function l(t){if(!(t instanceof h))throw new Error("ProjectivePoint expected")}class h{constructor(t,e,r){if(this.px=t,this.py=e,this.pz=r,null==t||!n.isValid(t))throw new Error("x required");if(null==e||!n.isValid(e))throw new Error("y required");if(null==r||!n.isValid(r))throw new Error("z required")}static fromAffine(t){const{x:e,y:r}=t||{};if(!t||!n.isValid(e)||!n.isValid(r))throw new Error("invalid affine point");if(t instanceof h)throw new Error("projective point not allowed");const i=t=>n.eql(t,n.ZERO);return i(e)&&i(r)?h.ZERO:new h(e,r,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(t){const e=n.invertBatch(t.map((t=>t.pz)));return t.map(((t,n)=>t.toAffine(e[n]))).map(h.fromAffine)}static fromHex(t){const e=h.fromAffine(i(z("pointHex",t)));return e.assertValidity(),e}static fromPrivateKey(t){return h.BASE.multiply(c(t))}_setWindowSize(t){this._WINDOW_SIZE=t,u.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint)return;throw new Error("bad point: ZERO")}const{x:t,y:r}=this.toAffine();if(!n.isValid(t)||!n.isValid(r))throw new Error("bad point: x or y not FE");const i=n.sqr(r),s=o(t);if(!n.eql(i,s))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:t}=this.toAffine();if(n.isOdd)return!n.isOdd(t);throw new Error("Field doesn't support isOdd")}equals(t){l(t);const{px:e,py:r,pz:i}=this,{px:o,py:s,pz:a}=t,c=n.eql(n.mul(e,a),n.mul(o,i)),u=n.eql(n.mul(r,a),n.mul(s,i));return c&&u}negate(){return new h(this.px,n.neg(this.py),this.pz)}double(){const{a:t,b:r}=e,i=n.mul(r,pt),{px:o,py:s,pz:a}=this;let c=n.ZERO,u=n.ZERO,l=n.ZERO,f=n.mul(o,o),d=n.mul(s,s),p=n.mul(a,a),g=n.mul(o,s);return g=n.add(g,g),l=n.mul(o,a),l=n.add(l,l),c=n.mul(t,l),u=n.mul(i,p),u=n.add(c,u),c=n.sub(d,u),u=n.add(d,u),u=n.mul(c,u),c=n.mul(g,c),l=n.mul(i,l),p=n.mul(t,p),g=n.sub(f,p),g=n.mul(t,g),g=n.add(g,l),l=n.add(f,f),f=n.add(l,f),f=n.add(f,p),f=n.mul(f,g),u=n.add(u,f),p=n.mul(s,a),p=n.add(p,p),f=n.mul(p,g),c=n.sub(c,f),l=n.mul(p,d),l=n.add(l,l),l=n.add(l,l),new h(c,u,l)}add(t){l(t);const{px:r,py:i,pz:o}=this,{px:s,py:a,pz:c}=t;let u=n.ZERO,f=n.ZERO,d=n.ZERO;const p=e.a,g=n.mul(e.b,pt);let y=n.mul(r,s),w=n.mul(i,a),b=n.mul(o,c),m=n.add(r,i),v=n.add(s,a);m=n.mul(m,v),v=n.add(y,w),m=n.sub(m,v),v=n.add(r,o);let E=n.add(s,c);return v=n.mul(v,E),E=n.add(y,b),v=n.sub(v,E),E=n.add(i,o),u=n.add(a,c),E=n.mul(E,u),u=n.add(w,b),E=n.sub(E,u),d=n.mul(p,v),u=n.mul(g,b),d=n.add(u,d),u=n.sub(w,d),d=n.add(w,d),f=n.mul(u,d),w=n.add(y,y),w=n.add(w,y),b=n.mul(p,b),v=n.mul(g,v),w=n.add(w,b),b=n.sub(y,b),b=n.mul(p,b),v=n.add(v,b),y=n.mul(w,v),f=n.add(f,y),y=n.mul(E,v),u=n.mul(m,u),u=n.sub(u,y),y=n.mul(m,w),d=n.mul(E,d),d=n.add(d,y),new h(u,f,d)}subtract(t){return this.add(t.negate())}is0(){return this.equals(h.ZERO)}wNAF(t){return d.wNAFCached(this,u,t,(t=>{const e=n.invertBatch(t.map((t=>t.pz)));return t.map(((t,n)=>t.toAffine(e[n]))).map(h.fromAffine)}))}multiplyUnsafe(t){const r=h.ZERO;if(t===ft)return r;if(a(t),t===dt)return this;const{endo:i}=e;if(!i)return d.unsafeLadder(this,t);let{k1neg:o,k1:s,k2neg:c,k2:u}=i.splitScalar(t),l=r,f=r,p=this;for(;s>ft||u>ft;)s&dt&&(l=l.add(p)),u&dt&&(f=f.add(p)),p=p.double(),s>>=dt,u>>=dt;return o&&(l=l.negate()),c&&(f=f.negate()),f=new h(n.mul(f.px,i.beta),f.py,f.pz),l.add(f)}multiply(t){a(t);let r,i,o=t;const{endo:s}=e;if(s){const{k1neg:t,k1:e,k2neg:a,k2:c}=s.splitScalar(o);let{p:u,f:l}=this.wNAF(e),{p:f,f:p}=this.wNAF(c);u=d.constTimeNegate(t,u),f=d.constTimeNegate(a,f),f=new h(n.mul(f.px,s.beta),f.py,f.pz),r=u.add(f),i=l.add(p)}else{const{p:t,f:e}=this.wNAF(o);r=t,i=e}return h.normalizeZ([r,i])[0]}multiplyAndAddUnsafe(t,e,n){const r=h.BASE,i=(t,e)=>e!==ft&&e!==dt&&t.equals(r)?t.multiply(e):t.multiplyUnsafe(e),o=i(this,e).add(i(t,n));return o.is0()?void 0:o}toAffine(t){const{px:e,py:r,pz:i}=this,o=this.is0();null==t&&(t=o?n.ONE:n.inv(i));const s=n.mul(e,t),a=n.mul(r,t),c=n.mul(i,t);if(o)return{x:n.ZERO,y:n.ZERO};if(!n.eql(c,n.ONE))throw new Error("invZ was invalid");return{x:s,y:a}}isTorsionFree(){const{h:t,isTorsionFree:n}=e;if(t===dt)return!0;if(n)return n(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:t,clearCofactor:n}=e;return t===dt?this:n?n(h,this):this.multiplyUnsafe(e.h)}toRawBytes(t=!0){return this.assertValidity(),r(h,this,t)}toHex(t=!0){return H(this.toRawBytes(t))}}h.BASE=new h(e.Gx,e.Gy,n.ONE),h.ZERO=new h(n.ZERO,n.ONE,n.ZERO);const f=e.nBitLength,d=function(t,e){const n=(t,e)=>{const n=e.negate();return t?n:e},r=t=>({windows:Math.ceil(e/t)+1,windowSize:2**(t-1)});return{constTimeNegate:n,unsafeLadder(e,n){let r=t.ZERO,i=e;for(;n>st;)n&at&&(r=r.add(i)),i=i.double(),n>>=at;return r},precomputeWindow(t,e){const{windows:n,windowSize:i}=r(e),o=[];let s=t,a=s;for(let t=0;t<n;t++){a=s,o.push(a);for(let t=1;t<i;t++)a=a.add(s),o.push(a);s=a.double()}return o},wNAF(e,i,o){const{windows:s,windowSize:a}=r(e);let c=t.ZERO,u=t.BASE;const l=BigInt(2**e-1),h=2**e,f=BigInt(e);for(let t=0;t<s;t++){const e=t*a;let r=Number(o&l);o>>=f,r>a&&(r-=h,o+=at);const s=e,d=e+Math.abs(r)-1,p=t%2!=0,g=r<0;0===r?u=u.add(n(p,i[s])):c=c.add(n(g,i[d]))}return{p:c,f:u}},wNAFCached(t,e,n,r){const i=t._WINDOW_SIZE||1;let o=e.get(t);return o||(o=this.precomputeWindow(t,i),1!==i&&e.set(t,r(o))),this.wNAF(i,o,n)}}}(h,e.endo?Math.ceil(f/2):f);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:s}}({...e,toBytes(t,e,r){const i=e.toAffine(),o=n.toBytes(i.x),s=D;return r?s(Uint8Array.from([e.hasEvenY()?2:3]),o):s(Uint8Array.from([4]),o,n.toBytes(i.y))},fromBytes(t){const e=t.length,r=t[0],s=t.subarray(1);if(e!==i||2!==r&&3!==r){if(e===o&&4===r)return{x:n.fromBytes(s.subarray(0,n.BYTES)),y:n.fromBytes(s.subarray(n.BYTES,2*n.BYTES))};throw new Error(`Point of length ${e} was invalid. Expected ${i} compressed bytes or ${o} uncompressed bytes`)}{const t=T(s);if(!(ft<(a=t)&&a<n.ORDER))throw new Error("Point is not on curve");const e=l(t);let i=n.sqrt(e);return!(1&~r)!=((i&dt)===dt)&&(i=n.neg(i)),{x:t,y:i}}var a}}),f=t=>H(q(t,e.nByteLength));function d(t){return t>r>>dt}const p=(t,e,n)=>T(t.slice(e,n));class g{constructor(t,e,n){this.r=t,this.s=e,this.recovery=n,this.assertValidity()}static fromCompact(t){const n=e.nByteLength;return t=z("compactSignature",t,2*n),new g(p(t,0,n),p(t,n,2*n))}static fromDER(t){const{r:e,s:n}=ht.toSig(z("DER",t));return new g(e,n)}assertValidity(){if(!h(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(t){return new g(this.r,this.s,t)}recoverPublicKey(t){const{r,s:i,recovery:o}=this,u=m(z("msgHash",t));if(null==o||![0,1,2,3].includes(o))throw new Error("recovery id invalid");const l=2===o||3===o?r+e.n:r;if(l>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const h=1&o?"03":"02",d=c.fromHex(h+f(l)),p=a(l),g=s(-u*p),y=s(i*p),w=c.BASE.multiplyAndAddUnsafe(d,g,y);if(!w)throw new Error("point at infinify");return w.assertValidity(),w}hasHighS(){return d(this.s)}normalizeS(){return this.hasHighS()?new g(this.r,s(-this.s),this.recovery):this}toDERRawBytes(){return R(this.toDERHex())}toDERHex(){return ht.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return R(this.toCompactHex())}toCompactHex(){return f(this.r)+f(this.s)}}const y={isValidPrivateKey(t){try{return u(t),!0}catch(t){return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>q(function(t,e,n=!1){const r=(t=z("privateHash",t)).length,i=ot(e).nByteLength+8;if(i<24||r<i||r>1024)throw new Error(`hashToPrivateScalar: expected ${i}-1024 bytes of input, got ${r}`);return tt(n?_(t):T(t),e-Z)+Z}(e.randomBytes(n.BYTES+8),r),e.nByteLength),precompute:(t=8,e=c.BASE)=>(e._setWindowSize(t),e.multiply(BigInt(3)),e)};function w(t){const e=t instanceof Uint8Array,n="string"==typeof t,r=(e||n)&&t.length;return e?r===i||r===o:n?r===2*i||r===2*o:t instanceof c}const b=e.bits2int||function(t){const n=T(t),r=8*t.length-e.nBitLength;return r>0?n>>BigInt(r):n},m=e.bits2int_modN||function(t){return s(b(t))},v=P(e.nBitLength);function E(t){if("bigint"!=typeof t)throw new Error("bigint expected");if(!(ft<=t&&t<v))throw new Error(`bigint expected < 2^${e.nBitLength}`);return q(t,e.nByteLength)}const x={lowS:e.lowS,prehash:!1},A={lowS:e.lowS,prehash:!1};return c.BASE._setWindowSize(8),{CURVE:e,getPublicKey:function(t,e=!0){return c.fromPrivateKey(t).toRawBytes(e)},getSharedSecret:function(t,e,n=!0){if(w(t))throw new Error("first arg must be private key");if(!w(e))throw new Error("second arg must be public key");return c.fromHex(e).multiply(u(t)).toRawBytes(n)},sign:function(t,r,i=x){const{seed:o,k2sig:l}=function(t,r,i=x){if(["recovered","canonical"].some((t=>t in i)))throw new Error("sign() legacy options not supported");const{hash:o,randomBytes:l}=e;let{lowS:f,prehash:p,extraEntropy:y}=i;null==f&&(f=!0),t=z("msgHash",t),p&&(t=z("prehashed msgHash",o(t)));const w=m(t),v=u(r),A=[E(v),E(w)];if(null!=y){const t=!0===y?l(n.BYTES):y;A.push(z("extraEntropy",t,n.BYTES))}const B=D(...A),k=w;return{seed:B,k2sig:function(t){const e=b(t);if(!h(e))return;const n=a(e),r=c.BASE.multiply(e).toAffine(),i=s(r.x);if(i===ft)return;const o=s(n*s(k+i*v));if(o===ft)return;let u=(r.x===i?0:2)|Number(r.y&dt),l=o;return f&&d(o)&&(l=function(t){return d(t)?s(-t):t}(o),u^=1),new g(i,l,u)}}}(t,r,i),f=e;return F(f.hash.outputLen,f.nByteLength,f.hmac)(o,l)},verify:function(t,n,r,i=A){const o=t;if(n=z("msgHash",n),r=z("publicKey",r),"strict"in i)throw new Error("options.strict was renamed to lowS");const{lowS:u,prehash:l}=i;let h,f;try{if("string"==typeof o||o instanceof Uint8Array)try{h=g.fromDER(o)}catch(t){if(!(t instanceof ht.Err))throw t;h=g.fromCompact(o)}else{if("object"!=typeof o||"bigint"!=typeof o.r||"bigint"!=typeof o.s)throw new Error("PARSE");{const{r:t,s:e}=o;h=new g(t,e)}}f=c.fromHex(r)}catch(t){if("PARSE"===t.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(u&&h.hasHighS())return!1;l&&(n=e.hash(n));const{r:d,s:p}=h,y=m(n),w=a(p),b=s(y*w),v=s(d*w),E=c.BASE.multiplyAndAddUnsafe(f,b,v)?.toAffine();return!!E&&s(E.x)===d},ProjectivePoint:c,Signature:g,utils:y}}BigInt(4);class yt extends w{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,a.hash(t);const n=g(e);if(this.iHash=t.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,i=new Uint8Array(r);i.set(n.length>r?t.create().update(n).digest():n);for(let t=0;t<i.length;t++)i[t]^=54;this.iHash.update(i),this.oHash=t.create();for(let t=0;t<i.length;t++)i[t]^=106;this.oHash.update(i),i.fill(0)}update(t){return a.exists(this),this.iHash.update(t),this}digestInto(t){a.exists(this),a.bytes(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:n,finished:r,destroyed:i,blockLen:o,outputLen:s}=this;return t.finished=r,t.destroyed=i,t.blockLen=o,t.outputLen=s,t.oHash=e._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const wt=(t,e,n)=>new yt(t,e).update(n).digest();function bt(t){return{hash:t,hmac:(e,...n)=>wt(t,e,y(...n)),randomBytes:m}}wt.create=(t,e)=>new yt(t,e);const mt=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),vt=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Et=BigInt(1),xt=BigInt(2),At=(t,e)=>(t+e/xt)/e;function Bt(t){const e=mt,n=BigInt(3),r=BigInt(6),i=BigInt(11),o=BigInt(22),s=BigInt(23),a=BigInt(44),c=BigInt(88),u=t*t*t%e,l=u*u*t%e,h=nt(l,n,e)*l%e,f=nt(h,n,e)*l%e,d=nt(f,xt,e)*u%e,p=nt(d,i,e)*d%e,g=nt(p,o,e)*p%e,y=nt(g,a,e)*g%e,w=nt(y,c,e)*y%e,b=nt(w,a,e)*g%e,m=nt(b,n,e)*l%e,v=nt(m,s,e)*p%e,E=nt(v,r,e)*u%e,x=nt(E,xt,e);if(!kt.eql(kt.sqr(x),t))throw new Error("Cannot find square root");return x}const kt=function(t,e,n=!1,r={}){if(t<=G)throw new Error(`Expected Fp ORDER > 0, got ${t}`);const{nBitLength:i,nByteLength:o}=ot(t,e);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");const s=function(t){if(t%J===Y){const e=(t+Z)/J;return function(t,n){const r=t.pow(n,e);if(!t.eql(t.sqr(r),n))throw new Error("Cannot find square root");return r}}if(t%X===Q){const e=(t-Q)/X;return function(t,n){const r=t.mul(n,W),i=t.pow(r,e),o=t.mul(n,i),s=t.mul(t.mul(o,W),i),a=t.mul(o,t.sub(s,t.ONE));if(!t.eql(t.sqr(a),n))throw new Error("Cannot find square root");return a}}return function(t){const e=(t-Z)/W;let n,r,i;for(n=t-Z,r=0;n%W===G;n/=W,r++);for(i=W;i<t&&et(i,e,t)!==t-Z;i++);if(1===r){const e=(t+Z)/J;return function(t,n){const r=t.pow(n,e);if(!t.eql(t.sqr(r),n))throw new Error("Cannot find square root");return r}}const o=(n+Z)/W;return function(t,s){if(t.pow(s,e)===t.neg(t.ONE))throw new Error("Cannot find square root");let a=r,c=t.pow(t.mul(t.ONE,i),n),u=t.pow(s,o),l=t.pow(s,n);for(;!t.eql(l,t.ONE);){if(t.eql(l,t.ZERO))return t.ZERO;let e=1;for(let n=t.sqr(l);e<a&&!t.eql(n,t.ONE);e++)n=t.sqr(n);const n=t.pow(c,Z<<BigInt(a-e-1));c=t.sqr(n),u=t.mul(u,n),l=t.mul(l,c),a=e}return u}}(t)}(t),a=Object.freeze({ORDER:t,BITS:i,BYTES:o,MASK:P(i),ZERO:G,ONE:Z,create:e=>tt(e,t),isValid:e=>{if("bigint"!=typeof e)throw new Error("Invalid field element: expected bigint, got "+typeof e);return G<=e&&e<t},is0:t=>t===G,isOdd:t=>(t&Z)===Z,neg:e=>tt(-e,t),eql:(t,e)=>t===e,sqr:e=>tt(e*e,t),add:(e,n)=>tt(e+n,t),sub:(e,n)=>tt(e-n,t),mul:(e,n)=>tt(e*n,t),pow:(t,e)=>function(t,e,n){if(n<G)throw new Error("Expected power > 0");if(n===G)return t.ONE;if(n===Z)return e;let r=t.ONE,i=e;for(;n>G;)n&Z&&(r=t.mul(r,i)),i=t.sqr(i),n>>=Z;return r}(a,t,e),div:(e,n)=>tt(e*rt(n,t),t),sqrN:t=>t*t,addN:(t,e)=>t+e,subN:(t,e)=>t-e,mulN:(t,e)=>t*e,inv:e=>rt(e,t),sqrt:r.sqrt||(t=>s(a,t)),invertBatch:t=>function(t,e){const n=new Array(e.length),r=e.reduce(((e,r,i)=>t.is0(r)?e:(n[i]=e,t.mul(e,r))),t.ONE),i=t.inv(r);return e.reduceRight(((e,r,i)=>t.is0(r)?e:(n[i]=t.mul(e,n[i]),t.mul(e,r))),i),n}(a,t),cmov:(t,e,n)=>n?e:t,toBytes:t=>n?$(t,o):q(t,o),fromBytes:t=>{if(t.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${t.length}`);return n?_(t):T(t)}});return Object.freeze(a)}(mt,void 0,void 0,{sqrt:Bt}),It=function(t,e){const n=e=>gt({...t,...bt(e)});return Object.freeze({...n(e),create:n})}({a:BigInt(0),b:BigInt(7),Fp:kt,n:vt,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=vt,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Et*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=n,s=BigInt("0x100000000000000000000000000000000"),a=At(o*t,e),c=At(-r*t,e);let u=tt(t-a*n-c*i,e),l=tt(-a*r-c*o,e);const h=u>s,f=l>s;if(h&&(u=e-u),f&&(l=e-l),u>s||l>s)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:h,k1:u,k2neg:f,k2:l}}}},S),St=BigInt(0),Lt=t=>"bigint"==typeof t&&St<t&&t<mt,Ut={};function Ct(t,...e){let n=Ut[t];if(void 0===n){const e=S(Uint8Array.from(t,(t=>t.charCodeAt(0))));n=D(e,e),Ut[t]=n}return S(D(n,...e))}const Ot=t=>t.toRawBytes(!0).slice(1),Ht=t=>q(t,32),Nt=t=>tt(t,mt),Rt=t=>tt(t,vt),Tt=It.ProjectivePoint;function _t(t){let e=It.utils.normPrivateKeyToScalar(t),n=Tt.fromPrivateKey(e);return{scalar:n.hasEvenY()?e:Rt(-e),bytes:Ot(n)}}function qt(t){if(!Lt(t))throw new Error("bad x: need 0 < x < p");const e=Nt(t*t);let n=Bt(Nt(e*t+BigInt(7)));n%xt!==St&&(n=Nt(-n));const r=new Tt(t,n,Et);return r.assertValidity(),r}function $t(...t){return Rt(T(Ct("BIP0340/challenge",...t)))}function zt(t){return _t(t).bytes}function Dt(t,e,n=m(32)){const r=z("message",t),{bytes:i,scalar:o}=_t(e),s=z("auxRand",n,32),a=Ht(o^T(Ct("BIP0340/aux",s))),c=Ct("BIP0340/nonce",a,i,r),u=Rt(T(c));if(u===St)throw new Error("sign failed: k is zero");const{bytes:l,scalar:h}=_t(u),f=$t(l,i,r),d=new Uint8Array(64);if(d.set(l,0),d.set(Ht(Rt(h+f*o)),32),!Pt(d,r,i))throw new Error("sign: Invalid signature produced");return d}function Pt(t,e,n){const r=z("signature",t,64),i=z("message",e),o=z("publicKey",n,32);try{const t=qt(T(o)),e=T(r.subarray(0,32));if(!Lt(e))return!1;const n=T(r.subarray(32,64));if(!("bigint"==typeof(u=n)&&St<u&&u<vt))return!1;const l=$t(Ht(e),Ot(t),i),h=(s=t,a=n,c=Rt(-l),Tt.BASE.multiplyAndAddUnsafe(s,a,c));return!(!h||!h.hasEvenY()||h.toAffine().x!==e)}catch(t){return!1}var s,a,c,u}const Kt=(()=>({getPublicKey:zt,sign:Dt,verify:Pt,utils:{randomPrivateKey:It.utils.randomPrivateKey,lift_x:qt,pointToBytes:Ot,numberToBytesBE:q,bytesToNumberBE:T,taggedHash:Ct,mod:tt}}))();function jt(t){if(!Number.isSafeInteger(t))throw new Error(`Wrong integer: ${t}`)}function Ft(...t){const e=(t,e)=>n=>t(e(n));return{encode:Array.from(t).reverse().reduce(((t,n)=>t?e(t,n.encode):n.encode),void 0),decode:t.reduce(((t,n)=>t?e(t,n.decode):n.decode),void 0)}}function Mt(t){return{encode:e=>{if(!Array.isArray(e)||e.length&&"number"!=typeof e[0])throw new Error("alphabet.encode input should be an array of numbers");return e.map((e=>{if(jt(e),e<0||e>=t.length)throw new Error(`Digit index outside alphabet: ${e} (alphabet: ${t.length})`);return t[e]}))},decode:e=>{if(!Array.isArray(e)||e.length&&"string"!=typeof e[0])throw new Error("alphabet.decode input should be array of strings");return e.map((e=>{if("string"!=typeof e)throw new Error(`alphabet.decode: not string element=${e}`);const n=t.indexOf(e);if(-1===n)throw new Error(`Unknown letter: "${e}". Allowed: ${t}`);return n}))}}}function Vt(t=""){if("string"!=typeof t)throw new Error("join separator should be string");return{encode:e=>{if(!Array.isArray(e)||e.length&&"string"!=typeof e[0])throw new Error("join.encode input should be array of strings");for(let t of e)if("string"!=typeof t)throw new Error(`join.encode: non-string input=${t}`);return e.join(t)},decode:e=>{if("string"!=typeof e)throw new Error("join.decode input should be string");return e.split(t)}}}function Gt(t,e="="){if(jt(t),"string"!=typeof e)throw new Error("padding chr should be string");return{encode(n){if(!Array.isArray(n)||n.length&&"string"!=typeof n[0])throw new Error("padding.encode input should be array of strings");for(let t of n)if("string"!=typeof t)throw new Error(`padding.encode: non-string input=${t}`);for(;n.length*t%8;)n.push(e);return n},decode(n){if(!Array.isArray(n)||n.length&&"string"!=typeof n[0])throw new Error("padding.encode input should be array of strings");for(let t of n)if("string"!=typeof t)throw new Error(`padding.decode: non-string input=${t}`);let r=n.length;if(r*t%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;r>0&&n[r-1]===e;r--)if(!((r-1)*t%8))throw new Error("Invalid padding: string has too much padding");return n.slice(0,r)}}}function Zt(t){if("function"!=typeof t)throw new Error("normalize fn should be function");return{encode:t=>t,decode:e=>t(e)}}function Wt(t,e,n){if(e<2)throw new Error(`convertRadix: wrong from=${e}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: wrong to=${n}, base cannot be less than 2`);if(!Array.isArray(t))throw new Error("convertRadix: data should be array");if(!t.length)return[];let r=0;const i=[],o=Array.from(t);for(o.forEach((t=>{if(jt(t),t<0||t>=e)throw new Error(`Wrong integer: ${t}`)}));;){let t=0,s=!0;for(let i=r;i<o.length;i++){const a=o[i],c=e*t+a;if(!Number.isSafeInteger(c)||e*t/e!==t||c-a!=e*t)throw new Error("convertRadix: carry overflow");if(t=c%n,o[i]=Math.floor(c/n),!Number.isSafeInteger(o[i])||o[i]*n+t!==c)throw new Error("convertRadix: carry overflow");s&&(o[i]?s=!1:r=i)}if(i.push(t),s)break}for(let e=0;e<t.length-1&&0===t[e];e++)i.push(0);return i.reverse()}const Yt=(t,e)=>e?Yt(e,t%e):t,Jt=(t,e)=>t+(e-Yt(t,e));function Qt(t,e,n,r){if(!Array.isArray(t))throw new Error("convertRadix2: data should be array");if(e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(Jt(e,n)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${n} carryBits=${Jt(e,n)}`);let i=0,o=0;const s=2**n-1,a=[];for(const r of t){if(jt(r),r>=2**e)throw new Error(`convertRadix2: invalid data word=${r} from=${e}`);if(i=i<<e|r,o+e>32)throw new Error(`convertRadix2: carry overflow pos=${o} from=${e}`);for(o+=e;o>=n;o-=n)a.push((i>>o-n&s)>>>0);i&=2**o-1}if(i=i<<n-o&s,!r&&o>=e)throw new Error("Excess padding");if(!r&&i)throw new Error(`Non-zero padding: ${i}`);return r&&o>0&&a.push(i>>>0),a}function Xt(t){return jt(t),{encode:e=>{if(!(e instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return Wt(Array.from(e),256,t)},decode:e=>{if(!Array.isArray(e)||e.length&&"number"!=typeof e[0])throw new Error("radix.decode input should be array of strings");return Uint8Array.from(Wt(e,t,256))}}}function te(t,e=!1){if(jt(t),t<=0||t>32)throw new Error("radix2: bits should be in (0..32]");if(Jt(8,t)>32||Jt(t,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!(n instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return Qt(Array.from(n),8,t,!e)},decode:n=>{if(!Array.isArray(n)||n.length&&"number"!=typeof n[0])throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(Qt(n,t,8,e))}}}function ee(t){if("function"!=typeof t)throw new Error("unsafeWrapper fn should be function");return function(...e){try{return t.apply(null,e)}catch(t){}}}function ne(t,e){if(jt(t),"function"!=typeof e)throw new Error("checksum fn should be function");return{encode(n){if(!(n instanceof Uint8Array))throw new Error("checksum.encode: input should be Uint8Array");const r=e(n).slice(0,t),i=new Uint8Array(n.length+t);return i.set(n),i.set(r,n.length),i},decode(n){if(!(n instanceof Uint8Array))throw new Error("checksum.decode: input should be Uint8Array");const r=n.slice(0,-t),i=e(r).slice(0,t),o=n.slice(-t);for(let e=0;e<t;e++)if(i[e]!==o[e])throw new Error("Invalid checksum");return r}}}const re={alphabet:Mt,chain:Ft,checksum:ne,radix:Xt,radix2:te,join:Vt,padding:Gt},ie=(Ft(te(4),Mt("0123456789ABCDEF"),Vt("")),Ft(te(5),Mt("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),Gt(5),Vt("")),Ft(te(5),Mt("0123456789ABCDEFGHIJKLMNOPQRSTUV"),Gt(5),Vt("")),Ft(te(5),Mt("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),Vt(""),Zt((t=>t.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")))),Ft(te(6),Mt("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),Gt(6),Vt(""))),oe=(Ft(te(6),Mt("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),Gt(6),Vt("")),t=>Ft(Xt(58),Mt(t),Vt(""))),se=oe("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),ae=(oe("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),oe("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz"),Ft(Mt("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),Vt(""))),ce=[996825010,642813549,513874426,1027748829,705979059];function ue(t){const e=t>>25;let n=(33554431&t)<<5;for(let t=0;t<ce.length;t++)1==(e>>t&1)&&(n^=ce[t]);return n}function le(t,e,n=1){const r=t.length;let i=1;for(let e=0;e<r;e++){const n=t.charCodeAt(e);if(n<33||n>126)throw new Error(`Invalid prefix (${t})`);i=ue(i)^n>>5}i=ue(i);for(let e=0;e<r;e++)i=ue(i)^31&t.charCodeAt(e);for(let t of e)i=ue(i)^t;for(let t=0;t<6;t++)i=ue(i);return i^=n,ae.encode(Qt([i%2**30],30,5,!1))}function he(t){const e="bech32"===t?1:734539939,n=te(5),r=n.decode,i=n.encode,o=ee(r);function s(t,n=90){if("string"!=typeof t)throw new Error("bech32.decode input should be string, not "+typeof t);if(t.length<8||!1!==n&&t.length>n)throw new TypeError(`Wrong string length: ${t.length} (${t}). Expected (8..${n})`);const r=t.toLowerCase();if(t!==r&&t!==t.toUpperCase())throw new Error("String must be lowercase or uppercase");const i=(t=r).lastIndexOf("1");if(0===i||-1===i)throw new Error('Letter "1" must be present between prefix and data only');const o=t.slice(0,i),s=t.slice(i+1);if(s.length<6)throw new Error("Data must be at least 6 characters long");const a=ae.decode(s).slice(0,-6),c=le(o,a,e);if(!s.endsWith(c))throw new Error(`Invalid checksum in ${t}: expected "${c}"`);return{prefix:o,words:a}}return{encode:function(t,n,r=90){if("string"!=typeof t)throw new Error("bech32.encode prefix should be string, not "+typeof t);if(!Array.isArray(n)||n.length&&"number"!=typeof n[0])throw new Error("bech32.encode words should be array of numbers, not "+typeof n);const i=t.length+7+n.length;if(!1!==r&&i>r)throw new TypeError(`Length ${i} exceeds limit ${r}`);return`${t=t.toLowerCase()}1${ae.encode(n)}${le(t,n,e)}`},decode:s,decodeToBytes:function(t){const{prefix:e,words:n}=s(t,!1);return{prefix:e,words:n,bytes:r(n)}},decodeUnsafe:ee(s),fromWords:r,fromWordsUnsafe:o,toWords:i}}const fe=he("bech32"),de=(he("bech32m"),Ft(te(4),Mt("0123456789abcdef"),Vt(""),Zt((t=>{if("string"!=typeof t||t.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof t} with length ${t.length}`);return t.toLowerCase()}))),"abandon\nability\nable\nabout\nabove\nabsent\nabsorb\nabstract\nabsurd\nabuse\naccess\naccident\naccount\naccuse\nachieve\nacid\nacoustic\nacquire\nacross\nact\naction\nactor\nactress\nactual\nadapt\nadd\naddict\naddress\nadjust\nadmit\nadult\nadvance\nadvice\naerobic\naffair\nafford\nafraid\nagain\nage\nagent\nagree\nahead\naim\nair\nairport\naisle\nalarm\nalbum\nalcohol\nalert\nalien\nall\nalley\nallow\nalmost\nalone\nalpha\nalready\nalso\nalter\nalways\namateur\namazing\namong\namount\namused\nanalyst\nanchor\nancient\nanger\nangle\nangry\nanimal\nankle\nannounce\nannual\nanother\nanswer\nantenna\nantique\nanxiety\nany\napart\napology\nappear\napple\napprove\napril\narch\narctic\narea\narena\nargue\narm\narmed\narmor\narmy\naround\narrange\narrest\narrive\narrow\nart\nartefact\nartist\nartwork\nask\naspect\nassault\nasset\nassist\nassume\nasthma\nathlete\natom\nattack\nattend\nattitude\nattract\nauction\naudit\naugust\naunt\nauthor\nauto\nautumn\naverage\navocado\navoid\nawake\naware\naway\nawesome\nawful\nawkward\naxis\nbaby\nbachelor\nbacon\nbadge\nbag\nbalance\nbalcony\nball\nbamboo\nbanana\nbanner\nbar\nbarely\nbargain\nbarrel\nbase\nbasic\nbasket\nbattle\nbeach\nbean\nbeauty\nbecause\nbecome\nbeef\nbefore\nbegin\nbehave\nbehind\nbelieve\nbelow\nbelt\nbench\nbenefit\nbest\nbetray\nbetter\nbetween\nbeyond\nbicycle\nbid\nbike\nbind\nbiology\nbird\nbirth\nbitter\nblack\nblade\nblame\nblanket\nblast\nbleak\nbless\nblind\nblood\nblossom\nblouse\nblue\nblur\nblush\nboard\nboat\nbody\nboil\nbomb\nbone\nbonus\nbook\nboost\nborder\nboring\nborrow\nboss\nbottom\nbounce\nbox\nboy\nbracket\nbrain\nbrand\nbrass\nbrave\nbread\nbreeze\nbrick\nbridge\nbrief\nbright\nbring\nbrisk\nbroccoli\nbroken\nbronze\nbroom\nbrother\nbrown\nbrush\nbubble\nbuddy\nbudget\nbuffalo\nbuild\nbulb\nbulk\nbullet\nbundle\nbunker\nburden\nburger\nburst\nbus\nbusiness\nbusy\nbutter\nbuyer\nbuzz\ncabbage\ncabin\ncable\ncactus\ncage\ncake\ncall\ncalm\ncamera\ncamp\ncan\ncanal\ncancel\ncandy\ncannon\ncanoe\ncanvas\ncanyon\ncapable\ncapital\ncaptain\ncar\ncarbon\ncard\ncargo\ncarpet\ncarry\ncart\ncase\ncash\ncasino\ncastle\ncasual\ncat\ncatalog\ncatch\ncategory\ncattle\ncaught\ncause\ncaution\ncave\nceiling\ncelery\ncement\ncensus\ncentury\ncereal\ncertain\nchair\nchalk\nchampion\nchange\nchaos\nchapter\ncharge\nchase\nchat\ncheap\ncheck\ncheese\nchef\ncherry\nchest\nchicken\nchief\nchild\nchimney\nchoice\nchoose\nchronic\nchuckle\nchunk\nchurn\ncigar\ncinnamon\ncircle\ncitizen\ncity\ncivil\nclaim\nclap\nclarify\nclaw\nclay\nclean\nclerk\nclever\nclick\nclient\ncliff\nclimb\nclinic\nclip\nclock\nclog\nclose\ncloth\ncloud\nclown\nclub\nclump\ncluster\nclutch\ncoach\ncoast\ncoconut\ncode\ncoffee\ncoil\ncoin\ncollect\ncolor\ncolumn\ncombine\ncome\ncomfort\ncomic\ncommon\ncompany\nconcert\nconduct\nconfirm\ncongress\nconnect\nconsider\ncontrol\nconvince\ncook\ncool\ncopper\ncopy\ncoral\ncore\ncorn\ncorrect\ncost\ncotton\ncouch\ncountry\ncouple\ncourse\ncousin\ncover\ncoyote\ncrack\ncradle\ncraft\ncram\ncrane\ncrash\ncrater\ncrawl\ncrazy\ncream\ncredit\ncreek\ncrew\ncricket\ncrime\ncrisp\ncritic\ncrop\ncross\ncrouch\ncrowd\ncrucial\ncruel\ncruise\ncrumble\ncrunch\ncrush\ncry\ncrystal\ncube\nculture\ncup\ncupboard\ncurious\ncurrent\ncurtain\ncurve\ncushion\ncustom\ncute\ncycle\ndad\ndamage\ndamp\ndance\ndanger\ndaring\ndash\ndaughter\ndawn\nday\ndeal\ndebate\ndebris\ndecade\ndecember\ndecide\ndecline\ndecorate\ndecrease\ndeer\ndefense\ndefine\ndefy\ndegree\ndelay\ndeliver\ndemand\ndemise\ndenial\ndentist\ndeny\ndepart\ndepend\ndeposit\ndepth\ndeputy\nderive\ndescribe\ndesert\ndesign\ndesk\ndespair\ndestroy\ndetail\ndetect\ndevelop\ndevice\ndevote\ndiagram\ndial\ndiamond\ndiary\ndice\ndiesel\ndiet\ndiffer\ndigital\ndignity\ndilemma\ndinner\ndinosaur\ndirect\ndirt\ndisagree\ndiscover\ndisease\ndish\ndismiss\ndisorder\ndisplay\ndistance\ndivert\ndivide\ndivorce\ndizzy\ndoctor\ndocument\ndog\ndoll\ndolphin\ndomain\ndonate\ndonkey\ndonor\ndoor\ndose\ndouble\ndove\ndraft\ndragon\ndrama\ndrastic\ndraw\ndream\ndress\ndrift\ndrill\ndrink\ndrip\ndrive\ndrop\ndrum\ndry\nduck\ndumb\ndune\nduring\ndust\ndutch\nduty\ndwarf\ndynamic\neager\neagle\nearly\nearn\nearth\neasily\neast\neasy\necho\necology\neconomy\nedge\nedit\neducate\neffort\negg\neight\neither\nelbow\nelder\nelectric\nelegant\nelement\nelephant\nelevator\nelite\nelse\nembark\nembody\nembrace\nemerge\nemotion\nemploy\nempower\nempty\nenable\nenact\nend\nendless\nendorse\nenemy\nenergy\nenforce\nengage\nengine\nenhance\nenjoy\nenlist\nenough\nenrich\nenroll\nensure\nenter\nentire\nentry\nenvelope\nepisode\nequal\nequip\nera\nerase\nerode\nerosion\nerror\nerupt\nescape\nessay\nessence\nestate\neternal\nethics\nevidence\nevil\nevoke\nevolve\nexact\nexample\nexcess\nexchange\nexcite\nexclude\nexcuse\nexecute\nexercise\nexhaust\nexhibit\nexile\nexist\nexit\nexotic\nexpand\nexpect\nexpire\nexplain\nexpose\nexpress\nextend\nextra\neye\neyebrow\nfabric\nface\nfaculty\nfade\nfaint\nfaith\nfall\nfalse\nfame\nfamily\nfamous\nfan\nfancy\nfantasy\nfarm\nfashion\nfat\nfatal\nfather\nfatigue\nfault\nfavorite\nfeature\nfebruary\nfederal\nfee\nfeed\nfeel\nfemale\nfence\nfestival\nfetch\nfever\nfew\nfiber\nfiction\nfield\nfigure\nfile\nfilm\nfilter\nfinal\nfind\nfine\nfinger\nfinish\nfire\nfirm\nfirst\nfiscal\nfish\nfit\nfitness\nfix\nflag\nflame\nflash\nflat\nflavor\nflee\nflight\nflip\nfloat\nflock\nfloor\nflower\nfluid\nflush\nfly\nfoam\nfocus\nfog\nfoil\nfold\nfollow\nfood\nfoot\nforce\nforest\nforget\nfork\nfortune\nforum\nforward\nfossil\nfoster\nfound\nfox\nfragile\nframe\nfrequent\nfresh\nfriend\nfringe\nfrog\nfront\nfrost\nfrown\nfrozen\nfruit\nfuel\nfun\nfunny\nfurnace\nfury\nfuture\ngadget\ngain\ngalaxy\ngallery\ngame\ngap\ngarage\ngarbage\ngarden\ngarlic\ngarment\ngas\ngasp\ngate\ngather\ngauge\ngaze\ngeneral\ngenius\ngenre\ngentle\ngenuine\ngesture\nghost\ngiant\ngift\ngiggle\nginger\ngiraffe\ngirl\ngive\nglad\nglance\nglare\nglass\nglide\nglimpse\nglobe\ngloom\nglory\nglove\nglow\nglue\ngoat\ngoddess\ngold\ngood\ngoose\ngorilla\ngospel\ngossip\ngovern\ngown\ngrab\ngrace\ngrain\ngrant\ngrape\ngrass\ngravity\ngreat\ngreen\ngrid\ngrief\ngrit\ngrocery\ngroup\ngrow\ngrunt\nguard\nguess\nguide\nguilt\nguitar\ngun\ngym\nhabit\nhair\nhalf\nhammer\nhamster\nhand\nhappy\nharbor\nhard\nharsh\nharvest\nhat\nhave\nhawk\nhazard\nhead\nhealth\nheart\nheavy\nhedgehog\nheight\nhello\nhelmet\nhelp\nhen\nhero\nhidden\nhigh\nhill\nhint\nhip\nhire\nhistory\nhobby\nhockey\nhold\nhole\nholiday\nhollow\nhome\nhoney\nhood\nhope\nhorn\nhorror\nhorse\nhospital\nhost\nhotel\nhour\nhover\nhub\nhuge\nhuman\nhumble\nhumor\nhundred\nhungry\nhunt\nhurdle\nhurry\nhurt\nhusband\nhybrid\nice\nicon\nidea\nidentify\nidle\nignore\nill\nillegal\nillness\nimage\nimitate\nimmense\nimmune\nimpact\nimpose\nimprove\nimpulse\ninch\ninclude\nincome\nincrease\nindex\nindicate\nindoor\nindustry\ninfant\ninflict\ninform\ninhale\ninherit\ninitial\ninject\ninjury\ninmate\ninner\ninnocent\ninput\ninquiry\ninsane\ninsect\ninside\ninspire\ninstall\nintact\ninterest\ninto\ninvest\ninvite\ninvolve\niron\nisland\nisolate\nissue\nitem\nivory\njacket\njaguar\njar\njazz\njealous\njeans\njelly\njewel\njob\njoin\njoke\njourney\njoy\njudge\njuice\njump\njungle\njunior\njunk\njust\nkangaroo\nkeen\nkeep\nketchup\nkey\nkick\nkid\nkidney\nkind\nkingdom\nkiss\nkit\nkitchen\nkite\nkitten\nkiwi\nknee\nknife\nknock\nknow\nlab\nlabel\nlabor\nladder\nlady\nlake\nlamp\nlanguage\nlaptop\nlarge\nlater\nlatin\nlaugh\nlaundry\nlava\nlaw\nlawn\nlawsuit\nlayer\nlazy\nleader\nleaf\nlearn\nleave\nlecture\nleft\nleg\nlegal\nlegend\nleisure\nlemon\nlend\nlength\nlens\nleopard\nlesson\nletter\nlevel\nliar\nliberty\nlibrary\nlicense\nlife\nlift\nlight\nlike\nlimb\nlimit\nlink\nlion\nliquid\nlist\nlittle\nlive\nlizard\nload\nloan\nlobster\nlocal\nlock\nlogic\nlonely\nlong\nloop\nlottery\nloud\nlounge\nlove\nloyal\nlucky\nluggage\nlumber\nlunar\nlunch\nluxury\nlyrics\nmachine\nmad\nmagic\nmagnet\nmaid\nmail\nmain\nmajor\nmake\nmammal\nman\nmanage\nmandate\nmango\nmansion\nmanual\nmaple\nmarble\nmarch\nmargin\nmarine\nmarket\nmarriage\nmask\nmass\nmaster\nmatch\nmaterial\nmath\nmatrix\nmatter\nmaximum\nmaze\nmeadow\nmean\nmeasure\nmeat\nmechanic\nmedal\nmedia\nmelody\nmelt\nmember\nmemory\nmention\nmenu\nmercy\nmerge\nmerit\nmerry\nmesh\nmessage\nmetal\nmethod\nmiddle\nmidnight\nmilk\nmillion\nmimic\nmind\nminimum\nminor\nminute\nmiracle\nmirror\nmisery\nmiss\nmistake\nmix\nmixed\nmixture\nmobile\nmodel\nmodify\nmom\nmoment\nmonitor\nmonkey\nmonster\nmonth\nmoon\nmoral\nmore\nmorning\nmosquito\nmother\nmotion\nmotor\nmountain\nmouse\nmove\nmovie\nmuch\nmuffin\nmule\nmultiply\nmuscle\nmuseum\nmushroom\nmusic\nmust\nmutual\nmyself\nmystery\nmyth\nnaive\nname\nnapkin\nnarrow\nnasty\nnation\nnature\nnear\nneck\nneed\nnegative\nneglect\nneither\nnephew\nnerve\nnest\nnet\nnetwork\nneutral\nnever\nnews\nnext\nnice\nnight\nnoble\nnoise\nnominee\nnoodle\nnormal\nnorth\nnose\nnotable\nnote\nnothing\nnotice\nnovel\nnow\nnuclear\nnumber\nnurse\nnut\noak\nobey\nobject\noblige\nobscure\nobserve\nobtain\nobvious\noccur\nocean\noctober\nodor\noff\noffer\noffice\noften\noil\nokay\nold\nolive\nolympic\nomit\nonce\none\nonion\nonline\nonly\nopen\nopera\nopinion\noppose\noption\norange\norbit\norchard\norder\nordinary\norgan\norient\noriginal\norphan\nostrich\nother\noutdoor\nouter\noutput\noutside\noval\noven\nover\nown\nowner\noxygen\noyster\nozone\npact\npaddle\npage\npair\npalace\npalm\npanda\npanel\npanic\npanther\npaper\nparade\nparent\npark\nparrot\nparty\npass\npatch\npath\npatient\npatrol\npattern\npause\npave\npayment\npeace\npeanut\npear\npeasant\npelican\npen\npenalty\npencil\npeople\npepper\nperfect\npermit\nperson\npet\nphone\nphoto\nphrase\nphysical\npiano\npicnic\npicture\npiece\npig\npigeon\npill\npilot\npink\npioneer\npipe\npistol\npitch\npizza\nplace\nplanet\nplastic\nplate\nplay\nplease\npledge\npluck\nplug\nplunge\npoem\npoet\npoint\npolar\npole\npolice\npond\npony\npool\npopular\nportion\nposition\npossible\npost\npotato\npottery\npoverty\npowder\npower\npractice\npraise\npredict\nprefer\nprepare\npresent\npretty\nprevent\nprice\npride\nprimary\nprint\npriority\nprison\nprivate\nprize\nproblem\nprocess\nproduce\nprofit\nprogram\nproject\npromote\nproof\nproperty\nprosper\nprotect\nproud\nprovide\npublic\npudding\npull\npulp\npulse\npumpkin\npunch\npupil\npuppy\npurchase\npurity\npurpose\npurse\npush\nput\npuzzle\npyramid\nquality\nquantum\nquarter\nquestion\nquick\nquit\nquiz\nquote\nrabbit\nraccoon\nrace\nrack\nradar\nradio\nrail\nrain\nraise\nrally\nramp\nranch\nrandom\nrange\nrapid\nrare\nrate\nrather\nraven\nraw\nrazor\nready\nreal\nreason\nrebel\nrebuild\nrecall\nreceive\nrecipe\nrecord\nrecycle\nreduce\nreflect\nreform\nrefuse\nregion\nregret\nregular\nreject\nrelax\nrelease\nrelief\nrely\nremain\nremember\nremind\nremove\nrender\nrenew\nrent\nreopen\nrepair\nrepeat\nreplace\nreport\nrequire\nrescue\nresemble\nresist\nresource\nresponse\nresult\nretire\nretreat\nreturn\nreunion\nreveal\nreview\nreward\nrhythm\nrib\nribbon\nrice\nrich\nride\nridge\nrifle\nright\nrigid\nring\nriot\nripple\nrisk\nritual\nrival\nriver\nroad\nroast\nrobot\nrobust\nrocket\nromance\nroof\nrookie\nroom\nrose\nrotate\nrough\nround\nroute\nroyal\nrubber\nrude\nrug\nrule\nrun\nrunway\nrural\nsad\nsaddle\nsadness\nsafe\nsail\nsalad\nsalmon\nsalon\nsalt\nsalute\nsame\nsample\nsand\nsatisfy\nsatoshi\nsauce\nsausage\nsave\nsay\nscale\nscan\nscare\nscatter\nscene\nscheme\nschool\nscience\nscissors\nscorpion\nscout\nscrap\nscreen\nscript\nscrub\nsea\nsearch\nseason\nseat\nsecond\nsecret\nsection\nsecurity\nseed\nseek\nsegment\nselect\nsell\nseminar\nsenior\nsense\nsentence\nseries\nservice\nsession\nsettle\nsetup\nseven\nshadow\nshaft\nshallow\nshare\nshed\nshell\nsheriff\nshield\nshift\nshine\nship\nshiver\nshock\nshoe\nshoot\nshop\nshort\nshoulder\nshove\nshrimp\nshrug\nshuffle\nshy\nsibling\nsick\nside\nsiege\nsight\nsign\nsilent\nsilk\nsilly\nsilver\nsimilar\nsimple\nsince\nsing\nsiren\nsister\nsituate\nsix\nsize\nskate\nsketch\nski\nskill\nskin\nskirt\nskull\nslab\nslam\nsleep\nslender\nslice\nslide\nslight\nslim\nslogan\nslot\nslow\nslush\nsmall\nsmart\nsmile\nsmoke\nsmooth\nsnack\nsnake\nsnap\nsniff\nsnow\nsoap\nsoccer\nsocial\nsock\nsoda\nsoft\nsolar\nsoldier\nsolid\nsolution\nsolve\nsomeone\nsong\nsoon\nsorry\nsort\nsoul\nsound\nsoup\nsource\nsouth\nspace\nspare\nspatial\nspawn\nspeak\nspecial\nspeed\nspell\nspend\nsphere\nspice\nspider\nspike\nspin\nspirit\nsplit\nspoil\nsponsor\nspoon\nsport\nspot\nspray\nspread\nspring\nspy\nsquare\nsqueeze\nsquirrel\nstable\nstadium\nstaff\nstage\nstairs\nstamp\nstand\nstart\nstate\nstay\nsteak\nsteel\nstem\nstep\nstereo\nstick\nstill\nsting\nstock\nstomach\nstone\nstool\nstory\nstove\nstrategy\nstreet\nstrike\nstrong\nstruggle\nstudent\nstuff\nstumble\nstyle\nsubject\nsubmit\nsubway\nsuccess\nsuch\nsudden\nsuffer\nsugar\nsuggest\nsuit\nsummer\nsun\nsunny\nsunset\nsuper\nsupply\nsupreme\nsure\nsurface\nsurge\nsurprise\nsurround\nsurvey\nsuspect\nsustain\nswallow\nswamp\nswap\nswarm\nswear\nsweet\nswift\nswim\nswing\nswitch\nsword\nsymbol\nsymptom\nsyrup\nsystem\ntable\ntackle\ntag\ntail\ntalent\ntalk\ntank\ntape\ntarget\ntask\ntaste\ntattoo\ntaxi\nteach\nteam\ntell\nten\ntenant\ntennis\ntent\nterm\ntest\ntext\nthank\nthat\ntheme\nthen\ntheory\nthere\nthey\nthing\nthis\nthought\nthree\nthrive\nthrow\nthumb\nthunder\nticket\ntide\ntiger\ntilt\ntimber\ntime\ntiny\ntip\ntired\ntissue\ntitle\ntoast\ntobacco\ntoday\ntoddler\ntoe\ntogether\ntoilet\ntoken\ntomato\ntomorrow\ntone\ntongue\ntonight\ntool\ntooth\ntop\ntopic\ntopple\ntorch\ntornado\ntortoise\ntoss\ntotal\ntourist\ntoward\ntower\ntown\ntoy\ntrack\ntrade\ntraffic\ntragic\ntrain\ntransfer\ntrap\ntrash\ntravel\ntray\ntreat\ntree\ntrend\ntrial\ntribe\ntrick\ntrigger\ntrim\ntrip\ntrophy\ntrouble\ntruck\ntrue\ntruly\ntrumpet\ntrust\ntruth\ntry\ntube\ntuition\ntumble\ntuna\ntunnel\nturkey\nturn\nturtle\ntwelve\ntwenty\ntwice\ntwin\ntwist\ntwo\ntype\ntypical\nugly\numbrella\nunable\nunaware\nuncle\nuncover\nunder\nundo\nunfair\nunfold\nunhappy\nuniform\nunique\nunit\nuniverse\nunknown\nunlock\nuntil\nunusual\nunveil\nupdate\nupgrade\nuphold\nupon\nupper\nupset\nurban\nurge\nusage\nuse\nused\nuseful\nuseless\nusual\nutility\nvacant\nvacuum\nvague\nvalid\nvalley\nvalve\nvan\nvanish\nvapor\nvarious\nvast\nvault\nvehicle\nvelvet\nvendor\nventure\nvenue\nverb\nverify\nversion\nvery\nvessel\nveteran\nviable\nvibrant\nvicious\nvictory\nvideo\nview\nvillage\nvintage\nviolin\nvirtual\nvirus\nvisa\nvisit\nvisual\nvital\nvivid\nvocal\nvoice\nvoid\nvolcano\nvolume\nvote\nvoyage\nwage\nwagon\nwait\nwalk\nwall\nwalnut\nwant\nwarfare\nwarm\nwarrior\nwash\nwasp\nwaste\nwater\nwave\nway\nwealth\nweapon\nwear\nweasel\nweather\nweb\nwedding\nweekend\nweird\nwelcome\nwest\nwet\nwhale\nwhat\nwheat\nwheel\nwhen\nwhere\nwhip\nwhisper\nwide\nwidth\nwife\nwild\nwill\nwin\nwindow\nwine\nwing\nwink\nwinner\nwinter\nwire\nwisdom\nwise\nwish\nwitness\nwolf\nwoman\nwonder\nwood\nwool\nword\nwork\nworld\nworry\nworth\nwrap\nwreck\nwrestle\nwrist\nwrite\nwrong\nyard\nyear\nyellow\nyou\nyoung\nyouth\nzebra\nzero\nzone\nzoo".split("\n"));function pe(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function ge(t,...e){if(!((n=t)instanceof Uint8Array||null!=n&&"object"==typeof n&&"Uint8Array"===n.constructor.name))throw new Error("Expected Uint8Array");var n;if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function ye(t){if("function"!=typeof t||"function"!=typeof t.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");pe(t.outputLen),pe(t.blockLen)}function we(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function be(t,e){ge(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const me={number:pe,bool:function(t){if("boolean"!=typeof t)throw new Error(`Expected boolean, not ${t}`)},bytes:ge,hash:ye,exists:we,output:be},ve="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;const Ee=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),xe=(t,e)=>t<<32-e|t>>>e;if(68!==new Uint8Array(new Uint32Array([287454020]).buffer)[0])throw new Error("Non little-endian hardware is not supported");function Ae(t){if("string"==typeof t&&(t=function(t){if("string"!=typeof t)throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array((new TextEncoder).encode(t))}(t)),!((e=t)instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name))throw new Error("expected Uint8Array, got "+typeof t);var e;return t}class Be{clone(){return this._cloneInto()}}const ke={}.toString;function Ie(t){const e=e=>t().update(Ae(e)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}class Se extends Be{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,ye(t);const n=Ae(e);if(this.iHash=t.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,i=new Uint8Array(r);i.set(n.length>r?t.create().update(n).digest():n);for(let t=0;t<i.length;t++)i[t]^=54;this.iHash.update(i),this.oHash=t.create();for(let t=0;t<i.length;t++)i[t]^=106;this.oHash.update(i),i.fill(0)}update(t){return we(this),this.iHash.update(t),this}digestInto(t){we(this),ge(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:n,finished:r,destroyed:i,blockLen:o,outputLen:s}=this;return t.finished=r,t.destroyed=i,t.blockLen=o,t.outputLen=s,t.oHash=e._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Le=(t,e,n)=>new Se(t,e).update(n).digest();Le.create=(t,e)=>new Se(t,e);class Ue extends Be{constructor(t,e,n,r){super(),this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Ee(this.buffer)}update(t){we(this);const{view:e,buffer:n,blockLen:r}=this,i=(t=Ae(t)).length;for(let o=0;o<i;){const s=Math.min(r-this.pos,i-o);if(s!==r)n.set(t.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===r&&(this.process(e,0),this.pos=0);else{const e=Ee(t);for(;r<=i-o;o+=r)this.process(e,o)}}return this.length+=t.length,this.roundClean(),this}digestInto(t){we(this),be(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:r,isLE:i}=this;let{pos:o}=this;e[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>r-o&&(this.process(n,0),o=0);for(let t=o;t<r;t++)e[t]=0;!function(t,e,n,r){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,n,r);const i=BigInt(32),o=BigInt(4294967295),s=Number(n>>i&o),a=Number(n&o),c=r?4:0,u=r?0:4;t.setUint32(e+c,s,r),t.setUint32(e+u,a,r)}(n,r-8,BigInt(8*this.length),i),this.process(n,0);const s=Ee(t),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=a/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let t=0;t<c;t++)s.setUint32(4*t,u[t],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:r,finished:i,destroyed:o,pos:s}=this;return t.length=r,t.pos=s,t.finished=i,t.destroyed=o,r%e&&t.buffer.set(n),t}}const Ce=(t,e,n)=>t&e^t&n^e&n,Oe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),He=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ne=new Uint32Array(64);class Re extends Ue{constructor(){super(64,32,8,!1),this.A=0|He[0],this.B=0|He[1],this.C=0|He[2],this.D=0|He[3],this.E=0|He[4],this.F=0|He[5],this.G=0|He[6],this.H=0|He[7]}get(){const{A:t,B:e,C:n,D:r,E:i,F:o,G:s,H:a}=this;return[t,e,n,r,i,o,s,a]}set(t,e,n,r,i,o,s,a){this.A=0|t,this.B=0|e,this.C=0|n,this.D=0|r,this.E=0|i,this.F=0|o,this.G=0|s,this.H=0|a}process(t,e){for(let n=0;n<16;n++,e+=4)Ne[n]=t.getUint32(e,!1);for(let t=16;t<64;t++){const e=Ne[t-15],n=Ne[t-2],r=xe(e,7)^xe(e,18)^e>>>3,i=xe(n,17)^xe(n,19)^n>>>10;Ne[t]=i+Ne[t-7]+r+Ne[t-16]|0}let{A:n,B:r,C:i,D:o,E:s,F:a,G:c,H:u}=this;for(let t=0;t<64;t++){const e=u+(xe(s,6)^xe(s,11)^xe(s,25))+((l=s)&a^~l&c)+Oe[t]+Ne[t]|0,h=(xe(n,2)^xe(n,13)^xe(n,22))+Ce(n,r,i)|0;u=c,c=a,a=s,s=o+e|0,o=i,i=r,r=n,n=e+h|0}var l;n=n+this.A|0,r=r+this.B|0,i=i+this.C|0,o=o+this.D|0,s=s+this.E|0,a=a+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(n,r,i,o,s,a,c,u)}roundClean(){Ne.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Te=Ie((()=>new Re)),_e=BigInt(2**32-1),qe=BigInt(32);function $e(t,e=!1){return e?{h:Number(t&_e),l:Number(t>>qe&_e)}:{h:0|Number(t>>qe&_e),l:0|Number(t&_e)}}const ze=function(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:o,l:s}=$e(t[i],e);[n[i],r[i]]=[o,s]}return[n,r]},De=(t,e,n)=>t>>>n,Pe=(t,e,n)=>t<<32-n|e>>>n,Ke=(t,e,n)=>t>>>n|e<<32-n,je=(t,e,n)=>t<<32-n|e>>>n,Fe=(t,e,n)=>t<<64-n|e>>>n-32,Me=(t,e,n)=>t>>>n-32|e<<64-n,Ve=function(t,e,n,r){const i=(e>>>0)+(r>>>0);return{h:t+n+(i/2**32|0)|0,l:0|i}},Ge=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),Ze=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,We=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),Ye=(t,e,n,r,i)=>e+n+r+i+(t/2**32|0)|0,Je=(t,e,n,r,i,o)=>e+n+r+i+o+(t/2**32|0)|0,Qe=(t,e,n,r,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(i>>>0),[Xe,tn]=(()=>ze(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((t=>BigInt(t)))))(),en=new Uint32Array(80),nn=new Uint32Array(80);class rn extends Ue{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:e,Bh:n,Bl:r,Ch:i,Cl:o,Dh:s,Dl:a,Eh:c,El:u,Fh:l,Fl:h,Gh:f,Gl:d,Hh:p,Hl:g}=this;return[t,e,n,r,i,o,s,a,c,u,l,h,f,d,p,g]}set(t,e,n,r,i,o,s,a,c,u,l,h,f,d,p,g){this.Ah=0|t,this.Al=0|e,this.Bh=0|n,this.Bl=0|r,this.Ch=0|i,this.Cl=0|o,this.Dh=0|s,this.Dl=0|a,this.Eh=0|c,this.El=0|u,this.Fh=0|l,this.Fl=0|h,this.Gh=0|f,this.Gl=0|d,this.Hh=0|p,this.Hl=0|g}process(t,e){for(let n=0;n<16;n++,e+=4)en[n]=t.getUint32(e),nn[n]=t.getUint32(e+=4);for(let t=16;t<80;t++){const e=0|en[t-15],n=0|nn[t-15],r=Ke(e,n,1)^Ke(e,n,8)^De(e,n,7),i=je(e,n,1)^je(e,n,8)^Pe(e,n,7),o=0|en[t-2],s=0|nn[t-2],a=Ke(o,s,19)^Fe(o,s,61)^De(o,s,6),c=je(o,s,19)^Me(o,s,61)^Pe(o,s,6),u=We(i,c,nn[t-7],nn[t-16]),l=Ye(u,r,a,en[t-7],en[t-16]);en[t]=0|l,nn[t]=0|u}let{Ah:n,Al:r,Bh:i,Bl:o,Ch:s,Cl:a,Dh:c,Dl:u,Eh:l,El:h,Fh:f,Fl:d,Gh:p,Gl:g,Hh:y,Hl:w}=this;for(let t=0;t<80;t++){const e=Ke(l,h,14)^Ke(l,h,18)^Fe(l,h,41),b=je(l,h,14)^je(l,h,18)^Me(l,h,41),m=l&f^~l&p,v=Qe(w,b,h&d^~h&g,tn[t],nn[t]),E=Je(v,y,e,m,Xe[t],en[t]),x=0|v,A=Ke(n,r,28)^Fe(n,r,34)^Fe(n,r,39),B=je(n,r,28)^Me(n,r,34)^Me(n,r,39),k=n&i^n&s^i&s,I=r&o^r&a^o&a;y=0|p,w=0|g,p=0|f,g=0|d,f=0|l,d=0|h,({h:l,l:h}=Ve(0|c,0|u,0|E,0|x)),c=0|s,u=0|a,s=0|i,a=0|o,i=0|n,o=0|r;const S=Ge(x,B,I);n=Ze(S,E,A,k),r=0|S}({h:n,l:r}=Ve(0|this.Ah,0|this.Al,0|n,0|r)),({h:i,l:o}=Ve(0|this.Bh,0|this.Bl,0|i,0|o)),({h:s,l:a}=Ve(0|this.Ch,0|this.Cl,0|s,0|a)),({h:c,l:u}=Ve(0|this.Dh,0|this.Dl,0|c,0|u)),({h:l,l:h}=Ve(0|this.Eh,0|this.El,0|l,0|h)),({h:f,l:d}=Ve(0|this.Fh,0|this.Fl,0|f,0|d)),({h:p,l:g}=Ve(0|this.Gh,0|this.Gl,0|p,0|g)),({h:y,l:w}=Ve(0|this.Hh,0|this.Hl,0|y,0|w)),this.set(n,r,i,o,s,a,c,u,l,h,f,d,p,g,y,w)}roundClean(){en.fill(0),nn.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const on=Ie((()=>new rn));function sn(t){if("string"!=typeof t)throw new TypeError("Invalid mnemonic type: "+typeof t);return t.normalize("NFKD")}function an(t){const e=sn(t),n=e.split(" ");if(![12,15,18,21,24].includes(n.length))throw new Error("Invalid mnemonic");return{nfkd:e,words:n}}function cn(t){me.bytes(t,16,20,24,28,32)}const un=t=>{const e=8-t.length/4;return new Uint8Array([Te(t)[0]>>e<<e])};function ln(t){if(!Array.isArray(t)||2048!==t.length||"string"!=typeof t[0])throw new Error("Worlist: expected array of 2048 strings");return t.forEach((t=>{if("string"!=typeof t)throw new Error(`Wordlist: non-string element: ${t}`)})),re.chain(re.checksum(1,un),re.radix2(11,!0),re.alphabet(t))}function hn(t,e=""){return function(t,e,n){const{c:r,dkLen:i,DK:o,PRF:s,PRFSalt:a}=function(t,e,n,r){ye(t);const i=function(t,e){if(void 0!==e&&"[object Object]"!==ke.call(e))throw new Error("Options should be object or undefined");return Object.assign({dkLen:32,asyncTick:10},e)}(0,r),{c:o,dkLen:s,asyncTick:a}=i;if(pe(o),pe(s),pe(a),o<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const c=Ae(e),u=Ae(n),l=new Uint8Array(s),h=Le.create(t,c),f=h._cloneInto().update(u);return{c:o,dkLen:s,asyncTick:a,DK:l,PRF:h,PRFSalt:f}}(t,e,n,{c:2048,dkLen:64});let c;const u=new Uint8Array(4),l=Ee(u),h=new Uint8Array(s.outputLen);for(let t=1,e=0;e<i;t++,e+=s.outputLen){const n=o.subarray(e,e+s.outputLen);l.setInt32(0,t,!1),(c=a._cloneInto(c)).update(u).digestInto(h),n.set(h.subarray(0,n.length));for(let t=1;t<r;t++){s._cloneInto(c).update(h).digestInto(h);for(let t=0;t<n.length;t++)n[t]^=h[t]}}return function(t,e,n,r,i){return t.destroy(),e.destroy(),r&&r.destroy(),i.fill(0),n}(s,a,o,c,h)}(on,an(t).nfkd,(t=>sn(`mnemonic${t}`))(e))}function fn(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function dn(t,...e){if(!((n=t)instanceof Uint8Array||null!=n&&"object"==typeof n&&"Uint8Array"===n.constructor.name))throw new Error("Expected Uint8Array");var n;if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function pn(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function gn(t){return t instanceof Uint8Array||null!=t&&"object"==typeof t&&"Uint8Array"===t.constructor.name}const yn=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),wn=(t,e)=>t<<32-e|t>>>e;if(68!==new Uint8Array(new Uint32Array([287454020]).buffer)[0])throw new Error("Non little-endian hardware is not supported");const bn=Array.from({length:256},((t,e)=>e.toString(16).padStart(2,"0")));function mn(t){return t>=48&&t<=57?t-48:t>=65&&t<=70?t-55:t>=97&&t<=102?t-87:void 0}function vn(t){if("string"!=typeof t)throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array((new TextEncoder).encode(t))}function En(t){if("string"==typeof t&&(t=vn(t)),!gn(t))throw new Error("expected Uint8Array, got "+typeof t);return t}function xn(...t){let e=0;for(let n=0;n<t.length;n++){const r=t[n];if(!gn(r))throw new Error("Uint8Array expected");e+=r.length}const n=new Uint8Array(e);for(let e=0,r=0;e<t.length;e++){const i=t[e];n.set(i,r),r+=i.length}return n}class An{clone(){return this._cloneInto()}}function Bn(t){const e=e=>t().update(En(e)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}class kn extends An{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,function(t){if("function"!=typeof t||"function"!=typeof t.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");fn(t.outputLen),fn(t.blockLen)}(t);const n=En(e);if(this.iHash=t.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,i=new Uint8Array(r);i.set(n.length>r?t.create().update(n).digest():n);for(let t=0;t<i.length;t++)i[t]^=54;this.iHash.update(i),this.oHash=t.create();for(let t=0;t<i.length;t++)i[t]^=106;this.oHash.update(i),i.fill(0)}update(t){return pn(this),this.iHash.update(t),this}digestInto(t){pn(this),dn(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:n,finished:r,destroyed:i,blockLen:o,outputLen:s}=this;return t.finished=r,t.destroyed=i,t.blockLen=o,t.outputLen=s,t.oHash=e._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const In=(t,e,n)=>new kn(t,e).update(n).digest();In.create=(t,e)=>new kn(t,e);class Sn extends An{constructor(t,e,n,r){super(),this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=yn(this.buffer)}update(t){pn(this);const{view:e,buffer:n,blockLen:r}=this,i=(t=En(t)).length;for(let o=0;o<i;){const s=Math.min(r-this.pos,i-o);if(s!==r)n.set(t.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===r&&(this.process(e,0),this.pos=0);else{const e=yn(t);for(;r<=i-o;o+=r)this.process(e,o)}}return this.length+=t.length,this.roundClean(),this}digestInto(t){pn(this),function(t,e){dn(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:r,isLE:i}=this;let{pos:o}=this;e[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>r-o&&(this.process(n,0),o=0);for(let t=o;t<r;t++)e[t]=0;!function(t,e,n,r){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,n,r);const i=BigInt(32),o=BigInt(4294967295),s=Number(n>>i&o),a=Number(n&o),c=r?4:0,u=r?0:4;t.setUint32(e+c,s,r),t.setUint32(e+u,a,r)}(n,r-8,BigInt(8*this.length),i),this.process(n,0);const s=yn(t),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=a/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let t=0;t<c;t++)s.setUint32(4*t,u[t],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:r,finished:i,destroyed:o,pos:s}=this;return t.length=r,t.pos=s,t.finished=i,t.destroyed=o,r%e&&t.buffer.set(n),t}}const Ln=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),Un=Uint8Array.from({length:16},((t,e)=>e));let Cn=[Un],On=[Un.map((t=>(9*t+5)%16))];for(let t=0;t<4;t++)for(let e of[Cn,On])e.push(e[t].map((t=>Ln[t])));const Hn=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map((t=>new Uint8Array(t))),Nn=Cn.map(((t,e)=>t.map((t=>Hn[e][t])))),Rn=On.map(((t,e)=>t.map((t=>Hn[e][t])))),Tn=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),_n=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),qn=(t,e)=>t<<e|t>>>32-e;function $n(t,e,n,r){return 0===t?e^n^r:1===t?e&n|~e&r:2===t?(e|~n)^r:3===t?e&r|n&~r:e^(n|~r)}const zn=new Uint32Array(16);class Dn extends Sn{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:t,h1:e,h2:n,h3:r,h4:i}=this;return[t,e,n,r,i]}set(t,e,n,r,i){this.h0=0|t,this.h1=0|e,this.h2=0|n,this.h3=0|r,this.h4=0|i}process(t,e){for(let n=0;n<16;n++,e+=4)zn[n]=t.getUint32(e,!0);let n=0|this.h0,r=n,i=0|this.h1,o=i,s=0|this.h2,a=s,c=0|this.h3,u=c,l=0|this.h4,h=l;for(let t=0;t<5;t++){const e=4-t,f=Tn[t],d=_n[t],p=Cn[t],g=On[t],y=Nn[t],w=Rn[t];for(let e=0;e<16;e++){const r=qn(n+$n(t,i,s,c)+zn[p[e]]+f,y[e])+l|0;n=l,l=c,c=0|qn(s,10),s=i,i=r}for(let t=0;t<16;t++){const n=qn(r+$n(e,o,a,u)+zn[g[t]]+d,w[t])+h|0;r=h,h=u,u=0|qn(a,10),a=o,o=n}}this.set(this.h1+s+u|0,this.h2+c+h|0,this.h3+l+r|0,this.h4+n+o|0,this.h0+i+a|0)}roundClean(){zn.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}const Pn=Bn((()=>new Dn)),Kn=(t,e,n)=>t&e^t&n^e&n,jn=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Fn=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Mn=new Uint32Array(64);class Vn extends Sn{constructor(){super(64,32,8,!1),this.A=0|Fn[0],this.B=0|Fn[1],this.C=0|Fn[2],this.D=0|Fn[3],this.E=0|Fn[4],this.F=0|Fn[5],this.G=0|Fn[6],this.H=0|Fn[7]}get(){const{A:t,B:e,C:n,D:r,E:i,F:o,G:s,H:a}=this;return[t,e,n,r,i,o,s,a]}set(t,e,n,r,i,o,s,a){this.A=0|t,this.B=0|e,this.C=0|n,this.D=0|r,this.E=0|i,this.F=0|o,this.G=0|s,this.H=0|a}process(t,e){for(let n=0;n<16;n++,e+=4)Mn[n]=t.getUint32(e,!1);for(let t=16;t<64;t++){const e=Mn[t-15],n=Mn[t-2],r=wn(e,7)^wn(e,18)^e>>>3,i=wn(n,17)^wn(n,19)^n>>>10;Mn[t]=i+Mn[t-7]+r+Mn[t-16]|0}let{A:n,B:r,C:i,D:o,E:s,F:a,G:c,H:u}=this;for(let t=0;t<64;t++){const e=u+(wn(s,6)^wn(s,11)^wn(s,25))+((l=s)&a^~l&c)+jn[t]+Mn[t]|0,h=(wn(n,2)^wn(n,13)^wn(n,22))+Kn(n,r,i)|0;u=c,c=a,a=s,s=o+e|0,o=i,i=r,r=n,n=e+h|0}var l;n=n+this.A|0,r=r+this.B|0,i=i+this.C|0,o=o+this.D|0,s=s+this.E|0,a=a+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(n,r,i,o,s,a,c,u)}roundClean(){Mn.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Gn=Bn((()=>new Vn)),Zn=BigInt(2**32-1),Wn=BigInt(32);function Yn(t,e=!1){return e?{h:Number(t&Zn),l:Number(t>>Wn&Zn)}:{h:0|Number(t>>Wn&Zn),l:0|Number(t&Zn)}}const Jn=function(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:o,l:s}=Yn(t[i],e);[n[i],r[i]]=[o,s]}return[n,r]},Qn=(t,e,n)=>t>>>n,Xn=(t,e,n)=>t<<32-n|e>>>n,tr=(t,e,n)=>t>>>n|e<<32-n,er=(t,e,n)=>t<<32-n|e>>>n,nr=(t,e,n)=>t<<64-n|e>>>n-32,rr=(t,e,n)=>t>>>n-32|e<<64-n,ir=function(t,e,n,r){const i=(e>>>0)+(r>>>0);return{h:t+n+(i/2**32|0)|0,l:0|i}},or=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),sr=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,ar=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),cr=(t,e,n,r,i)=>e+n+r+i+(t/2**32|0)|0,ur=(t,e,n,r,i,o)=>e+n+r+i+o+(t/2**32|0)|0,lr=(t,e,n,r,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(i>>>0),[hr,fr]=(()=>Jn(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((t=>BigInt(t)))))(),dr=new Uint32Array(80),pr=new Uint32Array(80);class gr extends Sn{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:e,Bh:n,Bl:r,Ch:i,Cl:o,Dh:s,Dl:a,Eh:c,El:u,Fh:l,Fl:h,Gh:f,Gl:d,Hh:p,Hl:g}=this;return[t,e,n,r,i,o,s,a,c,u,l,h,f,d,p,g]}set(t,e,n,r,i,o,s,a,c,u,l,h,f,d,p,g){this.Ah=0|t,this.Al=0|e,this.Bh=0|n,this.Bl=0|r,this.Ch=0|i,this.Cl=0|o,this.Dh=0|s,this.Dl=0|a,this.Eh=0|c,this.El=0|u,this.Fh=0|l,this.Fl=0|h,this.Gh=0|f,this.Gl=0|d,this.Hh=0|p,this.Hl=0|g}process(t,e){for(let n=0;n<16;n++,e+=4)dr[n]=t.getUint32(e),pr[n]=t.getUint32(e+=4);for(let t=16;t<80;t++){const e=0|dr[t-15],n=0|pr[t-15],r=tr(e,n,1)^tr(e,n,8)^Qn(e,n,7),i=er(e,n,1)^er(e,n,8)^Xn(e,n,7),o=0|dr[t-2],s=0|pr[t-2],a=tr(o,s,19)^nr(o,s,61)^Qn(o,s,6),c=er(o,s,19)^rr(o,s,61)^Xn(o,s,6),u=ar(i,c,pr[t-7],pr[t-16]),l=cr(u,r,a,dr[t-7],dr[t-16]);dr[t]=0|l,pr[t]=0|u}let{Ah:n,Al:r,Bh:i,Bl:o,Ch:s,Cl:a,Dh:c,Dl:u,Eh:l,El:h,Fh:f,Fl:d,Gh:p,Gl:g,Hh:y,Hl:w}=this;for(let t=0;t<80;t++){const e=tr(l,h,14)^tr(l,h,18)^nr(l,h,41),b=er(l,h,14)^er(l,h,18)^rr(l,h,41),m=l&f^~l&p,v=lr(w,b,h&d^~h&g,fr[t],pr[t]),E=ur(v,y,e,m,hr[t],dr[t]),x=0|v,A=tr(n,r,28)^nr(n,r,34)^nr(n,r,39),B=er(n,r,28)^rr(n,r,34)^rr(n,r,39),k=n&i^n&s^i&s,I=r&o^r&a^o&a;y=0|p,w=0|g,p=0|f,g=0|d,f=0|l,d=0|h,({h:l,l:h}=ir(0|c,0|u,0|E,0|x)),c=0|s,u=0|a,s=0|i,a=0|o,i=0|n,o=0|r;const S=or(x,B,I);n=sr(S,E,A,k),r=0|S}({h:n,l:r}=ir(0|this.Ah,0|this.Al,0|n,0|r)),({h:i,l:o}=ir(0|this.Bh,0|this.Bl,0|i,0|o)),({h:s,l:a}=ir(0|this.Ch,0|this.Cl,0|s,0|a)),({h:c,l:u}=ir(0|this.Dh,0|this.Dl,0|c,0|u)),({h:l,l:h}=ir(0|this.Eh,0|this.El,0|l,0|h)),({h:f,l:d}=ir(0|this.Fh,0|this.Fl,0|f,0|d)),({h:p,l:g}=ir(0|this.Gh,0|this.Gl,0|p,0|g)),({h:y,l:w}=ir(0|this.Hh,0|this.Hl,0|y,0|w)),this.set(n,r,i,o,s,a,c,u,l,h,f,d,p,g,y,w)}roundClean(){dr.fill(0),pr.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const yr=Bn((()=>new gr));function wr(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function br(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}const mr={number:wr,bool:function(t){if("boolean"!=typeof t)throw new Error(`Expected boolean, not ${t}`)},bytes:br,hash:function(t){if("function"!=typeof t||"function"!=typeof t.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");wr(t.outputLen),wr(t.blockLen)},exists:function(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")},output:function(t,e){br(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}},vr="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,Er=t=>t instanceof Uint8Array,xr=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Ar=(t,e)=>t<<32-e|t>>>e;if(68!==new Uint8Array(new Uint32Array([287454020]).buffer)[0])throw new Error("Non little-endian hardware is not supported");function Br(t){if("string"==typeof t&&(t=function(t){if("string"!=typeof t)throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array((new TextEncoder).encode(t))}(t)),!Er(t))throw new Error("expected Uint8Array, got "+typeof t);return t}Array.from({length:256},((t,e)=>e.toString(16).padStart(2,"0")));class kr{clone(){return this._cloneInto()}}function Ir(t){const e=e=>t().update(Br(e)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function Sr(t=32){if(vr&&"function"==typeof vr.getRandomValues)return vr.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}class Lr extends kr{constructor(t,e,n,r){super(),this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=xr(this.buffer)}update(t){mr.exists(this);const{view:e,buffer:n,blockLen:r}=this,i=(t=Br(t)).length;for(let o=0;o<i;){const s=Math.min(r-this.pos,i-o);if(s!==r)n.set(t.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===r&&(this.process(e,0),this.pos=0);else{const e=xr(t);for(;r<=i-o;o+=r)this.process(e,o)}}return this.length+=t.length,this.roundClean(),this}digestInto(t){mr.exists(this),mr.output(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:r,isLE:i}=this;let{pos:o}=this;e[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>r-o&&(this.process(n,0),o=0);for(let t=o;t<r;t++)e[t]=0;!function(t,e,n,r){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,n,r);const i=BigInt(32),o=BigInt(4294967295),s=Number(n>>i&o),a=Number(n&o),c=r?4:0,u=r?0:4;t.setUint32(e+c,s,r),t.setUint32(e+u,a,r)}(n,r-8,BigInt(8*this.length),i),this.process(n,0);const s=xr(t),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=a/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let t=0;t<c;t++)s.setUint32(4*t,u[t],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:r,finished:i,destroyed:o,pos:s}=this;return t.length=r,t.pos=s,t.finished=i,t.destroyed=o,r%e&&t.buffer.set(n),t}}const Ur=(t,e,n)=>t&e^t&n^e&n,Cr=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Or=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Hr=new Uint32Array(64);class Nr extends Lr{constructor(){super(64,32,8,!1),this.A=0|Or[0],this.B=0|Or[1],this.C=0|Or[2],this.D=0|Or[3],this.E=0|Or[4],this.F=0|Or[5],this.G=0|Or[6],this.H=0|Or[7]}get(){const{A:t,B:e,C:n,D:r,E:i,F:o,G:s,H:a}=this;return[t,e,n,r,i,o,s,a]}set(t,e,n,r,i,o,s,a){this.A=0|t,this.B=0|e,this.C=0|n,this.D=0|r,this.E=0|i,this.F=0|o,this.G=0|s,this.H=0|a}process(t,e){for(let n=0;n<16;n++,e+=4)Hr[n]=t.getUint32(e,!1);for(let t=16;t<64;t++){const e=Hr[t-15],n=Hr[t-2],r=Ar(e,7)^Ar(e,18)^e>>>3,i=Ar(n,17)^Ar(n,19)^n>>>10;Hr[t]=i+Hr[t-7]+r+Hr[t-16]|0}let{A:n,B:r,C:i,D:o,E:s,F:a,G:c,H:u}=this;for(let t=0;t<64;t++){const e=u+(Ar(s,6)^Ar(s,11)^Ar(s,25))+((l=s)&a^~l&c)+Cr[t]+Hr[t]|0,h=(Ar(n,2)^Ar(n,13)^Ar(n,22))+Ur(n,r,i)|0;u=c,c=a,a=s,s=o+e|0,o=i,i=r,r=n,n=e+h|0}var l;n=n+this.A|0,r=r+this.B|0,i=i+this.C|0,o=o+this.D|0,s=s+this.E|0,a=a+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(n,r,i,o,s,a,c,u)}roundClean(){Hr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class Rr extends Nr{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const Tr=Ir((()=>new Nr)),_r=(Ir((()=>new Rr)),BigInt(0),BigInt(1)),qr=BigInt(2),$r=t=>t instanceof Uint8Array,zr=Array.from({length:256},((t,e)=>e.toString(16).padStart(2,"0")));function Dr(t){if(!$r(t))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=zr[t[n]];return e}function Pr(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);return BigInt(""===t?"0":`0x${t}`)}function Kr(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(e/2);for(let e=0;e<n.length;e++){const r=2*e,i=t.slice(r,r+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");n[e]=o}return n}function jr(t){return Pr(Dr(t))}function Fr(t){if(!$r(t))throw new Error("Uint8Array expected");return Pr(Dr(Uint8Array.from(t).reverse()))}function Mr(t,e){return Kr(t.toString(16).padStart(2*e,"0"))}function Vr(t,e){return Mr(t,e).reverse()}function Gr(t,e,n){let r;if("string"==typeof e)try{r=Kr(e)}catch(n){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${n}`)}else{if(!$r(e))throw new Error(`${t} must be hex string or Uint8Array`);r=Uint8Array.from(e)}const i=r.length;if("number"==typeof n&&i!==n)throw new Error(`${t} expected ${n} bytes, got ${i}`);return r}function Zr(...t){const e=new Uint8Array(t.reduce(((t,e)=>t+e.length),0));let n=0;return t.forEach((t=>{if(!$r(t))throw new Error("Uint8Array expected");e.set(t,n),n+=t.length})),e}const Wr=t=>(qr<<BigInt(t-1))-_r,Yr=t=>new Uint8Array(t),Jr=t=>Uint8Array.from(t);function Qr(t,e,n){if("number"!=typeof t||t<2)throw new Error("hashLen must be a number");if("number"!=typeof e||e<2)throw new Error("qByteLen must be a number");if("function"!=typeof n)throw new Error("hmacFn must be a function");let r=Yr(t),i=Yr(t),o=0;const s=()=>{r.fill(1),i.fill(0),o=0},a=(...t)=>n(i,r,...t),c=(t=Yr())=>{i=a(Jr([0]),t),r=a(),0!==t.length&&(i=a(Jr([1]),t),r=a())},u=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let t=0;const n=[];for(;t<e;){r=a();const e=r.slice();n.push(e),t+=r.length}return Zr(...n)};return(t,e)=>{let n;for(s(),c(t);!(n=e(u()));)c();return s(),n}}const Xr={bigint:t=>"bigint"==typeof t,function:t=>"function"==typeof t,boolean:t=>"boolean"==typeof t,string:t=>"string"==typeof t,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>"function"==typeof t&&Number.isSafeInteger(t.outputLen)};function ti(t,e,n={}){const r=(e,n,r)=>{const i=Xr[n];if("function"!=typeof i)throw new Error(`Invalid validator "${n}", expected function`);const o=t[e];if(!(r&&void 0===o||i(o,t)))throw new Error(`Invalid param ${String(e)}=${o} (${typeof o}), expected ${n}`)};for(const[t,n]of Object.entries(e))r(t,n,!1);for(const[t,e]of Object.entries(n))r(t,e,!0);return t}const ei=BigInt(0),ni=BigInt(1),ri=BigInt(2),ii=BigInt(3),oi=BigInt(4),si=BigInt(5),ai=BigInt(8);function ci(t,e){const n=t%e;return n>=ei?n:e+n}function ui(t,e,n){if(n<=ei||e<ei)throw new Error("Expected power/modulo > 0");if(n===ni)return ei;let r=ni;for(;e>ei;)e&ni&&(r=r*t%n),t=t*t%n,e>>=ni;return r}function li(t,e,n){let r=t;for(;e-- >ei;)r*=r,r%=n;return r}function hi(t,e){if(t===ei||e<=ei)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=ci(t,e),r=e,i=ei,o=ni,s=ni,a=ei;for(;n!==ei;){const t=r/n,e=r%n,c=i-s*t,u=o-a*t;r=n,n=e,i=s,o=a,s=c,a=u}if(r!==ni)throw new Error("invert: does not exist");return ci(i,e)}BigInt(9),BigInt(16);const fi=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function di(t,e){const n=void 0!==e?e:t.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}const pi=BigInt(0),gi=BigInt(1);function yi(t){return ti(t.Fp,fi.reduce(((t,e)=>(t[e]="function",t)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),ti(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...di(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const{Ph:wi,aT:bi}=e,mi={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(t){const{Err:e}=mi;if(t.length<2||2!==t[0])throw new e("Invalid signature integer tag");const n=t[1],r=t.subarray(2,n+2);if(!n||r.length!==n)throw new e("Invalid signature integer: wrong length");if(128&r[0])throw new e("Invalid signature integer: negative");if(0===r[0]&&!(128&r[1]))throw new e("Invalid signature integer: unnecessary leading zero");return{d:wi(r),l:t.subarray(n+2)}},toSig(t){const{Err:e}=mi,n="string"==typeof t?bi(t):t;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||48!=n[0])throw new e("Invalid signature tag");if(n[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:i,l:o}=mi._parseInt(n.subarray(2)),{d:s,l:a}=mi._parseInt(o);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s}},hexFromSig(t){const e=t=>8&Number.parseInt(t[0],16)?"00"+t:t,n=t=>{const e=t.toString(16);return 1&e.length?`0${e}`:e},r=e(n(t.s)),i=e(n(t.r)),o=r.length/2,s=i.length/2,a=n(o),c=n(s);return`30${n(s+o+4)}02${c}${i}02${a}${r}`}},vi=BigInt(0),Ei=BigInt(1),xi=(BigInt(2),BigInt(3));function Ai(t){const e=function(t){const e=yi(t);return ti(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}(t),{Fp:n,n:r}=e,i=n.BYTES+1,o=2*n.BYTES+1;function s(t){return ci(t,r)}function a(t){return hi(t,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:u,weierstrassEquation:l,isWithinCurveOrder:h}=function(t){const e=function(t){const e=yi(t);ti(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=e;if(n){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof n||"bigint"!=typeof n.beta||"function"!=typeof n.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}(t),{Fp:n}=e,r=e.toBytes||((t,e,r)=>{const i=e.toAffine();return Zr(Uint8Array.from([4]),n.toBytes(i.x),n.toBytes(i.y))}),i=e.fromBytes||(t=>{const e=t.subarray(1);return{x:n.fromBytes(e.subarray(0,n.BYTES)),y:n.fromBytes(e.subarray(n.BYTES,2*n.BYTES))}});function o(t){const{a:r,b:i}=e,o=n.sqr(t),s=n.mul(o,t);return n.add(n.add(s,n.mul(t,r)),i)}if(!n.eql(n.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function s(t){return"bigint"==typeof t&&vi<t&&t<e.n}function a(t){if(!s(t))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(t){const{allowedPrivateKeyLengths:n,nByteLength:r,wrapPrivateKey:i,n:o}=e;if(n&&"bigint"!=typeof t){if(t instanceof Uint8Array&&(t=Dr(t)),"string"!=typeof t||!n.includes(t.length))throw new Error("Invalid key");t=t.padStart(2*r,"0")}let s;try{s="bigint"==typeof t?t:jr(Gr("private key",t,r))}catch(e){throw new Error(`private key must be ${r} bytes, hex or bigint, not ${typeof t}`)}return i&&(s=ci(s,o)),a(s),s}const u=new Map;function l(t){if(!(t instanceof h))throw new Error("ProjectivePoint expected")}class h{constructor(t,e,r){if(this.px=t,this.py=e,this.pz=r,null==t||!n.isValid(t))throw new Error("x required");if(null==e||!n.isValid(e))throw new Error("y required");if(null==r||!n.isValid(r))throw new Error("z required")}static fromAffine(t){const{x:e,y:r}=t||{};if(!t||!n.isValid(e)||!n.isValid(r))throw new Error("invalid affine point");if(t instanceof h)throw new Error("projective point not allowed");const i=t=>n.eql(t,n.ZERO);return i(e)&&i(r)?h.ZERO:new h(e,r,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(t){const e=n.invertBatch(t.map((t=>t.pz)));return t.map(((t,n)=>t.toAffine(e[n]))).map(h.fromAffine)}static fromHex(t){const e=h.fromAffine(i(Gr("pointHex",t)));return e.assertValidity(),e}static fromPrivateKey(t){return h.BASE.multiply(c(t))}_setWindowSize(t){this._WINDOW_SIZE=t,u.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint)return;throw new Error("bad point: ZERO")}const{x:t,y:r}=this.toAffine();if(!n.isValid(t)||!n.isValid(r))throw new Error("bad point: x or y not FE");const i=n.sqr(r),s=o(t);if(!n.eql(i,s))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:t}=this.toAffine();if(n.isOdd)return!n.isOdd(t);throw new Error("Field doesn't support isOdd")}equals(t){l(t);const{px:e,py:r,pz:i}=this,{px:o,py:s,pz:a}=t,c=n.eql(n.mul(e,a),n.mul(o,i)),u=n.eql(n.mul(r,a),n.mul(s,i));return c&&u}negate(){return new h(this.px,n.neg(this.py),this.pz)}double(){const{a:t,b:r}=e,i=n.mul(r,xi),{px:o,py:s,pz:a}=this;let c=n.ZERO,u=n.ZERO,l=n.ZERO,f=n.mul(o,o),d=n.mul(s,s),p=n.mul(a,a),g=n.mul(o,s);return g=n.add(g,g),l=n.mul(o,a),l=n.add(l,l),c=n.mul(t,l),u=n.mul(i,p),u=n.add(c,u),c=n.sub(d,u),u=n.add(d,u),u=n.mul(c,u),c=n.mul(g,c),l=n.mul(i,l),p=n.mul(t,p),g=n.sub(f,p),g=n.mul(t,g),g=n.add(g,l),l=n.add(f,f),f=n.add(l,f),f=n.add(f,p),f=n.mul(f,g),u=n.add(u,f),p=n.mul(s,a),p=n.add(p,p),f=n.mul(p,g),c=n.sub(c,f),l=n.mul(p,d),l=n.add(l,l),l=n.add(l,l),new h(c,u,l)}add(t){l(t);const{px:r,py:i,pz:o}=this,{px:s,py:a,pz:c}=t;let u=n.ZERO,f=n.ZERO,d=n.ZERO;const p=e.a,g=n.mul(e.b,xi);let y=n.mul(r,s),w=n.mul(i,a),b=n.mul(o,c),m=n.add(r,i),v=n.add(s,a);m=n.mul(m,v),v=n.add(y,w),m=n.sub(m,v),v=n.add(r,o);let E=n.add(s,c);return v=n.mul(v,E),E=n.add(y,b),v=n.sub(v,E),E=n.add(i,o),u=n.add(a,c),E=n.mul(E,u),u=n.add(w,b),E=n.sub(E,u),d=n.mul(p,v),u=n.mul(g,b),d=n.add(u,d),u=n.sub(w,d),d=n.add(w,d),f=n.mul(u,d),w=n.add(y,y),w=n.add(w,y),b=n.mul(p,b),v=n.mul(g,v),w=n.add(w,b),b=n.sub(y,b),b=n.mul(p,b),v=n.add(v,b),y=n.mul(w,v),f=n.add(f,y),y=n.mul(E,v),u=n.mul(m,u),u=n.sub(u,y),y=n.mul(m,w),d=n.mul(E,d),d=n.add(d,y),new h(u,f,d)}subtract(t){return this.add(t.negate())}is0(){return this.equals(h.ZERO)}wNAF(t){return d.wNAFCached(this,u,t,(t=>{const e=n.invertBatch(t.map((t=>t.pz)));return t.map(((t,n)=>t.toAffine(e[n]))).map(h.fromAffine)}))}multiplyUnsafe(t){const r=h.ZERO;if(t===vi)return r;if(a(t),t===Ei)return this;const{endo:i}=e;if(!i)return d.unsafeLadder(this,t);let{k1neg:o,k1:s,k2neg:c,k2:u}=i.splitScalar(t),l=r,f=r,p=this;for(;s>vi||u>vi;)s&Ei&&(l=l.add(p)),u&Ei&&(f=f.add(p)),p=p.double(),s>>=Ei,u>>=Ei;return o&&(l=l.negate()),c&&(f=f.negate()),f=new h(n.mul(f.px,i.beta),f.py,f.pz),l.add(f)}multiply(t){a(t);let r,i,o=t;const{endo:s}=e;if(s){const{k1neg:t,k1:e,k2neg:a,k2:c}=s.splitScalar(o);let{p:u,f:l}=this.wNAF(e),{p:f,f:p}=this.wNAF(c);u=d.constTimeNegate(t,u),f=d.constTimeNegate(a,f),f=new h(n.mul(f.px,s.beta),f.py,f.pz),r=u.add(f),i=l.add(p)}else{const{p:t,f:e}=this.wNAF(o);r=t,i=e}return h.normalizeZ([r,i])[0]}multiplyAndAddUnsafe(t,e,n){const r=h.BASE,i=(t,e)=>e!==vi&&e!==Ei&&t.equals(r)?t.multiply(e):t.multiplyUnsafe(e),o=i(this,e).add(i(t,n));return o.is0()?void 0:o}toAffine(t){const{px:e,py:r,pz:i}=this,o=this.is0();null==t&&(t=o?n.ONE:n.inv(i));const s=n.mul(e,t),a=n.mul(r,t),c=n.mul(i,t);if(o)return{x:n.ZERO,y:n.ZERO};if(!n.eql(c,n.ONE))throw new Error("invZ was invalid");return{x:s,y:a}}isTorsionFree(){const{h:t,isTorsionFree:n}=e;if(t===Ei)return!0;if(n)return n(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:t,clearCofactor:n}=e;return t===Ei?this:n?n(h,this):this.multiplyUnsafe(e.h)}toRawBytes(t=!0){return this.assertValidity(),r(h,this,t)}toHex(t=!0){return Dr(this.toRawBytes(t))}}h.BASE=new h(e.Gx,e.Gy,n.ONE),h.ZERO=new h(n.ZERO,n.ONE,n.ZERO);const f=e.nBitLength,d=function(t,e){const n=(t,e)=>{const n=e.negate();return t?n:e},r=t=>({windows:Math.ceil(e/t)+1,windowSize:2**(t-1)});return{constTimeNegate:n,unsafeLadder(e,n){let r=t.ZERO,i=e;for(;n>pi;)n&gi&&(r=r.add(i)),i=i.double(),n>>=gi;return r},precomputeWindow(t,e){const{windows:n,windowSize:i}=r(e),o=[];let s=t,a=s;for(let t=0;t<n;t++){a=s,o.push(a);for(let t=1;t<i;t++)a=a.add(s),o.push(a);s=a.double()}return o},wNAF(e,i,o){const{windows:s,windowSize:a}=r(e);let c=t.ZERO,u=t.BASE;const l=BigInt(2**e-1),h=2**e,f=BigInt(e);for(let t=0;t<s;t++){const e=t*a;let r=Number(o&l);o>>=f,r>a&&(r-=h,o+=gi);const s=e,d=e+Math.abs(r)-1,p=t%2!=0,g=r<0;0===r?u=u.add(n(p,i[s])):c=c.add(n(g,i[d]))}return{p:c,f:u}},wNAFCached(t,e,n,r){const i=t._WINDOW_SIZE||1;let o=e.get(t);return o||(o=this.precomputeWindow(t,i),1!==i&&e.set(t,r(o))),this.wNAF(i,o,n)}}}(h,e.endo?Math.ceil(f/2):f);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:s}}({...e,toBytes(t,e,r){const i=e.toAffine(),o=n.toBytes(i.x),s=Zr;return r?s(Uint8Array.from([e.hasEvenY()?2:3]),o):s(Uint8Array.from([4]),o,n.toBytes(i.y))},fromBytes(t){const e=t.length,r=t[0],s=t.subarray(1);if(e!==i||2!==r&&3!==r){if(e===o&&4===r)return{x:n.fromBytes(s.subarray(0,n.BYTES)),y:n.fromBytes(s.subarray(n.BYTES,2*n.BYTES))};throw new Error(`Point of length ${e} was invalid. Expected ${i} compressed bytes or ${o} uncompressed bytes`)}{const t=jr(s);if(!(vi<(a=t)&&a<n.ORDER))throw new Error("Point is not on curve");const e=l(t);let i=n.sqrt(e);return!(1&~r)!=((i&Ei)===Ei)&&(i=n.neg(i)),{x:t,y:i}}var a}}),f=t=>Dr(Mr(t,e.nByteLength));function d(t){return t>r>>Ei}const p=(t,e,n)=>jr(t.slice(e,n));class g{constructor(t,e,n){this.r=t,this.s=e,this.recovery=n,this.assertValidity()}static fromCompact(t){const n=e.nByteLength;return t=Gr("compactSignature",t,2*n),new g(p(t,0,n),p(t,n,2*n))}static fromDER(t){const{r:e,s:n}=mi.toSig(Gr("DER",t));return new g(e,n)}assertValidity(){if(!h(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(t){return new g(this.r,this.s,t)}recoverPublicKey(t){const{r,s:i,recovery:o}=this,u=m(Gr("msgHash",t));if(null==o||![0,1,2,3].includes(o))throw new Error("recovery id invalid");const l=2===o||3===o?r+e.n:r;if(l>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const h=1&o?"03":"02",d=c.fromHex(h+f(l)),p=a(l),g=s(-u*p),y=s(i*p),w=c.BASE.multiplyAndAddUnsafe(d,g,y);if(!w)throw new Error("point at infinify");return w.assertValidity(),w}hasHighS(){return d(this.s)}normalizeS(){return this.hasHighS()?new g(this.r,s(-this.s),this.recovery):this}toDERRawBytes(){return Kr(this.toDERHex())}toDERHex(){return mi.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Kr(this.toCompactHex())}toCompactHex(){return f(this.r)+f(this.s)}}const y={isValidPrivateKey(t){try{return u(t),!0}catch(t){return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>Mr(function(t,e,n=!1){const r=(t=Gr("privateHash",t)).length,i=di(e).nByteLength+8;if(i<24||r<i||r>1024)throw new Error(`hashToPrivateScalar: expected ${i}-1024 bytes of input, got ${r}`);return ci(n?Fr(t):jr(t),e-ni)+ni}(e.randomBytes(n.BYTES+8),r),e.nByteLength),precompute:(t=8,e=c.BASE)=>(e._setWindowSize(t),e.multiply(BigInt(3)),e)};function w(t){const e=t instanceof Uint8Array,n="string"==typeof t,r=(e||n)&&t.length;return e?r===i||r===o:n?r===2*i||r===2*o:t instanceof c}const b=e.bits2int||function(t){const n=jr(t),r=8*t.length-e.nBitLength;return r>0?n>>BigInt(r):n},m=e.bits2int_modN||function(t){return s(b(t))},v=Wr(e.nBitLength);function E(t){if("bigint"!=typeof t)throw new Error("bigint expected");if(!(vi<=t&&t<v))throw new Error(`bigint expected < 2^${e.nBitLength}`);return Mr(t,e.nByteLength)}const x={lowS:e.lowS,prehash:!1},A={lowS:e.lowS,prehash:!1};return c.BASE._setWindowSize(8),{CURVE:e,getPublicKey:function(t,e=!0){return c.fromPrivateKey(t).toRawBytes(e)},getSharedSecret:function(t,e,n=!0){if(w(t))throw new Error("first arg must be private key");if(!w(e))throw new Error("second arg must be public key");return c.fromHex(e).multiply(u(t)).toRawBytes(n)},sign:function(t,r,i=x){const{seed:o,k2sig:l}=function(t,r,i=x){if(["recovered","canonical"].some((t=>t in i)))throw new Error("sign() legacy options not supported");const{hash:o,randomBytes:l}=e;let{lowS:f,prehash:p,extraEntropy:y}=i;null==f&&(f=!0),t=Gr("msgHash",t),p&&(t=Gr("prehashed msgHash",o(t)));const w=m(t),v=u(r),A=[E(v),E(w)];if(null!=y){const t=!0===y?l(n.BYTES):y;A.push(Gr("extraEntropy",t,n.BYTES))}const B=Zr(...A),k=w;return{seed:B,k2sig:function(t){const e=b(t);if(!h(e))return;const n=a(e),r=c.BASE.multiply(e).toAffine(),i=s(r.x);if(i===vi)return;const o=s(n*s(k+i*v));if(o===vi)return;let u=(r.x===i?0:2)|Number(r.y&Ei),l=o;return f&&d(o)&&(l=function(t){return d(t)?s(-t):t}(o),u^=1),new g(i,l,u)}}}(t,r,i),f=e;return Qr(f.hash.outputLen,f.nByteLength,f.hmac)(o,l)},verify:function(t,n,r,i=A){const o=t;if(n=Gr("msgHash",n),r=Gr("publicKey",r),"strict"in i)throw new Error("options.strict was renamed to lowS");const{lowS:u,prehash:l}=i;let h,f;try{if("string"==typeof o||o instanceof Uint8Array)try{h=g.fromDER(o)}catch(t){if(!(t instanceof mi.Err))throw t;h=g.fromCompact(o)}else{if("object"!=typeof o||"bigint"!=typeof o.r||"bigint"!=typeof o.s)throw new Error("PARSE");{const{r:t,s:e}=o;h=new g(t,e)}}f=c.fromHex(r)}catch(t){if("PARSE"===t.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(u&&h.hasHighS())return!1;l&&(n=e.hash(n));const{r:d,s:p}=h,y=m(n),w=a(p),b=s(y*w),v=s(d*w),E=c.BASE.multiplyAndAddUnsafe(f,b,v)?.toAffine();return!!E&&s(E.x)===d},ProjectivePoint:c,Signature:g,utils:y}}BigInt(4);class Bi extends kr{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,mr.hash(t);const n=Br(e);if(this.iHash=t.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,i=new Uint8Array(r);i.set(n.length>r?t.create().update(n).digest():n);for(let t=0;t<i.length;t++)i[t]^=54;this.iHash.update(i),this.oHash=t.create();for(let t=0;t<i.length;t++)i[t]^=106;this.oHash.update(i),i.fill(0)}update(t){return mr.exists(this),this.iHash.update(t),this}digestInto(t){mr.exists(this),mr.bytes(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:n,finished:r,destroyed:i,blockLen:o,outputLen:s}=this;return t.finished=r,t.destroyed=i,t.blockLen=o,t.outputLen=s,t.oHash=e._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const ki=(t,e,n)=>new Bi(t,e).update(n).digest();function Ii(t){return{hash:t,hmac:(e,...n)=>ki(t,e,function(...t){const e=new Uint8Array(t.reduce(((t,e)=>t+e.length),0));let n=0;return t.forEach((t=>{if(!Er(t))throw new Error("Uint8Array expected");e.set(t,n),n+=t.length})),e}(...n)),randomBytes:Sr}}ki.create=(t,e)=>new Bi(t,e);const Si=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Li=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Ui=BigInt(1),Ci=BigInt(2),Oi=(t,e)=>(t+e/Ci)/e;const Hi=function(t,e,n=!1,r={}){if(t<=ei)throw new Error(`Expected Fp ORDER > 0, got ${t}`);const{nBitLength:i,nByteLength:o}=di(t,e);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");const s=function(t){if(t%oi===ii){const e=(t+ni)/oi;return function(t,n){const r=t.pow(n,e);if(!t.eql(t.sqr(r),n))throw new Error("Cannot find square root");return r}}if(t%ai===si){const e=(t-si)/ai;return function(t,n){const r=t.mul(n,ri),i=t.pow(r,e),o=t.mul(n,i),s=t.mul(t.mul(o,ri),i),a=t.mul(o,t.sub(s,t.ONE));if(!t.eql(t.sqr(a),n))throw new Error("Cannot find square root");return a}}return function(t){const e=(t-ni)/ri;let n,r,i;for(n=t-ni,r=0;n%ri===ei;n/=ri,r++);for(i=ri;i<t&&ui(i,e,t)!==t-ni;i++);if(1===r){const e=(t+ni)/oi;return function(t,n){const r=t.pow(n,e);if(!t.eql(t.sqr(r),n))throw new Error("Cannot find square root");return r}}const o=(n+ni)/ri;return function(t,s){if(t.pow(s,e)===t.neg(t.ONE))throw new Error("Cannot find square root");let a=r,c=t.pow(t.mul(t.ONE,i),n),u=t.pow(s,o),l=t.pow(s,n);for(;!t.eql(l,t.ONE);){if(t.eql(l,t.ZERO))return t.ZERO;let e=1;for(let n=t.sqr(l);e<a&&!t.eql(n,t.ONE);e++)n=t.sqr(n);const n=t.pow(c,ni<<BigInt(a-e-1));c=t.sqr(n),u=t.mul(u,n),l=t.mul(l,c),a=e}return u}}(t)}(t),a=Object.freeze({ORDER:t,BITS:i,BYTES:o,MASK:Wr(i),ZERO:ei,ONE:ni,create:e=>ci(e,t),isValid:e=>{if("bigint"!=typeof e)throw new Error("Invalid field element: expected bigint, got "+typeof e);return ei<=e&&e<t},is0:t=>t===ei,isOdd:t=>(t&ni)===ni,neg:e=>ci(-e,t),eql:(t,e)=>t===e,sqr:e=>ci(e*e,t),add:(e,n)=>ci(e+n,t),sub:(e,n)=>ci(e-n,t),mul:(e,n)=>ci(e*n,t),pow:(t,e)=>function(t,e,n){if(n<ei)throw new Error("Expected power > 0");if(n===ei)return t.ONE;if(n===ni)return e;let r=t.ONE,i=e;for(;n>ei;)n&ni&&(r=t.mul(r,i)),i=t.sqr(i),n>>=ni;return r}(a,t,e),div:(e,n)=>ci(e*hi(n,t),t),sqrN:t=>t*t,addN:(t,e)=>t+e,subN:(t,e)=>t-e,mulN:(t,e)=>t*e,inv:e=>hi(e,t),sqrt:r.sqrt||(t=>s(a,t)),invertBatch:t=>function(t,e){const n=new Array(e.length),r=e.reduce(((e,r,i)=>t.is0(r)?e:(n[i]=e,t.mul(e,r))),t.ONE),i=t.inv(r);return e.reduceRight(((e,r,i)=>t.is0(r)?e:(n[i]=t.mul(e,n[i]),t.mul(e,r))),i),n}(a,t),cmov:(t,e,n)=>n?e:t,toBytes:t=>n?Vr(t,o):Mr(t,o),fromBytes:t=>{if(t.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${t.length}`);return n?Fr(t):jr(t)}});return Object.freeze(a)}(Si,void 0,void 0,{sqrt:function(t){const e=Si,n=BigInt(3),r=BigInt(6),i=BigInt(11),o=BigInt(22),s=BigInt(23),a=BigInt(44),c=BigInt(88),u=t*t*t%e,l=u*u*t%e,h=li(l,n,e)*l%e,f=li(h,n,e)*l%e,d=li(f,Ci,e)*u%e,p=li(d,i,e)*d%e,g=li(p,o,e)*p%e,y=li(g,a,e)*g%e,w=li(y,c,e)*y%e,b=li(w,a,e)*g%e,m=li(b,n,e)*l%e,v=li(m,s,e)*p%e,E=li(v,r,e)*u%e,x=li(E,Ci,e);if(!Hi.eql(Hi.sqr(x),t))throw new Error("Cannot find square root");return x}}),Ni=function(t,e){const n=e=>Ai({...t,...Ii(e)});return Object.freeze({...n(e),create:n})}({a:BigInt(0),b:BigInt(7),Fp:Hi,n:Li,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=Li,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Ui*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=n,s=BigInt("0x100000000000000000000000000000000"),a=Oi(o*t,e),c=Oi(-r*t,e);let u=ci(t-a*n-c*i,e),l=ci(-a*r-c*o,e);const h=u>s,f=l>s;if(h&&(u=e-u),f&&(l=e-l),u>s||l>s)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:h,k1:u,k2neg:f,k2:l}}}},Tr);BigInt(0),Ni.ProjectivePoint;const Ri=Ni.ProjectivePoint,Ti=(_i=Gn,Ft(ne(4,(t=>_i(_i(t)))),se));var _i;function qi(t){return BigInt(`0x${function(t){if(!gn(t))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=bn[t[n]];return e}(t)}`)}const $i=vn("Bitcoin seed"),zi={private:76066276,public:76067358},Di=2147483648,Pi=t=>{if(!Number.isSafeInteger(t)||t<0||t>2**32-1)throw new Error(`Invalid number=${t}. Should be from 0 to 2 ** 32 - 1`);const e=new Uint8Array(4);return yn(e).setUint32(0,t,!1),e};class Ki{get fingerprint(){if(!this.pubHash)throw new Error("No publicKey set!");return t=this.pubHash,yn(t).getUint32(0,!1);var t}get identifier(){return this.pubHash}get pubKeyHash(){return this.pubHash}get privateKey(){return this.privKeyBytes||null}get publicKey(){return this.pubKey||null}get privateExtendedKey(){const t=this.privateKey;if(!t)throw new Error("No private key");return Ti.encode(this.serialize(this.versions.private,xn(new Uint8Array([0]),t)))}get publicExtendedKey(){if(!this.pubKey)throw new Error("No public key");return Ti.encode(this.serialize(this.versions.public,this.pubKey))}static fromMasterSeed(t,e=zi){if(dn(t),8*t.length<128||8*t.length>512)throw new Error(`HDKey: wrong seed length=${t.length}. Should be between 128 and 512 bits; 256 bits is advised)`);const n=In(yr,$i,t);return new Ki({versions:e,chainCode:n.slice(32),privateKey:n.slice(0,32)})}static fromExtendedKey(t,e=zi){const n=Ti.decode(t),r=yn(n),i=r.getUint32(0,!1),o={versions:e,depth:n[4],parentFingerprint:r.getUint32(5,!1),index:r.getUint32(9,!1),chainCode:n.slice(13,45)},s=n.slice(45),a=0===s[0];if(i!==e[a?"private":"public"])throw new Error("Version mismatch");return new Ki(a?{...o,privateKey:s.slice(1)}:{...o,publicKey:s})}static fromJSON(t){return Ki.fromExtendedKey(t.xpriv)}constructor(t){if(this.depth=0,this.index=0,this.chainCode=null,this.parentFingerprint=0,!t||"object"!=typeof t)throw new Error("HDKey.constructor must not be called directly");if(this.versions=t.versions||zi,this.depth=t.depth||0,this.chainCode=t.chainCode,this.index=t.index||0,this.parentFingerprint=t.parentFingerprint||0,!this.depth&&(this.parentFingerprint||this.index))throw new Error("HDKey: zero depth with non-zero index/parent fingerprint");if(t.publicKey&&t.privateKey)throw new Error("HDKey: publicKey and privateKey at same time.");if(t.privateKey){if(!Ni.utils.isValidPrivateKey(t.privateKey))throw new Error("Invalid private key");this.privKey="bigint"==typeof t.privateKey?t.privateKey:qi(t.privateKey),this.privKeyBytes=function(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let e=0,i=0;e<n;e++,i+=2){const n=mn(t.charCodeAt(i)),o=mn(t.charCodeAt(i+1));if(void 0===n||void 0===o){const e=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+e+'" at index '+i)}r[e]=16*n+o}return r}(this.privKey.toString(16).padStart(64,"0")),this.pubKey=Ni.getPublicKey(t.privateKey,!0)}else{if(!t.publicKey)throw new Error("HDKey: no public or private key provided");this.pubKey=Ri.fromHex(t.publicKey).toRawBytes(!0)}var e;this.pubHash=(e=this.pubKey,Pn(Gn(e)))}derive(t){if(!/^[mM]'?/.test(t))throw new Error('Path must start with "m" or "M"');if(/^[mM]'?$/.test(t))return this;const e=t.replace(/^[mM]'?\//,"").split("/");let n=this;for(const t of e){const e=/^(\d+)('?)$/.exec(t);if(!e||3!==e.length)throw new Error(`Invalid child index: ${t}`);let r=+e[1];if(!Number.isSafeInteger(r)||r>=Di)throw new Error("Invalid index");"'"===e[2]&&(r+=Di),n=n.deriveChild(r)}return n}deriveChild(t){if(!this.pubKey||!this.chainCode)throw new Error("No publicKey or chainCode set");let e=Pi(t);if(t>=Di){const t=this.privateKey;if(!t)throw new Error("Could not derive hardened child key");e=xn(new Uint8Array([0]),t,e)}else e=xn(this.pubKey,e);const n=In(yr,this.chainCode,e),r=qi(n.slice(0,32)),i=n.slice(32);if(!Ni.utils.isValidPrivateKey(r))throw new Error("Tweak bigger than curve order");const o={versions:this.versions,chainCode:i,depth:this.depth+1,parentFingerprint:this.fingerprint,index:t};try{if(this.privateKey){const t=ci(this.privKey+r,Ni.CURVE.n);if(!Ni.utils.isValidPrivateKey(t))throw new Error("The tweak was out of range or the resulted private key is invalid");o.privateKey=t}else{const t=Ri.fromHex(this.pubKey).add(Ri.fromPrivateKey(r));if(t.equals(Ri.ZERO))throw new Error("The tweak was equal to negative P, which made the result key invalid");o.publicKey=t.toRawBytes(!0)}return new Ki(o)}catch(e){return this.deriveChild(t+1)}}sign(t){if(!this.privateKey)throw new Error("No privateKey set!");return dn(t,32),Ni.sign(t,this.privKey).toCompactRawBytes()}verify(t,e){if(dn(t,32),dn(e,64),!this.publicKey)throw new Error("No publicKey set!");let n;try{n=Ni.Signature.fromCompact(e)}catch(t){return!1}return Ni.verify(n,t,this.publicKey)}wipePrivateData(){return this.privKey=void 0,this.privKeyBytes&&(this.privKeyBytes.fill(0),this.privKeyBytes=void 0),this}toJSON(){return{xpriv:this.privateExtendedKey,xpub:this.publicExtendedKey}}serialize(t,e){if(!this.chainCode)throw new Error("No chainCode set");return dn(e,33),xn(Pi(t),new Uint8Array([this.depth]),Pi(this.parentFingerprint),Pi(this.index),this.chainCode,e)}}const ji=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4));if(68!==new Uint8Array(new Uint32Array([287454020]).buffer)[0])throw new Error("Non little-endian hardware is not supported");function Fi(t){if("string"!=typeof t)throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array((new TextEncoder).encode(t))}function Mi(t){if("string"==typeof t&&(t=Fi(t)),!(t instanceof Uint8Array))throw new Error("expected Uint8Array, got "+typeof t);return t}function Vi(t,e){if(!(t instanceof Uint8Array))throw new Error("Uint8Array expected");if("number"==typeof e&&t.length!==e)throw new Error(`Uint8Array length ${e} expected`)}function Gi(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function Zi(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}const Wi={number:Gi,bool:function(t){if("boolean"!=typeof t)throw new Error(`Expected boolean, not ${t}`)},bytes:Zi,hash:function(t){if("function"!=typeof t||"function"!=typeof t.create)throw new Error("hash must be wrapped by utils.wrapConstructor");Gi(t.outputLen),Gi(t.blockLen)},exists:function(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")},output:function(t,e){Zi(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}},Yi=(t,e)=>255&t[e++]|(255&t[e++])<<8;class Ji{constructor(t){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,Vi(t=Mi(t),32);const e=Yi(t,0),n=Yi(t,2),r=Yi(t,4),i=Yi(t,6),o=Yi(t,8),s=Yi(t,10),a=Yi(t,12),c=Yi(t,14);this.r[0]=8191&e,this.r[1]=8191&(e>>>13|n<<3),this.r[2]=7939&(n>>>10|r<<6),this.r[3]=8191&(r>>>7|i<<9),this.r[4]=255&(i>>>4|o<<12),this.r[5]=o>>>1&8190,this.r[6]=8191&(o>>>14|s<<2),this.r[7]=8065&(s>>>11|a<<5),this.r[8]=8191&(a>>>8|c<<8),this.r[9]=c>>>5&127;for(let e=0;e<8;e++)this.pad[e]=Yi(t,16+2*e)}process(t,e,n=!1){const r=n?0:2048,{h:i,r:o}=this,s=o[0],a=o[1],c=o[2],u=o[3],l=o[4],h=o[5],f=o[6],d=o[7],p=o[8],g=o[9],y=Yi(t,e+0),w=Yi(t,e+2),b=Yi(t,e+4),m=Yi(t,e+6),v=Yi(t,e+8),E=Yi(t,e+10),x=Yi(t,e+12),A=Yi(t,e+14);let B=i[0]+(8191&y),k=i[1]+(8191&(y>>>13|w<<3)),I=i[2]+(8191&(w>>>10|b<<6)),S=i[3]+(8191&(b>>>7|m<<9)),L=i[4]+(8191&(m>>>4|v<<12)),U=i[5]+(v>>>1&8191),C=i[6]+(8191&(v>>>14|E<<2)),O=i[7]+(8191&(E>>>11|x<<5)),H=i[8]+(8191&(x>>>8|A<<8)),N=i[9]+(A>>>5|r),R=0,T=R+B*s+k*(5*g)+I*(5*p)+S*(5*d)+L*(5*f);R=T>>>13,T&=8191,T+=U*(5*h)+C*(5*l)+O*(5*u)+H*(5*c)+N*(5*a),R+=T>>>13,T&=8191;let _=R+B*a+k*s+I*(5*g)+S*(5*p)+L*(5*d);R=_>>>13,_&=8191,_+=U*(5*f)+C*(5*h)+O*(5*l)+H*(5*u)+N*(5*c),R+=_>>>13,_&=8191;let q=R+B*c+k*a+I*s+S*(5*g)+L*(5*p);R=q>>>13,q&=8191,q+=U*(5*d)+C*(5*f)+O*(5*h)+H*(5*l)+N*(5*u),R+=q>>>13,q&=8191;let $=R+B*u+k*c+I*a+S*s+L*(5*g);R=$>>>13,$&=8191,$+=U*(5*p)+C*(5*d)+O*(5*f)+H*(5*h)+N*(5*l),R+=$>>>13,$&=8191;let z=R+B*l+k*u+I*c+S*a+L*s;R=z>>>13,z&=8191,z+=U*(5*g)+C*(5*p)+O*(5*d)+H*(5*f)+N*(5*h),R+=z>>>13,z&=8191;let D=R+B*h+k*l+I*u+S*c+L*a;R=D>>>13,D&=8191,D+=U*s+C*(5*g)+O*(5*p)+H*(5*d)+N*(5*f),R+=D>>>13,D&=8191;let P=R+B*f+k*h+I*l+S*u+L*c;R=P>>>13,P&=8191,P+=U*a+C*s+O*(5*g)+H*(5*p)+N*(5*d),R+=P>>>13,P&=8191;let K=R+B*d+k*f+I*h+S*l+L*u;R=K>>>13,K&=8191,K+=U*c+C*a+O*s+H*(5*g)+N*(5*p),R+=K>>>13,K&=8191;let j=R+B*p+k*d+I*f+S*h+L*l;R=j>>>13,j&=8191,j+=U*u+C*c+O*a+H*s+N*(5*g),R+=j>>>13,j&=8191;let F=R+B*g+k*p+I*d+S*f+L*h;R=F>>>13,F&=8191,F+=U*l+C*u+O*c+H*a+N*s,R+=F>>>13,F&=8191,R=(R<<2)+R|0,R=R+T|0,T=8191&R,R>>>=13,_+=R,i[0]=T,i[1]=_,i[2]=q,i[3]=$,i[4]=z,i[5]=D,i[6]=P,i[7]=K,i[8]=j,i[9]=F}finalize(){const{h:t,pad:e}=this,n=new Uint16Array(10);let r=t[1]>>>13;t[1]&=8191;for(let e=2;e<10;e++)t[e]+=r,r=t[e]>>>13,t[e]&=8191;t[0]+=5*r,r=t[0]>>>13,t[0]&=8191,t[1]+=r,r=t[1]>>>13,t[1]&=8191,t[2]+=r,n[0]=t[0]+5,r=n[0]>>>13,n[0]&=8191;for(let e=1;e<10;e++)n[e]=t[e]+r,r=n[e]>>>13,n[e]&=8191;n[9]-=8192;let i=(1^r)-1;for(let t=0;t<10;t++)n[t]&=i;i=~i;for(let e=0;e<10;e++)t[e]=t[e]&i|n[e];t[0]=65535&(t[0]|t[1]<<13),t[1]=65535&(t[1]>>>3|t[2]<<10),t[2]=65535&(t[2]>>>6|t[3]<<7),t[3]=65535&(t[3]>>>9|t[4]<<4),t[4]=65535&(t[4]>>>12|t[5]<<1|t[6]<<14),t[5]=65535&(t[6]>>>2|t[7]<<11),t[6]=65535&(t[7]>>>5|t[8]<<8),t[7]=65535&(t[8]>>>8|t[9]<<5);let o=t[0]+e[0];t[0]=65535&o;for(let n=1;n<8;n++)o=(t[n]+e[n]|0)+(o>>>16)|0,t[n]=65535&o}update(t){Wi.exists(this);const{buffer:e,blockLen:n}=this,r=(t=Mi(t)).length;for(let i=0;i<r;){const o=Math.min(n-this.pos,r-i);if(o!==n)e.set(t.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===n&&(this.process(e,0,!1),this.pos=0);else for(;n<=r-i;i+=n)this.process(t,i)}return this}destroy(){this.h.fill(0),this.r.fill(0),this.buffer.fill(0),this.pad.fill(0)}digestInto(t){Wi.exists(this),Wi.output(t,this),this.finished=!0;const{buffer:e,h:n}=this;let{pos:r}=this;if(r){for(e[r++]=1;r<16;r++)e[r]=0;this.process(e,0,!0)}this.finalize();let i=0;for(let e=0;e<8;e++)t[i++]=n[e]>>>0,t[i++]=n[e]>>>8;return t}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}}!function(t){const e=(e,n)=>t(n).update(Mi(e)).digest(),n=t(new Uint8Array(32));e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=e=>t(e)}((t=>new Ji(t)));const Qi=Fi("expand 16-byte k"),Xi=Fi("expand 32-byte k"),to=ji(Qi),eo=ji(Xi),no=t=>!(t.byteOffset%4),ro=(t,e)=>t<<e|t>>>32-e;const io=(t=>{const{core:e,rounds:n,counterRight:r,counterLen:i,allow128bitKeys:o,extendNonceFn:s,blockLen:a}=function(t,e){if(void 0!==e&&("object"!=typeof e||(n=e,"[object Object]"!==Object.prototype.toString.call(n)||n.constructor!==Object)))throw new Error("options must be object or undefined");var n;return Object.assign(t,e)}({rounds:20,counterRight:!1,counterLen:8,allow128bitKeys:!0,blockLen:64},t);Wi.number(i),Wi.number(n),Wi.number(a),Wi.bool(r),Wi.bool(o);const c=a/4;if(a%4!=0)throw new Error("Salsa/ChaCha: blockLen must be aligned to 4 bytes");return(t,u,l,h,f=0)=>{if(Wi.bytes(t),Wi.bytes(u),Wi.bytes(l),h||(h=new Uint8Array(l.length)),Wi.bytes(h),Wi.number(f),f<0||f>=2**32-1)throw new Error("Salsa/ChaCha: counter overflow");if(h.length<l.length)throw new Error(`Salsa/ChaCha: output (${h.length}) is shorter than data (${l.length})`);const d=[];let p,g;if(32===t.length)p=t,g=eo;else{if(16!==t.length||!o)throw new Error(`Salsa/ChaCha: invalid 32-byte key, got length=${t.length}`);p=new Uint8Array(32),p.set(t),p.set(t,16),g=to,d.push(p)}if(s){if(u.length<=16)throw new Error("Salsa/ChaCha: extended nonce must be bigger than 16 bytes");p=s(g,p,u.subarray(0,16),new Uint8Array(32)),d.push(p),u=u.subarray(16)}const y=16-i;if(u.length!==y)throw new Error(`Salsa/ChaCha: nonce must be ${y} or 16 bytes`);if(12!==y){const t=new Uint8Array(12);t.set(u,r?0:12-u.length),d.push(u=t)}const w=new Uint8Array(a),b=ji(w),m=ji(p),v=ji(u),E=no(l)&&ji(l),x=no(h)&&ji(h);d.push(b);const A=l.length;for(let t=0,r=f;t<A;r++){if(e(g,m,v,b,r,n),r>=2**32-1)throw new Error("Salsa/ChaCha: counter overflow");const i=Math.min(a,A-t);if(i===a&&x&&E){const e=t/4;if(t%4!=0)throw new Error("Salsa/ChaCha: invalid block position");for(let t=0;t<c;t++)x[e+t]=E[e+t]^b[t];t+=a}else{for(let e=0;e<i;e++)h[t+e]=l[t+e]^w[e];t+=i}}for(let t=0;t<d.length;t++)d[t].fill(0);return h}})({core:function(t,e,n,r,i,o=20){let s=t[0],a=t[1],c=t[2],u=t[3],l=e[0],h=e[1],f=e[2],d=e[3],p=e[4],g=e[5],y=e[6],w=e[7],b=i,m=n[0],v=n[1],E=n[2],x=s,A=a,B=c,k=u,I=l,S=h,L=f,U=d,C=p,O=g,H=y,N=w,R=b,T=m,_=v,q=E;for(let t=0;t<o;t+=2)x=x+I|0,R=ro(R^x,16),C=C+R|0,I=ro(I^C,12),x=x+I|0,R=ro(R^x,8),C=C+R|0,I=ro(I^C,7),A=A+S|0,T=ro(T^A,16),O=O+T|0,S=ro(S^O,12),A=A+S|0,T=ro(T^A,8),O=O+T|0,S=ro(S^O,7),B=B+L|0,_=ro(_^B,16),H=H+_|0,L=ro(L^H,12),B=B+L|0,_=ro(_^B,8),H=H+_|0,L=ro(L^H,7),k=k+U|0,q=ro(q^k,16),N=N+q|0,U=ro(U^N,12),k=k+U|0,q=ro(q^k,8),N=N+q|0,U=ro(U^N,7),x=x+S|0,q=ro(q^x,16),H=H+q|0,S=ro(S^H,12),x=x+S|0,q=ro(q^x,8),H=H+q|0,S=ro(S^H,7),A=A+L|0,R=ro(R^A,16),N=N+R|0,L=ro(L^N,12),A=A+L|0,R=ro(R^A,8),N=N+R|0,L=ro(L^N,7),B=B+U|0,T=ro(T^B,16),C=C+T|0,U=ro(U^C,12),B=B+U|0,T=ro(T^B,8),C=C+T|0,U=ro(U^C,7),k=k+I|0,_=ro(_^k,16),O=O+_|0,I=ro(I^O,12),k=k+I|0,_=ro(_^k,8),O=O+_|0,I=ro(I^O,7);let $=0;r[$++]=s+x|0,r[$++]=a+A|0,r[$++]=c+B|0,r[$++]=u+k|0,r[$++]=l+I|0,r[$++]=h+S|0,r[$++]=f+L|0,r[$++]=d+U|0,r[$++]=p+C|0,r[$++]=g+O|0,r[$++]=y+H|0,r[$++]=w+N|0,r[$++]=b+R|0,r[$++]=m+T|0,r[$++]=v+_|0,r[$++]=E+q|0},counterRight:!1,counterLen:4,allow128bitKeys:!1}),oo=new Uint8Array([0]),so=new Uint8Array;var ao=Object.defineProperty,co=(t,e)=>{for(var n in e)ao(t,n,{get:e[n],enumerable:!0})};function uo(t){return d(Kt.getPublicKey(t))}co({},{MessageNode:()=>yo,MessageQueue:()=>wo,insertEventIntoAscendingList:()=>go,insertEventIntoDescendingList:()=>po,normalizeURL:()=>fo,utf8Decoder:()=>lo,utf8Encoder:()=>ho});var lo=new TextDecoder("utf-8"),ho=new TextEncoder;function fo(t){let e=new URL(t);return e.pathname=e.pathname.replace(/\/+/g,"/"),e.pathname.endsWith("/")&&(e.pathname=e.pathname.slice(0,-1)),("80"===e.port&&"ws:"===e.protocol||"443"===e.port&&"wss:"===e.protocol)&&(e.port=""),e.searchParams.sort(),e.hash="",e.toString()}function po(t,e){let n,r=0,i=t.length-1,o=r;if(i<0)o=0;else if(e.created_at<t[i].created_at)o=i+1;else if(e.created_at>=t[r].created_at)o=r;else for(;;){if(i<=r+1){o=i;break}if(n=Math.floor(r+(i-r)/2),t[n].created_at>e.created_at)r=n;else{if(!(t[n].created_at<e.created_at)){o=n;break}i=n}}return t[o]?.id!==e.id?[...t.slice(0,o),e,...t.slice(o)]:t}function go(t,e){let n,r=0,i=t.length-1,o=r;if(i<0)o=0;else if(e.created_at>t[i].created_at)o=i+1;else if(e.created_at<=t[r].created_at)o=r;else for(;;){if(i<=r+1){o=i;break}if(n=Math.floor(r+(i-r)/2),t[n].created_at<e.created_at)r=n;else{if(!(t[n].created_at>e.created_at)){o=n;break}i=n}}return t[o]?.id!==e.id?[...t.slice(0,o),e,...t.slice(o)]:t}var yo=class{_value;_next;get value(){return this._value}set value(t){this._value=t}get next(){return this._next}set next(t){this._next=t}constructor(t){this._value=t,this._next=null}},wo=class{_first;_last;get first(){return this._first}set first(t){this._first=t}get last(){return this._last}set last(t){this._last=t}_size;get size(){return this._size}set size(t){this._size=t}constructor(){this._first=null,this._last=null,this._size=0}enqueue(t){const e=new yo(t);return 0!==this._size&&this._last?(this._last.next=e,this._last=e):(this._first=e,this._last=e),this._size++,!0}dequeue(){if(0===this._size||!this._first)return null;let t=this._first;return this._first=t.next,t.next=null,this._size--,t.value}},bo=Symbol("verified");function mo(t,e){const n=t;return n.pubkey=uo(e),n.id=vo(n),n.sig=function(t,e){return d(Kt.sign(vo(t),e))}(n,e),n[bo]=!0,n}function vo(t){return d(S(ho.encode(function(t){if(!xo(t))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,t.pubkey,t.created_at,t.kind,t.tags,t.content])}(t))))}var Eo=t=>t instanceof Object;function xo(t){if(!Eo(t))return!1;if("number"!=typeof t.kind)return!1;if("string"!=typeof t.content)return!1;if("number"!=typeof t.created_at)return!1;if("string"!=typeof t.pubkey)return!1;if(!t.pubkey.match(/^[a-f0-9]{64}$/))return!1;if(!Array.isArray(t.tags))return!1;for(let e=0;e<t.tags.length;e++){let n=t.tags[e];if(!Array.isArray(n))return!1;for(let t=0;t<n.length;t++)if("object"==typeof n[t])return!1}return!0}function Ao(t){if("boolean"==typeof t[bo])return t[bo];const e=vo(t);if(e!==t.id)return t[bo]=!1;try{return t[bo]=Kt.verify(t.sig,e,t.pubkey)}catch(e){return t[bo]=!1}}function Bo(t,e){if(t.ids&&-1===t.ids.indexOf(e.id)&&!t.ids.some((t=>e.id.startsWith(t))))return!1;if(t.kinds&&-1===t.kinds.indexOf(e.kind))return!1;if(t.authors&&-1===t.authors.indexOf(e.pubkey)&&!t.authors.some((t=>e.pubkey.startsWith(t))))return!1;for(let n in t)if("#"===n[0]){let r=t[`#${n.slice(1)}`];if(r&&!e.tags.find((([t,e])=>t===n.slice(1)&&-1!==r.indexOf(e))))return!1}return!(t.since&&e.created_at<t.since||t.until&&e.created_at>t.until)}function ko(t,e){for(let n=0;n<t.length;n++)if(Bo(t[n],e))return!0;return!1}function Io(...t){let e={};for(let n=0;n<t.length;n++){let r=t[n];Object.entries(r).forEach((([t,n])=>{if("kinds"===t||"ids"===t||"authors"===t||"#"===t[0]){e[t]=e[t]||[];for(let r=0;r<n.length;r++){let i=n[r];e[t].includes(i)||e[t].push(i)}}})),r.limit&&(!e.limit||r.limit>e.limit)&&(e.limit=r.limit),r.until&&(!e.until||r.until>e.until)&&(e.until=r.until),r.since&&(!e.since||r.since<e.since)&&(e.since=r.since)}return e}function So(t,e){let n=e.length+3,r=t.indexOf(`"${e}":`)+n,i=t.slice(r).indexOf('"')+r+1;return t.slice(i,i+64)}function Lo(t,e){let n=e.length,r=t.indexOf(`"${e}":`)+n+3,i=t.slice(r),o=Math.min(i.indexOf(","),i.indexOf("}"));return parseInt(i.slice(0,o),10)}function Uo(t){let e=t.slice(0,22).indexOf('"EVENT"');if(-1===e)return null;let n=t.slice(e+7+1).indexOf('"');if(-1===n)return null;let r=e+7+1+n,i=t.slice(r+1,80).indexOf('"');if(-1===i)return null;let o=r+1+i;return t.slice(r+1,o)}function Co(t,e){return e===So(t,"id")}function Oo(t,e){return e===So(t,"pubkey")}function Ho(t,e){return e===Lo(t,"kind")}async function*No(t){let e;const n=[],r=t=>{e?(e(t),e=void 0):n.push(t)};t.on("event",r);try{for(;;)if(n.length>0)yield n.shift();else{const t=await new Promise((t=>{e=t}));yield t}}finally{t.off("event",r)}}co({},{getHex64:()=>So,getInt:()=>Lo,getSubscriptionId:()=>Uo,matchEventId:()=>Co,matchEventKind:()=>Ho,matchEventPubkey:()=>Oo});var Ro=class{_conn;_seenOn={};batchedByKey={};eoseSubTimeout;getTimeout;seenOnEnabled=!0;batchInterval=100;constructor(t={}){this._conn={},this.eoseSubTimeout=t.eoseSubTimeout||3400,this.getTimeout=t.getTimeout||3400,this.seenOnEnabled=!1!==t.seenOnEnabled,this.batchInterval=t.batchInterval||100}close(t){t.forEach((t=>{let e=this._conn[fo(t)];e&&e.close()}))}async ensureRelay(t){const e=fo(t);this._conn[e]||(this._conn[e]=function(t,e={}){let{listTimeout:n=3e3,getTimeout:r=3e3,countTimeout:i=3e3}=e;var o,s,a={},c={connect:[],disconnect:[],error:[],notice:[],auth:[]},u={},l={};function h(){return 1===o?.readyState}async function f(t){let e=JSON.stringify(t);if(h()||(await new Promise((t=>setTimeout(t,1e3))),h()))try{o.send(e)}catch(t){console.log(t)}}const d=(t,{verb:e="REQ",skipVerification:n=!1,alreadyHaveEvent:r=null,id:i=Math.random().toString().slice(2)}={})=>{let o=i;a[o]={id:o,filters:t,skipVerification:n,alreadyHaveEvent:r},f([e,o,...t]);let s={sub:(e,i={})=>d(e||t,{skipVerification:i.skipVerification||n,alreadyHaveEvent:i.alreadyHaveEvent||r,id:o}),unsub:()=>{delete a[o],delete u[o],f(["CLOSE",o])},on:(t,e)=>{u[o]=u[o]||{event:[],count:[],eose:[]},u[o][t].push(e)},off:(t,e)=>{let n=u[o],r=n[t].indexOf(e);r>=0&&n[t].splice(r,1)},get events(){return No(s)}};return s};function p(t,e){return new Promise(((n,r)=>{if(!t.id)return void r(new Error(`event ${t} has no id`));let i=t.id;f([e,t]),l[i]={resolve:n,reject:r}}))}return{url:t,sub:d,on:(t,e)=>{c[t].push(e),"connect"===t&&1===o?.readyState&&e()},off:(t,e)=>{let n=c[t].indexOf(e);-1!==n&&c[t].splice(n,1)},list:(t,e)=>new Promise((r=>{let i=d(t,e),o=[],s=setTimeout((()=>{i.unsub(),r(o)}),n);i.on("eose",(()=>{i.unsub(),clearTimeout(s),r(o)})),i.on("event",(t=>{o.push(t)}))})),get:(t,e)=>new Promise((n=>{let i=d([t],e),o=setTimeout((()=>{i.unsub(),n(null)}),r);i.on("event",(t=>{i.unsub(),clearTimeout(o),n(t)}))})),count:t=>new Promise((e=>{let n=d(t,{...d,verb:"COUNT"}),r=setTimeout((()=>{n.unsub(),e(null)}),i);n.on("count",(t=>{n.unsub(),clearTimeout(r),e(t)}))})),async publish(t){await p(t,"EVENT")},async auth(t){await p(t,"AUTH")},connect:async function(){h()||await async function(){return s||(s=new Promise(((e,n)=>{try{o=new WebSocket(t)}catch(t){n(t)}o.onopen=()=>{c.connect.forEach((t=>t())),e()},o.onerror=()=>{s=void 0,c.error.forEach((t=>t())),n()},o.onclose=async()=>{s=void 0,c.disconnect.forEach((t=>t()))};let r,i=new wo;function h(){if(0===i.size)return clearInterval(r),void(r=null);var e=i.dequeue();if(!e)return;let n=Uo(e);if(n){let r=a[n];if(r&&r.alreadyHaveEvent&&r.alreadyHaveEvent(So(e,"id"),t))return}try{let t=JSON.parse(e);switch(t[0]){case"EVENT":{let e=t[1],n=t[2];return void(xo(n)&&a[e]&&(a[e].skipVerification||Ao(n))&&ko(a[e].filters,n)&&(a[e],(u[e]?.event||[]).forEach((t=>t(n)))))}case"COUNT":let e=t[1],n=t[2];return void(a[e]&&(u[e]?.count||[]).forEach((t=>t(n))));case"EOSE":{let e=t[1];return void(e in u&&(u[e].eose.forEach((t=>t())),u[e].eose=[]))}case"OK":{let e=t[1],n=t[2],r=t[3]||"";if(e in l){let{resolve:t,reject:i}=l[e];n?t(null):i(new Error(r))}return}case"NOTICE":let r=t[1];return void c.notice.forEach((t=>t(r)));case"AUTH":{let e=t[1];return void c.auth?.forEach((t=>t(e)))}}}catch(t){return}}o.onmessage=t=>{i.enqueue(t.data),r||(r=setInterval(h,0))}})),s)}()},close(){c={connect:[],disconnect:[],error:[],notice:[],auth:[]},u={},l={},o?.readyState===WebSocket.OPEN&&o.close()},get status(){return o?.readyState??3}}}(e,{getTimeout:.9*this.getTimeout,listTimeout:.9*this.getTimeout}));const n=this._conn[e];return await n.connect(),n}sub(t,e,n){let r=new Set,i={...n||{}};i.alreadyHaveEvent=(t,e)=>{if(n?.alreadyHaveEvent?.(t,e))return!0;if(this.seenOnEnabled){let n=this._seenOn[t]||new Set;n.add(e),this._seenOn[t]=n}return r.has(t)};let o=[],s=new Set,a=new Set,c=t.length,u=!1,l=setTimeout((()=>{u=!0;for(let t of a.values())t()}),n?.eoseSubTimeout||this.eoseSubTimeout);t.filter(((t,e,n)=>n.indexOf(t)===e)).forEach((async t=>{let n;try{n=await this.ensureRelay(t)}catch(t){return void f()}if(!n)return;let h=n.sub(e,i);function f(){if(c--,0===c){clearTimeout(l);for(let t of a.values())t()}}h.on("event",(t=>{r.add(t.id);for(let e of s.values())e(t)})),h.on("eose",(()=>{u||f()})),o.push(h)}));let h={sub:(t,e)=>(o.forEach((n=>n.sub(t,e))),h),unsub(){o.forEach((t=>t.unsub()))},on(t,e){"event"===t?s.add(e):"eose"===t&&a.add(e)},off(t,e){"event"===t?s.delete(e):"eose"===t&&a.delete(e)},get events(){return No(h)}};return h}get(t,e,n){return new Promise((r=>{let i=this.sub(t,[e],n),o=setTimeout((()=>{i.unsub(),r(null)}),this.getTimeout);i.on("event",(t=>{r(t),clearTimeout(o),i.unsub()}))}))}list(t,e,n){return new Promise((r=>{let i=[],o=this.sub(t,e,n);o.on("event",(t=>{i.push(t)})),o.on("eose",(()=>{o.unsub(),r(i)}))}))}batchedList(t,e,n){return new Promise((r=>{this.batchedByKey[t]?this.batchedByKey[t].push({filters:n,relays:e,resolve:r,events:[]}):(this.batchedByKey[t]=[{filters:n,relays:e,resolve:r,events:[]}],setTimeout((()=>{Object.keys(this.batchedByKey).forEach((async t=>{const e=this.batchedByKey[t],n=[],r=[];e.forEach((t=>{n.push(...t.filters),r.push(...t.relays)}));const i=this.sub(r,[Io(...n)]);i.on("event",(t=>{e.forEach((e=>ko(e.filters,t)&&e.events.push(t)))})),i.on("eose",(()=>{i.unsub(),e.forEach((t=>t.resolve(t.events)))})),delete this.batchedByKey[t]}))}),this.batchInterval))}))}publish(t,e){return t.map((async t=>(await this.ensureRelay(t)).publish(e)))}seenOn(t){return Array.from(this._seenOn[t]?.values?.()||[])}},To={};co(To,{BECH32_REGEX:()=>qo,decode:()=>$o,naddrEncode:()=>Go,neventEncode:()=>Vo,noteEncode:()=>Ko,nprofileEncode:()=>Mo,npubEncode:()=>Po,nrelayEncode:()=>Zo,nsecEncode:()=>Do});var _o=5e3,qo=/[\x21-\x7E]{1,83}1[023456789acdefghjklmnpqrstuvwxyz]{6,}/;function $o(t){let{prefix:e,words:n}=fe.decode(t,_o),r=new Uint8Array(fe.fromWords(n));switch(e){case"nprofile":{let t=zo(r);if(!t[0]?.[0])throw new Error("missing TLV 0 for nprofile");if(32!==t[0][0].length)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:d(t[0][0]),relays:t[1]?t[1].map((t=>lo.decode(t))):[]}}}case"nevent":{let t=zo(r);if(!t[0]?.[0])throw new Error("missing TLV 0 for nevent");if(32!==t[0][0].length)throw new Error("TLV 0 should be 32 bytes");if(t[2]&&32!==t[2][0].length)throw new Error("TLV 2 should be 32 bytes");if(t[3]&&4!==t[3][0].length)throw new Error("TLV 3 should be 4 bytes");return{type:"nevent",data:{id:d(t[0][0]),relays:t[1]?t[1].map((t=>lo.decode(t))):[],author:t[2]?.[0]?d(t[2][0]):void 0,kind:t[3]?.[0]?parseInt(d(t[3][0]),16):void 0}}}case"naddr":{let t=zo(r);if(!t[0]?.[0])throw new Error("missing TLV 0 for naddr");if(!t[2]?.[0])throw new Error("missing TLV 2 for naddr");if(32!==t[2][0].length)throw new Error("TLV 2 should be 32 bytes");if(!t[3]?.[0])throw new Error("missing TLV 3 for naddr");if(4!==t[3][0].length)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:lo.decode(t[0][0]),pubkey:d(t[2][0]),kind:parseInt(d(t[3][0]),16),relays:t[1]?t[1].map((t=>lo.decode(t))):[]}}}case"nrelay":{let t=zo(r);if(!t[0]?.[0])throw new Error("missing TLV 0 for nrelay");return{type:"nrelay",data:lo.decode(t[0][0])}}case"nsec":case"npub":case"note":return{type:e,data:d(r)};default:throw new Error(`unknown prefix ${e}`)}}function zo(t){let e={},n=t;for(;n.length>0;){let t=n[0],r=n[1];if(!r)throw new Error(`malformed TLV ${t}`);let i=n.slice(2,2+r);if(n=n.slice(2+r),i.length<r)throw new Error(`not enough data to read on TLV ${t}`);e[t]=e[t]||[],e[t].push(i)}return e}function Do(t){return Fo("nsec",t)}function Po(t){return Fo("npub",t)}function Ko(t){return Fo("note",t)}function jo(t,e){let n=fe.toWords(e);return fe.encode(t,n,_o)}function Fo(t,e){return jo(t,p(e))}function Mo(t){return jo("nprofile",Wo({0:[p(t.pubkey)],1:(t.relays||[]).map((t=>ho.encode(t)))}))}function Vo(t){let e;return null!=t.kind&&(e=function(t){const e=new Uint8Array(4);return e[0]=t>>24&255,e[1]=t>>16&255,e[2]=t>>8&255,e[3]=255&t,e}(t.kind)),jo("nevent",Wo({0:[p(t.id)],1:(t.relays||[]).map((t=>ho.encode(t))),2:t.author?[p(t.author)]:[],3:e?[new Uint8Array(e)]:[]}))}function Go(t){let e=new ArrayBuffer(4);return new DataView(e).setUint32(0,t.kind,!1),jo("naddr",Wo({0:[ho.encode(t.identifier)],1:(t.relays||[]).map((t=>ho.encode(t))),2:[p(t.pubkey)],3:[new Uint8Array(e)]}))}function Zo(t){return jo("nrelay",Wo({0:[ho.encode(t)]}))}function Wo(t){let e=[];return Object.entries(t).forEach((([t,n])=>{n.forEach((n=>{let r=new Uint8Array(n.length+2);r.set([parseInt(t)],0),r.set([n.length],1),r.set(n,2),e.push(r)}))})),y(...e)}async function Yo(t,e,n){const r=Qo(It.getSharedSecret(t,"02"+e));let i=Uint8Array.from(m(16)),o=ho.encode(n),s=await crypto.subtle.importKey("raw",r,{name:"AES-CBC"},!1,["encrypt"]),a=await crypto.subtle.encrypt({name:"AES-CBC",iv:i},s,o);return`${ie.encode(new Uint8Array(a))}?iv=${ie.encode(new Uint8Array(i.buffer))}`}async function Jo(t,e,n){let[r,i]=n.split("?iv="),o=Qo(It.getSharedSecret(t,"02"+e)),s=await crypto.subtle.importKey("raw",o,{name:"AES-CBC"},!1,["decrypt"]),a=ie.decode(r),c=ie.decode(i),u=await crypto.subtle.decrypt({name:"AES-CBC",iv:c},s,a);return lo.decode(u)}function Qo(t){return t.slice(1,33)}co({},{decrypt:()=>Jo,encrypt:()=>Yo}),"undefined"!=typeof crypto&&!crypto.subtle&&crypto.webcrypto&&(crypto.subtle=crypto.webcrypto.subtle),co({},{NIP05_REGEX:()=>ts,queryProfile:()=>rs,searchDomain:()=>ns,useFetchImplementation:()=>es});var Xo,ts=/^(?:([\w.+-]+)@)?([\w.-]+)$/;try{Xo=fetch}catch{}function es(t){Xo=t}async function ns(t,e=""){try{return(await(await Xo(`https://${t}/.well-known/nostr.json?name=${e}`)).json()).names}catch(t){return{}}}async function rs(t){const e=t.match(ts);if(!e)return null;const[n,r="_",i]=e;try{const t=await Xo(`https://${i}/.well-known/nostr.json?name=${r}`),{names:e,relays:n}=function(t){const e={names:{}};for(const[n,r]of Object.entries(t.names))"string"==typeof n&&"string"==typeof r&&(e.names[n]=r);if(t.relays){e.relays={};for(const[n,r]of Object.entries(t.relays))"string"==typeof n&&Array.isArray(r)&&(e.relays[n]=r.filter((t=>"string"==typeof t)))}return e}(await t.json()),o=e[r];return o?{pubkey:o,relays:n?.[o]}:null}catch(t){return null}}function is(t,e){let n=Ki.fromMasterSeed(hn(t,e)).derive("m/44'/1237'/0'/0/0").privateKey;if(!n)throw new Error("could not derive private key");return d(n)}function os(){return function(t,e=128){if(me.number(e),e%32!=0||e>256)throw new TypeError("Invalid entropy");return function(t,e){return cn(t),ln(e).encode(t).join((t=>"あいこくしん"===t[0])(e)?"　":" ")}(function(t=32){if(ve&&"function"==typeof ve.getRandomValues)return ve.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}(e/8),t)}(de)}function ss(t){return function(t,e){try{!function(t,e){const{words:n}=an(t);cn(ln(e).decode(n))}(t,e)}catch(t){return!1}return!0}(t,de)}function as(t){const e={reply:void 0,root:void 0,mentions:[],profiles:[]},n=[];for(const r of t.tags)"e"===r[0]&&r[1]&&n.push(r),"p"===r[0]&&r[1]&&e.profiles.push({pubkey:r[1],relays:r[2]?[r[2]]:[]});for(let t=0;t<n.length;t++){const r=n[t],[i,o,s,a]=r,c={id:o,relays:s?[s]:[]},u=0===t,l=t===n.length-1;"root"!==a?"reply"!==a?"mention"!==a?u?e.root=c:l?e.reply=c:e.mentions.push(c):e.mentions.push(c):e.reply=c:e.root=c}return e}function cs(t){let e=0;for(let n=0;n<t.length;n++){const r=parseInt(t[n],16);if(0!==r){e+=Math.clz32(r)-28;break}e+=4}return e}function us(t,e){let n=0;const r=t,i=["nonce",n.toString(),e.toString()];for(r.tags.push(i);;){const t=Math.floor((new Date).getTime()/1e3);if(t!==r.created_at&&(n=0,r.created_at=t),i[1]=(++n).toString(),r.id=vo(r),cs(r.id)>=e)break}return r}function ls(t,e,n,r){return mo({kind:6,tags:[...t.tags??[],["e",e.id,n],["p",e.pubkey]],content:""===t.content?"":JSON.stringify(e),created_at:t.created_at},r)}function hs(t){if(6!==t.kind)return;let e,n;for(let r=t.tags.length-1;r>=0&&(void 0===e||void 0===n);r--){const i=t.tags[r];i.length>=2&&("e"===i[0]&&void 0===e?e=i:"p"===i[0]&&void 0===n&&(n=i))}return void 0!==e?{id:e[1],relays:[e[2],n?.[2]].filter((t=>"string"==typeof t)),author:n?.[1]}:void 0}function fs(t,{skipVerification:e}={}){const n=hs(t);if(void 0===n||""===t.content)return;let r;try{r=JSON.parse(t.content)}catch(t){return}return r.id===n.id&&(e||Ao(r))?r:void 0}co({},{generateSeedWords:()=>os,privateKeyFromSeedWords:()=>is,validateWords:()=>ss}),co({},{parse:()=>as}),co({},{getPow:()=>cs,minePow:()=>us}),co({},{finishRepostEvent:()=>ls,getRepostedEvent:()=>fs,getRepostedEventPointer:()=>hs}),co({},{NOSTR_URI_REGEX:()=>ds,parse:()=>gs,test:()=>ps});var ds=new RegExp(`nostr:(${qo.source})`);function ps(t){return"string"==typeof t&&new RegExp(`^${ds.source}$`).test(t)}function gs(t){const e=t.match(new RegExp(`^${ds.source}$`));if(!e)throw new Error(`Invalid Nostr URI: ${t}`);return{uri:e[0],value:e[1],decoded:$o(e[1])}}function ys(t,e,n){const r=e.tags.filter((t=>t.length>=2&&("e"===t[0]||"p"===t[0])));return mo({...t,kind:7,tags:[...t.tags??[],...r,["e",e.id],["p",e.pubkey]],content:t.content??"+"},n)}function ws(t){if(7!==t.kind)return;let e,n;for(let r=t.tags.length-1;r>=0&&(void 0===e||void 0===n);r--){const i=t.tags[r];i.length>=2&&("e"===i[0]&&void 0===e?e=i:"p"===i[0]&&void 0===n&&(n=i))}return void 0!==e&&void 0!==n?{id:e[1],relays:[e[2],n[2]].filter((t=>void 0!==t)),author:n[1]}:void 0}function bs(t,e){let n=[];(e.kind||-1)>=0&&n.push(`kind=${e.kind}`),e.until&&n.push(`created_at<${e.until}`),e.since&&n.push(`created_at>${e.since}`);let r=n.join("&");if(""===r)throw new Error("refusing to create a delegation without any conditions");let i=S(ho.encode(`nostr:delegation:${e.pubkey}:${r}`)),o=d(Kt.sign(i,t));return{from:uo(t),to:e.pubkey,cond:r,sig:o}}function ms(t){let e=t.tags.find((t=>"delegation"===t[0]&&t.length>=4));if(!e)return null;let n=e[1],r=e[2],i=e[3],o=r.split("&");for(let e=0;e<o.length;e++){let[n,r,i]=o[e].split(/\b/);if(("kind"!==n||"="!==r||t.kind!==parseInt(i))&&!("created_at"===n&&"<"===r&&t.created_at<parseInt(i)||"created_at"===n&&">"===r&&t.created_at>parseInt(i)))return null}let s=S(ho.encode(`nostr:delegation:${t.pubkey}:${r}`));return Kt.verify(i,s,n)?n:null}co({},{finishReactionEvent:()=>ys,getReactedEventPointer:()=>ws}),co({},{createDelegation:()=>bs,getDelegator:()=>ms}),co({},{matchAll:()=>Es,regex:()=>vs,replaceAll:()=>xs});var vs=()=>new RegExp(`\\b${ds.source}\\b`,"g");function*Es(t){const e=t.matchAll(vs());for(const t of e)try{const[e,n]=t;yield{uri:e,value:n,decoded:$o(n),start:t.index,end:t.index+e.length}}catch(t){}}function xs(t,e){return t.replaceAll(vs(),((t,n)=>e({uri:t,value:n,decoded:$o(n)})))}co({},{channelCreateEvent:()=>Bs,channelHideMessageEvent:()=>Ss,channelMessageEvent:()=>Is,channelMetadataEvent:()=>ks,channelMuteUserEvent:()=>Ls});var As,Bs=(t,e)=>{let n;if("object"==typeof t.content)n=JSON.stringify(t.content);else{if("string"!=typeof t.content)return;n=t.content}return mo({kind:40,tags:[...t.tags??[]],content:n,created_at:t.created_at},e)},ks=(t,e)=>{let n;if("object"==typeof t.content)n=JSON.stringify(t.content);else{if("string"!=typeof t.content)return;n=t.content}return mo({kind:41,tags:[["e",t.channel_create_event_id],...t.tags??[]],content:n,created_at:t.created_at},e)},Is=(t,e)=>{const n=[["e",t.channel_create_event_id,t.relay_url,"root"]];return t.reply_to_channel_message_event_id&&n.push(["e",t.reply_to_channel_message_event_id,t.relay_url,"reply"]),mo({kind:42,tags:[...n,...t.tags??[]],content:t.content,created_at:t.created_at},e)},Ss=(t,e)=>{let n;if("object"==typeof t.content)n=JSON.stringify(t.content);else{if("string"!=typeof t.content)return;n=t.content}return mo({kind:43,tags:[["e",t.channel_message_event_id],...t.tags??[]],content:n,created_at:t.created_at},e)},Ls=(t,e)=>{let n;if("object"==typeof t.content)n=JSON.stringify(t.content);else{if("string"!=typeof t.content)return;n=t.content}return mo({kind:44,tags:[["p",t.pubkey_to_mute],...t.tags??[]],content:n,created_at:t.created_at},e)};co({},{useFetchImplementation:()=>Us,validateGithub:()=>Cs});try{As=fetch}catch{}function Us(t){As=t}async function Cs(t,e,n){try{return await(await As(`https://gist.github.com/${e}/${n}/raw`)).text()===`Verifying that I control the following Nostr public key: ${t}`}catch(t){return!1}}co({},{authenticate:()=>Os});var Os=async({challenge:t,relay:e,sign:n})=>{const r={kind:22242,created_at:Math.floor(Date.now()/1e3),tags:[["relay",e.url],["challenge",t]],content:""};return e.auth(await n(r))};co({},{decrypt:()=>Ts,encrypt:()=>Rs,utils:()=>Ns});var Hs,Ns={v2:{maxPlaintextSize:65408,minCiphertextSize:100,maxCiphertextSize:102400,getConversationKey:(t,e)=>It.getSharedSecret(t,"02"+e).subarray(1,33),getMessageKeys(t,e){const n=((t,e,n,r,i)=>function(t,e,n,r=32){if(a.hash(t),a.number(r),r>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(r/t.outputLen);void 0===n&&(n=so);const o=new Uint8Array(i*t.outputLen),s=wt.create(t,e),c=s._cloneInto(),u=new Uint8Array(s.outputLen);for(let e=0;e<i;e++)oo[0]=e+1,c.update(0===e?so:u).update(n).update(oo).digestInto(u),o.set(u,t.outputLen*e),s._cloneInto(c);return s.destroy(),c.destroy(),u.fill(0),oo.fill(0),o.slice(0,r)}(t,function(t,e,n){return a.hash(t),void 0===n&&(n=new Uint8Array(t.outputLen)),wt(t,g(n),g(e))}(t,e,n),r,i))(S,t,e,"nip44-v2",76);return{encryption:n.subarray(0,32),nonce:n.subarray(32,44),auth:n.subarray(44,76)}},calcPadding(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("expected positive integer");if(t<=32)return 32;const e=1<<Math.floor(Math.log2(t-1))+1,n=e<=256?32:e/8;return n*(Math.floor((t-1)/n)+1)},pad(t){const e=ho.encode(t),n=e.length;if(n<1||n>=Ns.v2.maxPlaintextSize)throw new Error("invalid plaintext length: must be between 1b and 64KB");const r=Ns.v2.calcPadding(n),i=new Uint8Array(r-n),o=new Uint8Array(2);return new DataView(o.buffer).setUint16(0,n),y(o,e,i)},unpad(t){const e=new DataView(t.buffer).getUint16(0),n=t.subarray(2,2+e);if(0===e||n.length!==e||t.length!==2+Ns.v2.calcPadding(e))throw new Error("invalid padding");return lo.decode(n)}}};function Rs(t,e,n={}){const r=n.version??2;if(2!==r)throw new Error("unknown encryption version "+r);const i=n.salt??m(32);Vi(i,32);const o=Ns.v2.getMessageKeys(t,i),s=Ns.v2.pad(e),a=io(o.encryption,o.nonce,s),c=wt(S,o.auth,a);return ie.encode(y(new Uint8Array([r]),i,a,c))}function Ts(t,e){const n=Ns.v2;Vi(t,32);const r=e.length;if(r<n.minCiphertextSize||r>=n.maxCiphertextSize)throw new Error("invalid ciphertext length: "+r);if("#"===e[0])throw new Error("unknown encryption version");let i;try{i=ie.decode(e)}catch(t){throw new Error("invalid base64: "+t.message)}const o=i.subarray(0,1)[0];if(2!==o)throw new Error("unknown encryption version "+o);const s=i.subarray(1,33),a=i.subarray(33,-32),c=i.subarray(-32),u=n.getMessageKeys(t,s);if(!function(t,e){if(t.length!==e.length)throw new Error("equalBytes: Different size of Uint8Arrays");let n=!0;for(let r=0;r<t.length;r++)n&&(n=t[r]===e[r]);return n}(wt(S,u.auth,a),c))throw new Error("invalid MAC");const l=io(u.encryption,u.nonce,a);return n.unpad(l)}function _s(t){const{pathname:e,searchParams:n}=new URL(t),r=e,i=n.get("relay"),o=n.get("secret");if(!r||!i||!o)throw new Error("invalid connection string");return{pubkey:r,relay:i,secret:o}}async function qs({pubkey:t,secret:e,invoice:n}){const r={method:"pay_invoice",params:{invoice:n}},i=await Yo(e,t,JSON.stringify(r));return mo({kind:23194,created_at:Math.round(Date.now()/1e3),content:i,tags:[["p",t]]},e)}co({},{makeNwcRequestEvent:()=>qs,parseConnectionString:()=>_s}),co({},{getZapEndpoint:()=>zs,makeZapReceipt:()=>Ks,makeZapRequest:()=>Ds,useFetchImplementation:()=>$s,validateZapRequest:()=>Ps});try{Hs=fetch}catch{}function $s(t){Hs=t}async function zs(t){try{let e="",{lud06:n,lud16:r}=JSON.parse(t.content);if(n){let{words:t}=fe.decode(n,1e3),r=fe.fromWords(t);e=lo.decode(r)}else{if(!r)return null;{let[t,n]=r.split("@");e=`https://${n}/.well-known/lnurlp/${t}`}}let i=await Hs(e),o=await i.json();if(o.allowsNostr&&o.nostrPubkey)return o.callback}catch(t){}return null}function Ds({profile:t,event:e,amount:n,relays:r,comment:i=""}){if(!n)throw new Error("amount not given");if(!t)throw new Error("profile not given");let o={kind:9734,created_at:Math.round(Date.now()/1e3),content:i,tags:[["p",t],["amount",n.toString()],["relays",...r]]};return e&&o.tags.push(["e",e]),o}function Ps(t){let e;try{e=JSON.parse(t)}catch(t){return"Invalid zap request JSON."}if(!xo(e))return"Zap request is not a valid Nostr event.";if(!Ao(e))return"Invalid signature on zap request.";let n=e.tags.find((([t,e])=>"p"===t&&e));if(!n)return"Zap request doesn't have a 'p' tag.";if(!n[1].match(/^[a-f0-9]{64}$/))return"Zap request 'p' tag is not valid hex.";let r=e.tags.find((([t,e])=>"e"===t&&e));return r&&!r[1].match(/^[a-f0-9]{64}$/)?"Zap request 'e' tag is not valid hex.":e.tags.find((([t,e])=>"relays"===t&&e))?null:"Zap request doesn't have a 'relays' tag."}function Ks({zapRequest:t,preimage:e,bolt11:n,paidAt:r}){let i=JSON.parse(t).tags.filter((([t])=>"e"===t||"p"===t||"a"===t)),o={kind:9735,created_at:Math.round(r.getTime()/1e3),content:"",tags:[...i,["bolt11",n],["description",t]]};return e&&o.tags.push(["preimage",e]),o}co({},{getToken:()=>Fs,unpackEventFromToken:()=>Vs,validateEvent:()=>Gs,validateToken:()=>Ms});var js="Nostr ";async function Fs(t,e,n,r=!1){if(!t||!e)throw new Error("Missing loginUrl or httpMethod");const i=function(t=255){return{kind:t,content:"",tags:[],created_at:0}}(27235);i.tags=[["u",t],["method",e]],i.created_at=Math.round((new Date).getTime()/1e3);const o=await n(i);return(r?js:"")+ie.encode(ho.encode(JSON.stringify(o)))}async function Ms(t,e,n){const r=await Vs(t).catch((t=>{throw t}));return await Gs(r,e,n).catch((t=>{throw t}))}async function Vs(t){if(!t)throw new Error("Missing token");t=t.replace(js,"");const e=lo.decode(ie.decode(t));if(!e||0===e.length||!e.startsWith("{"))throw new Error("Invalid token");return JSON.parse(e)}async function Gs(t,e,n){if(!t)throw new Error("Invalid nostr event");if(!Ao(t))throw new Error("Invalid nostr event, signature invalid");if(27235!==t.kind)throw new Error("Invalid nostr event, kind invalid");if(!t.created_at)throw new Error("Invalid nostr event, created_at invalid");if(Math.round((new Date).getTime()/1e3)-t.created_at>60)throw new Error("Invalid nostr event, expired");const r=t.tags.find((t=>"u"===t[0]));if(1!==r?.length&&r?.[1]!==e)throw new Error("Invalid nostr event, url tag invalid");const i=t.tags.find((t=>"method"===t[0]));if(1!==i?.length&&i?.[1].toLowerCase()!==n.toLowerCase())throw new Error("Invalid nostr event, method tag invalid");return!0}const Zs=document.querySelector(".theme-toggle"),Ws=document.documentElement,Ys=Zs.querySelector("i"),Js=localStorage.getItem("theme")||"light";function Qs(t){Ys.className="light"===t?"fas fa-moon":"fas fa-sun"}Ws.setAttribute("data-theme",Js),Qs(Js),Zs.addEventListener("click",(()=>{const t="light"===Ws.getAttribute("data-theme")?"dark":"light";Ws.setAttribute("data-theme",t),localStorage.setItem("theme",t),Qs(t)}));const Xs="12xyl6w6aacmqa3gmmzwrr9m3u0ldx3dwqhczuascswvew9am9q4sfg99cx",ta="npub12xyl6w6aacmqa3gmmzwrr9m3u0ldx3dwqhczuascswvew9am9q4sfg99cx",ea="vveerrgg@getalby.com",na=document.querySelectorAll(".tab-button"),ra=document.querySelectorAll(".tab-content");function ia(){const t=i()(0,"M");t.addData(`https://njump.me/${ta}`),t.make(),document.getElementById("nostr-qrcode").innerHTML=t.createImgTag(5)}function oa(){const t=i()(0,"M");t.addData(`lightning:${ea}`),t.make(),document.getElementById("lightning-qrcode").innerHTML=t.createImgTag(5)}na.forEach((t=>{t.addEventListener("click",(()=>{na.forEach((t=>t.classList.remove("active"))),ra.forEach((t=>t.classList.remove("active"))),t.classList.add("active");const e=`${t.dataset.tab}-tab`;document.getElementById(e).classList.add("active"),"nostr"===t.dataset.tab?ia():oa()}))})),document.getElementById("nostrNpub").textContent=ta,document.getElementById("nostrPubkey").textContent=Xs,document.getElementById("lightningAddress").textContent=ea;const sa=document.querySelector(".qr-button"),aa=document.getElementById("qrOverlay"),ca=document.querySelector(".close-overlay"),ua=document.querySelectorAll(".copy-button");sa.addEventListener("click",(()=>{aa.classList.add("active"),"nostr"===document.querySelector(".tab-button.active").dataset.tab?ia():oa()})),ca.addEventListener("click",(()=>{aa.classList.remove("active")})),aa.addEventListener("click",(t=>{t.target===aa&&aa.classList.remove("active")})),ua.forEach((t=>{t.addEventListener("click",(()=>{let e="";switch(t.dataset.copy){case"npub":e=ta;break;case"pubkey":e=Xs;break;case"lightning":e=ea}navigator.clipboard.writeText(e).then((()=>{const e=t.textContent;t.textContent="Copied!",setTimeout((()=>{t.textContent=e}),2e3)}))}))}));const la=["wss://relay.damus.io","wss://relay.nostr.band","wss://nos.lol","wss://relay.MaiQR.app"];!async function(){try{const{type:t,data:e}=To.decode(ta),n=new Ro,r=await n.list(la,[{kinds:[0],authors:[e]}]);if(r.length>0){const t=JSON.parse(r[0].content);t.lud16&&(document.getElementById("lightningAddress").textContent=t.lud16,oa(t.lud16))}document.getElementById("nostrNpub").textContent=ta,document.getElementById("nostrPubkey").textContent=e,ia()}catch(t){console.error("Error initializing Nostr:",t)}}()})()})();
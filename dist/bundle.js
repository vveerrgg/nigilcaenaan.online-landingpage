/*! For license information please see bundle.js.LICENSE.txt */
(()=>{"use strict";var n={d:(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o:(n,e)=>Object.prototype.hasOwnProperty.call(n,e),r:n=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})}},e={};n.r(e),n.d(e,{OG:()=>K,My:()=>O,Ph:()=>N,lX:()=>_,Id:()=>T,fg:()=>j,qj:()=>q,aT:()=>C,lq:()=>R,z:()=>$,Q5:()=>D});var t={};function r(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`Wrong positive integer: ${n}`)}function i(n,...e){if(!(n instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(n.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${n.length}`)}n.r(t),n.d(t,{OG:()=>Gr,My:()=>Tr,Ph:()=>Pr,lX:()=>jr,Id:()=>Mr,fg:()=>Yr,qj:()=>Vr,aT:()=>zr,lq:()=>Fr,z:()=>Dr,Q5:()=>Qr});const o={number:r,bool:function(n){if("boolean"!=typeof n)throw new Error(`Expected boolean, not ${n}`)},bytes:i,hash:function(n){if("function"!=typeof n||"function"!=typeof n.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");r(n.outputLen),r(n.blockLen)},exists:function(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")},output:function(n,e){i(n);const t=e.outputLen;if(n.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}},s="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,a=n=>n instanceof Uint8Array,c=n=>new DataView(n.buffer,n.byteOffset,n.byteLength),l=(n,e)=>n<<32-e|n>>>e;if(68!==new Uint8Array(new Uint32Array([287454020]).buffer)[0])throw new Error("Non little-endian hardware is not supported");const u=Array.from({length:256},((n,e)=>e.toString(16).padStart(2,"0")));function h(n){if(!a(n))throw new Error("Uint8Array expected");let e="";for(let t=0;t<n.length;t++)e+=u[n[t]];return e}function f(n){if("string"!=typeof n)throw new Error("hex string expected, got "+typeof n);const e=n.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const t=new Uint8Array(e/2);for(let e=0;e<t.length;e++){const r=2*e,i=n.slice(r,r+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[e]=o}return t}function d(n){if("string"==typeof n&&(n=function(n){if("string"!=typeof n)throw new Error("utf8ToBytes expected string, got "+typeof n);return new Uint8Array((new TextEncoder).encode(n))}(n)),!a(n))throw new Error("expected Uint8Array, got "+typeof n);return n}function p(...n){const e=new Uint8Array(n.reduce(((n,e)=>n+e.length),0));let t=0;return n.forEach((n=>{if(!a(n))throw new Error("Uint8Array expected");e.set(n,t),t+=n.length})),e}class g{clone(){return this._cloneInto()}}function y(n){const e=e=>n().update(d(e)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}function w(n=32){if(s&&"function"==typeof s.getRandomValues)return s.getRandomValues(new Uint8Array(n));throw new Error("crypto.getRandomValues must be defined")}class b extends g{constructor(n,e,t,r){super(),this.blockLen=n,this.outputLen=e,this.padOffset=t,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(n),this.view=c(this.buffer)}update(n){o.exists(this);const{view:e,buffer:t,blockLen:r}=this,i=(n=d(n)).length;for(let o=0;o<i;){const s=Math.min(r-this.pos,i-o);if(s!==r)t.set(n.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===r&&(this.process(e,0),this.pos=0);else{const e=c(n);for(;r<=i-o;o+=r)this.process(e,o)}}return this.length+=n.length,this.roundClean(),this}digestInto(n){o.exists(this),o.output(n,this),this.finished=!0;const{buffer:e,view:t,blockLen:r,isLE:i}=this;let{pos:s}=this;e[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>r-s&&(this.process(t,0),s=0);for(let n=s;n<r;n++)e[n]=0;!function(n,e,t,r){if("function"==typeof n.setBigUint64)return n.setBigUint64(e,t,r);const i=BigInt(32),o=BigInt(4294967295),s=Number(t>>i&o),a=Number(t&o),c=r?4:0,l=r?0:4;n.setUint32(e+c,s,r),n.setUint32(e+l,a,r)}(t,r-8,BigInt(8*this.length),i),this.process(t,0);const a=c(n),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=l/4,h=this.get();if(u>h.length)throw new Error("_sha2: outputLen bigger than state");for(let n=0;n<u;n++)a.setUint32(4*n,h[n],i)}digest(){const{buffer:n,outputLen:e}=this;this.digestInto(n);const t=n.slice(0,e);return this.destroy(),t}_cloneInto(n){n||(n=new this.constructor),n.set(...this.get());const{blockLen:e,buffer:t,length:r,finished:i,destroyed:o,pos:s}=this;return n.length=r,n.pos=s,n.finished=i,n.destroyed=o,r%e&&n.buffer.set(t),n}}const m=(n,e,t)=>n&e^n&t^e&t,E=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),v=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),x=new Uint32Array(64);class A extends b{constructor(){super(64,32,8,!1),this.A=0|v[0],this.B=0|v[1],this.C=0|v[2],this.D=0|v[3],this.E=0|v[4],this.F=0|v[5],this.G=0|v[6],this.H=0|v[7]}get(){const{A:n,B:e,C:t,D:r,E:i,F:o,G:s,H:a}=this;return[n,e,t,r,i,o,s,a]}set(n,e,t,r,i,o,s,a){this.A=0|n,this.B=0|e,this.C=0|t,this.D=0|r,this.E=0|i,this.F=0|o,this.G=0|s,this.H=0|a}process(n,e){for(let t=0;t<16;t++,e+=4)x[t]=n.getUint32(e,!1);for(let n=16;n<64;n++){const e=x[n-15],t=x[n-2],r=l(e,7)^l(e,18)^e>>>3,i=l(t,17)^l(t,19)^t>>>10;x[n]=i+x[n-7]+r+x[n-16]|0}let{A:t,B:r,C:i,D:o,E:s,F:a,G:c,H:u}=this;for(let n=0;n<64;n++){const e=u+(l(s,6)^l(s,11)^l(s,25))+((h=s)&a^~h&c)+E[n]+x[n]|0,f=(l(t,2)^l(t,13)^l(t,22))+m(t,r,i)|0;u=c,c=a,a=s,s=o+e|0,o=i,i=r,r=t,t=e+f|0}var h;t=t+this.A|0,r=r+this.B|0,i=i+this.C|0,o=o+this.D|0,s=s+this.E|0,a=a+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(t,r,i,o,s,a,c,u)}roundClean(){x.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class B extends A{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const k=y((()=>new A)),I=(y((()=>new B)),BigInt(0),BigInt(1)),S=BigInt(2),U=n=>n instanceof Uint8Array,L=Array.from({length:256},((n,e)=>e.toString(16).padStart(2,"0")));function O(n){if(!U(n))throw new Error("Uint8Array expected");let e="";for(let t=0;t<n.length;t++)e+=L[n[t]];return e}function H(n){if("string"!=typeof n)throw new Error("hex string expected, got "+typeof n);return BigInt(""===n?"0":`0x${n}`)}function C(n){if("string"!=typeof n)throw new Error("hex string expected, got "+typeof n);const e=n.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const t=new Uint8Array(e/2);for(let e=0;e<t.length;e++){const r=2*e,i=n.slice(r,r+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[e]=o}return t}function N(n){return H(O(n))}function _(n){if(!U(n))throw new Error("Uint8Array expected");return H(O(Uint8Array.from(n).reverse()))}function R(n,e){return C(n.toString(16).padStart(2*e,"0"))}function $(n,e){return R(n,e).reverse()}function q(n,e,t){let r;if("string"==typeof e)try{r=C(e)}catch(t){throw new Error(`${n} must be valid hex string, got "${e}". Cause: ${t}`)}else{if(!U(e))throw new Error(`${n} must be hex string or Uint8Array`);r=Uint8Array.from(e)}const i=r.length;if("number"==typeof t&&i!==t)throw new Error(`${n} expected ${t} bytes, got ${i}`);return r}function T(...n){const e=new Uint8Array(n.reduce(((n,e)=>n+e.length),0));let t=0;return n.forEach((n=>{if(!U(n))throw new Error("Uint8Array expected");e.set(n,t),t+=n.length})),e}const K=n=>(S<<BigInt(n-1))-I,z=n=>new Uint8Array(n),P=n=>Uint8Array.from(n);function j(n,e,t){if("number"!=typeof n||n<2)throw new Error("hashLen must be a number");if("number"!=typeof e||e<2)throw new Error("qByteLen must be a number");if("function"!=typeof t)throw new Error("hmacFn must be a function");let r=z(n),i=z(n),o=0;const s=()=>{r.fill(1),i.fill(0),o=0},a=(...n)=>t(i,r,...n),c=(n=z())=>{i=a(P([0]),n),r=a(),0!==n.length&&(i=a(P([1]),n),r=a())},l=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let n=0;const t=[];for(;n<e;){r=a();const e=r.slice();t.push(e),n+=r.length}return T(...t)};return(n,e)=>{let t;for(s(),c(n);!(t=e(l()));)c();return s(),t}}const F={bigint:n=>"bigint"==typeof n,function:n=>"function"==typeof n,boolean:n=>"boolean"==typeof n,string:n=>"string"==typeof n,isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,e)=>e.Fp.isValid(n),hash:n=>"function"==typeof n&&Number.isSafeInteger(n.outputLen)};function D(n,e,t={}){const r=(e,t,r)=>{const i=F[t];if("function"!=typeof i)throw new Error(`Invalid validator "${t}", expected function`);const o=n[e];if(!(r&&void 0===o||i(o,n)))throw new Error(`Invalid param ${String(e)}=${o} (${typeof o}), expected ${t}`)};for(const[n,t]of Object.entries(e))r(n,t,!1);for(const[n,e]of Object.entries(t))r(n,e,!0);return n}const V=BigInt(0),M=BigInt(1),G=BigInt(2),Z=BigInt(3),W=BigInt(4),Y=BigInt(5),J=BigInt(8);function Q(n,e){const t=n%e;return t>=V?t:e+t}function X(n,e,t){if(t<=V||e<V)throw new Error("Expected power/modulo > 0");if(t===M)return V;let r=M;for(;e>V;)e&M&&(r=r*n%t),n=n*n%t,e>>=M;return r}function nn(n,e,t){let r=n;for(;e-- >V;)r*=r,r%=t;return r}function en(n,e){if(n===V||e<=V)throw new Error(`invert: expected positive integers, got n=${n} mod=${e}`);let t=Q(n,e),r=e,i=V,o=M,s=M,a=V;for(;t!==V;){const n=r/t,e=r%t,c=i-s*n,l=o-a*n;r=t,t=e,i=s,o=a,s=c,a=l}if(r!==M)throw new Error("invert: does not exist");return Q(i,e)}BigInt(9),BigInt(16);const tn=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function rn(n,e){const t=void 0!==e?e:n.toString(2).length;return{nBitLength:t,nByteLength:Math.ceil(t/8)}}const on=BigInt(0),sn=BigInt(1);function an(n){return D(n.Fp,tn.reduce(((n,e)=>(n[e]="function",n)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),D(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...rn(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}const{Ph:cn,aT:ln}=e,un={Err:class extends Error{constructor(n=""){super(n)}},_parseInt(n){const{Err:e}=un;if(n.length<2||2!==n[0])throw new e("Invalid signature integer tag");const t=n[1],r=n.subarray(2,t+2);if(!t||r.length!==t)throw new e("Invalid signature integer: wrong length");if(128&r[0])throw new e("Invalid signature integer: negative");if(0===r[0]&&!(128&r[1]))throw new e("Invalid signature integer: unnecessary leading zero");return{d:cn(r),l:n.subarray(t+2)}},toSig(n){const{Err:e}=un,t="string"==typeof n?ln(n):n;if(!(t instanceof Uint8Array))throw new Error("ui8a expected");let r=t.length;if(r<2||48!=t[0])throw new e("Invalid signature tag");if(t[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:i,l:o}=un._parseInt(t.subarray(2)),{d:s,l:a}=un._parseInt(o);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s}},hexFromSig(n){const e=n=>8&Number.parseInt(n[0],16)?"00"+n:n,t=n=>{const e=n.toString(16);return 1&e.length?`0${e}`:e},r=e(t(n.s)),i=e(t(n.r)),o=r.length/2,s=i.length/2,a=t(o),c=t(s);return`30${t(s+o+4)}02${c}${i}02${a}${r}`}},hn=BigInt(0),fn=BigInt(1),dn=(BigInt(2),BigInt(3));function pn(n){const e=function(n){const e=an(n);return D(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}(n),{Fp:t,n:r}=e,i=t.BYTES+1,o=2*t.BYTES+1;function s(n){return Q(n,r)}function a(n){return en(n,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:u,isWithinCurveOrder:h}=function(n){const e=function(n){const e=an(n);D(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:t,Fp:r,a:i}=e;if(t){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof t||"bigint"!=typeof t.beta||"function"!=typeof t.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}(n),{Fp:t}=e,r=e.toBytes||((n,e,r)=>{const i=e.toAffine();return T(Uint8Array.from([4]),t.toBytes(i.x),t.toBytes(i.y))}),i=e.fromBytes||(n=>{const e=n.subarray(1);return{x:t.fromBytes(e.subarray(0,t.BYTES)),y:t.fromBytes(e.subarray(t.BYTES,2*t.BYTES))}});function o(n){const{a:r,b:i}=e,o=t.sqr(n),s=t.mul(o,n);return t.add(t.add(s,t.mul(n,r)),i)}if(!t.eql(t.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function s(n){return"bigint"==typeof n&&hn<n&&n<e.n}function a(n){if(!s(n))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(n){const{allowedPrivateKeyLengths:t,nByteLength:r,wrapPrivateKey:i,n:o}=e;if(t&&"bigint"!=typeof n){if(n instanceof Uint8Array&&(n=O(n)),"string"!=typeof n||!t.includes(n.length))throw new Error("Invalid key");n=n.padStart(2*r,"0")}let s;try{s="bigint"==typeof n?n:N(q("private key",n,r))}catch(e){throw new Error(`private key must be ${r} bytes, hex or bigint, not ${typeof n}`)}return i&&(s=Q(s,o)),a(s),s}const l=new Map;function u(n){if(!(n instanceof h))throw new Error("ProjectivePoint expected")}class h{constructor(n,e,r){if(this.px=n,this.py=e,this.pz=r,null==n||!t.isValid(n))throw new Error("x required");if(null==e||!t.isValid(e))throw new Error("y required");if(null==r||!t.isValid(r))throw new Error("z required")}static fromAffine(n){const{x:e,y:r}=n||{};if(!n||!t.isValid(e)||!t.isValid(r))throw new Error("invalid affine point");if(n instanceof h)throw new Error("projective point not allowed");const i=n=>t.eql(n,t.ZERO);return i(e)&&i(r)?h.ZERO:new h(e,r,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(n){const e=t.invertBatch(n.map((n=>n.pz)));return n.map(((n,t)=>n.toAffine(e[t]))).map(h.fromAffine)}static fromHex(n){const e=h.fromAffine(i(q("pointHex",n)));return e.assertValidity(),e}static fromPrivateKey(n){return h.BASE.multiply(c(n))}_setWindowSize(n){this._WINDOW_SIZE=n,l.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint)return;throw new Error("bad point: ZERO")}const{x:n,y:r}=this.toAffine();if(!t.isValid(n)||!t.isValid(r))throw new Error("bad point: x or y not FE");const i=t.sqr(r),s=o(n);if(!t.eql(i,s))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:n}=this.toAffine();if(t.isOdd)return!t.isOdd(n);throw new Error("Field doesn't support isOdd")}equals(n){u(n);const{px:e,py:r,pz:i}=this,{px:o,py:s,pz:a}=n,c=t.eql(t.mul(e,a),t.mul(o,i)),l=t.eql(t.mul(r,a),t.mul(s,i));return c&&l}negate(){return new h(this.px,t.neg(this.py),this.pz)}double(){const{a:n,b:r}=e,i=t.mul(r,dn),{px:o,py:s,pz:a}=this;let c=t.ZERO,l=t.ZERO,u=t.ZERO,f=t.mul(o,o),d=t.mul(s,s),p=t.mul(a,a),g=t.mul(o,s);return g=t.add(g,g),u=t.mul(o,a),u=t.add(u,u),c=t.mul(n,u),l=t.mul(i,p),l=t.add(c,l),c=t.sub(d,l),l=t.add(d,l),l=t.mul(c,l),c=t.mul(g,c),u=t.mul(i,u),p=t.mul(n,p),g=t.sub(f,p),g=t.mul(n,g),g=t.add(g,u),u=t.add(f,f),f=t.add(u,f),f=t.add(f,p),f=t.mul(f,g),l=t.add(l,f),p=t.mul(s,a),p=t.add(p,p),f=t.mul(p,g),c=t.sub(c,f),u=t.mul(p,d),u=t.add(u,u),u=t.add(u,u),new h(c,l,u)}add(n){u(n);const{px:r,py:i,pz:o}=this,{px:s,py:a,pz:c}=n;let l=t.ZERO,f=t.ZERO,d=t.ZERO;const p=e.a,g=t.mul(e.b,dn);let y=t.mul(r,s),w=t.mul(i,a),b=t.mul(o,c),m=t.add(r,i),E=t.add(s,a);m=t.mul(m,E),E=t.add(y,w),m=t.sub(m,E),E=t.add(r,o);let v=t.add(s,c);return E=t.mul(E,v),v=t.add(y,b),E=t.sub(E,v),v=t.add(i,o),l=t.add(a,c),v=t.mul(v,l),l=t.add(w,b),v=t.sub(v,l),d=t.mul(p,E),l=t.mul(g,b),d=t.add(l,d),l=t.sub(w,d),d=t.add(w,d),f=t.mul(l,d),w=t.add(y,y),w=t.add(w,y),b=t.mul(p,b),E=t.mul(g,E),w=t.add(w,b),b=t.sub(y,b),b=t.mul(p,b),E=t.add(E,b),y=t.mul(w,E),f=t.add(f,y),y=t.mul(v,E),l=t.mul(m,l),l=t.sub(l,y),y=t.mul(m,w),d=t.mul(v,d),d=t.add(d,y),new h(l,f,d)}subtract(n){return this.add(n.negate())}is0(){return this.equals(h.ZERO)}wNAF(n){return d.wNAFCached(this,l,n,(n=>{const e=t.invertBatch(n.map((n=>n.pz)));return n.map(((n,t)=>n.toAffine(e[t]))).map(h.fromAffine)}))}multiplyUnsafe(n){const r=h.ZERO;if(n===hn)return r;if(a(n),n===fn)return this;const{endo:i}=e;if(!i)return d.unsafeLadder(this,n);let{k1neg:o,k1:s,k2neg:c,k2:l}=i.splitScalar(n),u=r,f=r,p=this;for(;s>hn||l>hn;)s&fn&&(u=u.add(p)),l&fn&&(f=f.add(p)),p=p.double(),s>>=fn,l>>=fn;return o&&(u=u.negate()),c&&(f=f.negate()),f=new h(t.mul(f.px,i.beta),f.py,f.pz),u.add(f)}multiply(n){a(n);let r,i,o=n;const{endo:s}=e;if(s){const{k1neg:n,k1:e,k2neg:a,k2:c}=s.splitScalar(o);let{p:l,f:u}=this.wNAF(e),{p:f,f:p}=this.wNAF(c);l=d.constTimeNegate(n,l),f=d.constTimeNegate(a,f),f=new h(t.mul(f.px,s.beta),f.py,f.pz),r=l.add(f),i=u.add(p)}else{const{p:n,f:e}=this.wNAF(o);r=n,i=e}return h.normalizeZ([r,i])[0]}multiplyAndAddUnsafe(n,e,t){const r=h.BASE,i=(n,e)=>e!==hn&&e!==fn&&n.equals(r)?n.multiply(e):n.multiplyUnsafe(e),o=i(this,e).add(i(n,t));return o.is0()?void 0:o}toAffine(n){const{px:e,py:r,pz:i}=this,o=this.is0();null==n&&(n=o?t.ONE:t.inv(i));const s=t.mul(e,n),a=t.mul(r,n),c=t.mul(i,n);if(o)return{x:t.ZERO,y:t.ZERO};if(!t.eql(c,t.ONE))throw new Error("invZ was invalid");return{x:s,y:a}}isTorsionFree(){const{h:n,isTorsionFree:t}=e;if(n===fn)return!0;if(t)return t(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:n,clearCofactor:t}=e;return n===fn?this:t?t(h,this):this.multiplyUnsafe(e.h)}toRawBytes(n=!0){return this.assertValidity(),r(h,this,n)}toHex(n=!0){return O(this.toRawBytes(n))}}h.BASE=new h(e.Gx,e.Gy,t.ONE),h.ZERO=new h(t.ZERO,t.ONE,t.ZERO);const f=e.nBitLength,d=function(n,e){const t=(n,e)=>{const t=e.negate();return n?t:e},r=n=>({windows:Math.ceil(e/n)+1,windowSize:2**(n-1)});return{constTimeNegate:t,unsafeLadder(e,t){let r=n.ZERO,i=e;for(;t>on;)t&sn&&(r=r.add(i)),i=i.double(),t>>=sn;return r},precomputeWindow(n,e){const{windows:t,windowSize:i}=r(e),o=[];let s=n,a=s;for(let n=0;n<t;n++){a=s,o.push(a);for(let n=1;n<i;n++)a=a.add(s),o.push(a);s=a.double()}return o},wNAF(e,i,o){const{windows:s,windowSize:a}=r(e);let c=n.ZERO,l=n.BASE;const u=BigInt(2**e-1),h=2**e,f=BigInt(e);for(let n=0;n<s;n++){const e=n*a;let r=Number(o&u);o>>=f,r>a&&(r-=h,o+=sn);const s=e,d=e+Math.abs(r)-1,p=n%2!=0,g=r<0;0===r?l=l.add(t(p,i[s])):c=c.add(t(g,i[d]))}return{p:c,f:l}},wNAFCached(n,e,t,r){const i=n._WINDOW_SIZE||1;let o=e.get(n);return o||(o=this.precomputeWindow(n,i),1!==i&&e.set(n,r(o))),this.wNAF(i,o,t)}}}(h,e.endo?Math.ceil(f/2):f);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:s}}({...e,toBytes(n,e,r){const i=e.toAffine(),o=t.toBytes(i.x),s=T;return r?s(Uint8Array.from([e.hasEvenY()?2:3]),o):s(Uint8Array.from([4]),o,t.toBytes(i.y))},fromBytes(n){const e=n.length,r=n[0],s=n.subarray(1);if(e!==i||2!==r&&3!==r){if(e===o&&4===r)return{x:t.fromBytes(s.subarray(0,t.BYTES)),y:t.fromBytes(s.subarray(t.BYTES,2*t.BYTES))};throw new Error(`Point of length ${e} was invalid. Expected ${i} compressed bytes or ${o} uncompressed bytes`)}{const n=N(s);if(!(hn<(a=n)&&a<t.ORDER))throw new Error("Point is not on curve");const e=u(n);let i=t.sqrt(e);return!(1&~r)!=((i&fn)===fn)&&(i=t.neg(i)),{x:n,y:i}}var a}}),f=n=>O(R(n,e.nByteLength));function d(n){return n>r>>fn}const p=(n,e,t)=>N(n.slice(e,t));class g{constructor(n,e,t){this.r=n,this.s=e,this.recovery=t,this.assertValidity()}static fromCompact(n){const t=e.nByteLength;return n=q("compactSignature",n,2*t),new g(p(n,0,t),p(n,t,2*t))}static fromDER(n){const{r:e,s:t}=un.toSig(q("DER",n));return new g(e,t)}assertValidity(){if(!h(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(n){return new g(this.r,this.s,n)}recoverPublicKey(n){const{r,s:i,recovery:o}=this,l=m(q("msgHash",n));if(null==o||![0,1,2,3].includes(o))throw new Error("recovery id invalid");const u=2===o||3===o?r+e.n:r;if(u>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const h=1&o?"03":"02",d=c.fromHex(h+f(u)),p=a(u),g=s(-l*p),y=s(i*p),w=c.BASE.multiplyAndAddUnsafe(d,g,y);if(!w)throw new Error("point at infinify");return w.assertValidity(),w}hasHighS(){return d(this.s)}normalizeS(){return this.hasHighS()?new g(this.r,s(-this.s),this.recovery):this}toDERRawBytes(){return C(this.toDERHex())}toDERHex(){return un.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return C(this.toCompactHex())}toCompactHex(){return f(this.r)+f(this.s)}}const y={isValidPrivateKey(n){try{return l(n),!0}catch(n){return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>R(function(n,e,t=!1){const r=(n=q("privateHash",n)).length,i=rn(e).nByteLength+8;if(i<24||r<i||r>1024)throw new Error(`hashToPrivateScalar: expected ${i}-1024 bytes of input, got ${r}`);return Q(t?_(n):N(n),e-M)+M}(e.randomBytes(t.BYTES+8),r),e.nByteLength),precompute:(n=8,e=c.BASE)=>(e._setWindowSize(n),e.multiply(BigInt(3)),e)};function w(n){const e=n instanceof Uint8Array,t="string"==typeof n,r=(e||t)&&n.length;return e?r===i||r===o:t?r===2*i||r===2*o:n instanceof c}const b=e.bits2int||function(n){const t=N(n),r=8*n.length-e.nBitLength;return r>0?t>>BigInt(r):t},m=e.bits2int_modN||function(n){return s(b(n))},E=K(e.nBitLength);function v(n){if("bigint"!=typeof n)throw new Error("bigint expected");if(!(hn<=n&&n<E))throw new Error(`bigint expected < 2^${e.nBitLength}`);return R(n,e.nByteLength)}const x={lowS:e.lowS,prehash:!1},A={lowS:e.lowS,prehash:!1};return c.BASE._setWindowSize(8),{CURVE:e,getPublicKey:function(n,e=!0){return c.fromPrivateKey(n).toRawBytes(e)},getSharedSecret:function(n,e,t=!0){if(w(n))throw new Error("first arg must be private key");if(!w(e))throw new Error("second arg must be public key");return c.fromHex(e).multiply(l(n)).toRawBytes(t)},sign:function(n,r,i=x){const{seed:o,k2sig:u}=function(n,r,i=x){if(["recovered","canonical"].some((n=>n in i)))throw new Error("sign() legacy options not supported");const{hash:o,randomBytes:u}=e;let{lowS:f,prehash:p,extraEntropy:y}=i;null==f&&(f=!0),n=q("msgHash",n),p&&(n=q("prehashed msgHash",o(n)));const w=m(n),E=l(r),A=[v(E),v(w)];if(null!=y){const n=!0===y?u(t.BYTES):y;A.push(q("extraEntropy",n,t.BYTES))}const B=T(...A),k=w;return{seed:B,k2sig:function(n){const e=b(n);if(!h(e))return;const t=a(e),r=c.BASE.multiply(e).toAffine(),i=s(r.x);if(i===hn)return;const o=s(t*s(k+i*E));if(o===hn)return;let l=(r.x===i?0:2)|Number(r.y&fn),u=o;return f&&d(o)&&(u=function(n){return d(n)?s(-n):n}(o),l^=1),new g(i,u,l)}}}(n,r,i),f=e;return j(f.hash.outputLen,f.nByteLength,f.hmac)(o,u)},verify:function(n,t,r,i=A){const o=n;if(t=q("msgHash",t),r=q("publicKey",r),"strict"in i)throw new Error("options.strict was renamed to lowS");const{lowS:l,prehash:u}=i;let h,f;try{if("string"==typeof o||o instanceof Uint8Array)try{h=g.fromDER(o)}catch(n){if(!(n instanceof un.Err))throw n;h=g.fromCompact(o)}else{if("object"!=typeof o||"bigint"!=typeof o.r||"bigint"!=typeof o.s)throw new Error("PARSE");{const{r:n,s:e}=o;h=new g(n,e)}}f=c.fromHex(r)}catch(n){if("PARSE"===n.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(l&&h.hasHighS())return!1;u&&(t=e.hash(t));const{r:d,s:p}=h,y=m(t),w=a(p),b=s(y*w),E=s(d*w),v=c.BASE.multiplyAndAddUnsafe(f,b,E)?.toAffine();return!!v&&s(v.x)===d},ProjectivePoint:c,Signature:g,utils:y}}BigInt(4);class gn extends g{constructor(n,e){super(),this.finished=!1,this.destroyed=!1,o.hash(n);const t=d(e);if(this.iHash=n.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,i=new Uint8Array(r);i.set(t.length>r?n.create().update(t).digest():t);for(let n=0;n<i.length;n++)i[n]^=54;this.iHash.update(i),this.oHash=n.create();for(let n=0;n<i.length;n++)i[n]^=106;this.oHash.update(i),i.fill(0)}update(n){return o.exists(this),this.iHash.update(n),this}digestInto(n){o.exists(this),o.bytes(n,this.outputLen),this.finished=!0,this.iHash.digestInto(n),this.oHash.update(n),this.oHash.digestInto(n),this.destroy()}digest(){const n=new Uint8Array(this.oHash.outputLen);return this.digestInto(n),n}_cloneInto(n){n||(n=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:t,finished:r,destroyed:i,blockLen:o,outputLen:s}=this;return n.finished=r,n.destroyed=i,n.blockLen=o,n.outputLen=s,n.oHash=e._cloneInto(n.oHash),n.iHash=t._cloneInto(n.iHash),n}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const yn=(n,e,t)=>new gn(n,e).update(t).digest();function wn(n){return{hash:n,hmac:(e,...t)=>yn(n,e,p(...t)),randomBytes:w}}yn.create=(n,e)=>new gn(n,e);const bn=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),mn=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),En=BigInt(1),vn=BigInt(2),xn=(n,e)=>(n+e/vn)/e;function An(n){const e=bn,t=BigInt(3),r=BigInt(6),i=BigInt(11),o=BigInt(22),s=BigInt(23),a=BigInt(44),c=BigInt(88),l=n*n*n%e,u=l*l*n%e,h=nn(u,t,e)*u%e,f=nn(h,t,e)*u%e,d=nn(f,vn,e)*l%e,p=nn(d,i,e)*d%e,g=nn(p,o,e)*p%e,y=nn(g,a,e)*g%e,w=nn(y,c,e)*y%e,b=nn(w,a,e)*g%e,m=nn(b,t,e)*u%e,E=nn(m,s,e)*p%e,v=nn(E,r,e)*l%e,x=nn(v,vn,e);if(!Bn.eql(Bn.sqr(x),n))throw new Error("Cannot find square root");return x}const Bn=function(n,e,t=!1,r={}){if(n<=V)throw new Error(`Expected Fp ORDER > 0, got ${n}`);const{nBitLength:i,nByteLength:o}=rn(n,e);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");const s=function(n){if(n%W===Z){const e=(n+M)/W;return function(n,t){const r=n.pow(t,e);if(!n.eql(n.sqr(r),t))throw new Error("Cannot find square root");return r}}if(n%J===Y){const e=(n-Y)/J;return function(n,t){const r=n.mul(t,G),i=n.pow(r,e),o=n.mul(t,i),s=n.mul(n.mul(o,G),i),a=n.mul(o,n.sub(s,n.ONE));if(!n.eql(n.sqr(a),t))throw new Error("Cannot find square root");return a}}return function(n){const e=(n-M)/G;let t,r,i;for(t=n-M,r=0;t%G===V;t/=G,r++);for(i=G;i<n&&X(i,e,n)!==n-M;i++);if(1===r){const e=(n+M)/W;return function(n,t){const r=n.pow(t,e);if(!n.eql(n.sqr(r),t))throw new Error("Cannot find square root");return r}}const o=(t+M)/G;return function(n,s){if(n.pow(s,e)===n.neg(n.ONE))throw new Error("Cannot find square root");let a=r,c=n.pow(n.mul(n.ONE,i),t),l=n.pow(s,o),u=n.pow(s,t);for(;!n.eql(u,n.ONE);){if(n.eql(u,n.ZERO))return n.ZERO;let e=1;for(let t=n.sqr(u);e<a&&!n.eql(t,n.ONE);e++)t=n.sqr(t);const t=n.pow(c,M<<BigInt(a-e-1));c=n.sqr(t),l=n.mul(l,t),u=n.mul(u,c),a=e}return l}}(n)}(n),a=Object.freeze({ORDER:n,BITS:i,BYTES:o,MASK:K(i),ZERO:V,ONE:M,create:e=>Q(e,n),isValid:e=>{if("bigint"!=typeof e)throw new Error("Invalid field element: expected bigint, got "+typeof e);return V<=e&&e<n},is0:n=>n===V,isOdd:n=>(n&M)===M,neg:e=>Q(-e,n),eql:(n,e)=>n===e,sqr:e=>Q(e*e,n),add:(e,t)=>Q(e+t,n),sub:(e,t)=>Q(e-t,n),mul:(e,t)=>Q(e*t,n),pow:(n,e)=>function(n,e,t){if(t<V)throw new Error("Expected power > 0");if(t===V)return n.ONE;if(t===M)return e;let r=n.ONE,i=e;for(;t>V;)t&M&&(r=n.mul(r,i)),i=n.sqr(i),t>>=M;return r}(a,n,e),div:(e,t)=>Q(e*en(t,n),n),sqrN:n=>n*n,addN:(n,e)=>n+e,subN:(n,e)=>n-e,mulN:(n,e)=>n*e,inv:e=>en(e,n),sqrt:r.sqrt||(n=>s(a,n)),invertBatch:n=>function(n,e){const t=new Array(e.length),r=e.reduce(((e,r,i)=>n.is0(r)?e:(t[i]=e,n.mul(e,r))),n.ONE),i=n.inv(r);return e.reduceRight(((e,r,i)=>n.is0(r)?e:(t[i]=n.mul(e,t[i]),n.mul(e,r))),i),t}(a,n),cmov:(n,e,t)=>t?e:n,toBytes:n=>t?$(n,o):R(n,o),fromBytes:n=>{if(n.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${n.length}`);return t?_(n):N(n)}});return Object.freeze(a)}(bn,void 0,void 0,{sqrt:An}),kn=function(n,e){const t=e=>pn({...n,...wn(e)});return Object.freeze({...t(e),create:t})}({a:BigInt(0),b:BigInt(7),Fp:Bn,n:mn,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{const e=mn,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-En*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=t,s=BigInt("0x100000000000000000000000000000000"),a=xn(o*n,e),c=xn(-r*n,e);let l=Q(n-a*t-c*i,e),u=Q(-a*r-c*o,e);const h=l>s,f=u>s;if(h&&(l=e-l),f&&(u=e-u),l>s||u>s)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:h,k1:l,k2neg:f,k2:u}}}},k),In=BigInt(0),Sn=n=>"bigint"==typeof n&&In<n&&n<bn,Un={};function Ln(n,...e){let t=Un[n];if(void 0===t){const e=k(Uint8Array.from(n,(n=>n.charCodeAt(0))));t=T(e,e),Un[n]=t}return k(T(t,...e))}const On=n=>n.toRawBytes(!0).slice(1),Hn=n=>R(n,32),Cn=n=>Q(n,bn),Nn=n=>Q(n,mn),_n=kn.ProjectivePoint;function Rn(n){let e=kn.utils.normPrivateKeyToScalar(n),t=_n.fromPrivateKey(e);return{scalar:t.hasEvenY()?e:Nn(-e),bytes:On(t)}}function $n(n){if(!Sn(n))throw new Error("bad x: need 0 < x < p");const e=Cn(n*n);let t=An(Cn(e*n+BigInt(7)));t%vn!==In&&(t=Cn(-t));const r=new _n(n,t,En);return r.assertValidity(),r}function qn(...n){return Nn(N(Ln("BIP0340/challenge",...n)))}function Tn(n){return Rn(n).bytes}function Kn(n,e,t=w(32)){const r=q("message",n),{bytes:i,scalar:o}=Rn(e),s=q("auxRand",t,32),a=Hn(o^N(Ln("BIP0340/aux",s))),c=Ln("BIP0340/nonce",a,i,r),l=Nn(N(c));if(l===In)throw new Error("sign failed: k is zero");const{bytes:u,scalar:h}=Rn(l),f=qn(u,i,r),d=new Uint8Array(64);if(d.set(u,0),d.set(Hn(Nn(h+f*o)),32),!zn(d,r,i))throw new Error("sign: Invalid signature produced");return d}function zn(n,e,t){const r=q("signature",n,64),i=q("message",e),o=q("publicKey",t,32);try{const n=$n(N(o)),e=N(r.subarray(0,32));if(!Sn(e))return!1;const t=N(r.subarray(32,64));if(!("bigint"==typeof(l=t)&&In<l&&l<mn))return!1;const u=qn(Hn(e),On(n),i),h=(s=n,a=t,c=Nn(-u),_n.BASE.multiplyAndAddUnsafe(s,a,c));return!(!h||!h.hasEvenY()||h.toAffine().x!==e)}catch(n){return!1}var s,a,c,l}const Pn=(()=>({getPublicKey:Tn,sign:Kn,verify:zn,utils:{randomPrivateKey:kn.utils.randomPrivateKey,lift_x:$n,pointToBytes:On,numberToBytesBE:R,bytesToNumberBE:N,taggedHash:Ln,mod:Q}}))();function jn(n){if(!Number.isSafeInteger(n))throw new Error(`Wrong integer: ${n}`)}function Fn(...n){const e=(n,e)=>t=>n(e(t));return{encode:Array.from(n).reverse().reduce(((n,t)=>n?e(n,t.encode):t.encode),void 0),decode:n.reduce(((n,t)=>n?e(n,t.decode):t.decode),void 0)}}function Dn(n){return{encode:e=>{if(!Array.isArray(e)||e.length&&"number"!=typeof e[0])throw new Error("alphabet.encode input should be an array of numbers");return e.map((e=>{if(jn(e),e<0||e>=n.length)throw new Error(`Digit index outside alphabet: ${e} (alphabet: ${n.length})`);return n[e]}))},decode:e=>{if(!Array.isArray(e)||e.length&&"string"!=typeof e[0])throw new Error("alphabet.decode input should be array of strings");return e.map((e=>{if("string"!=typeof e)throw new Error(`alphabet.decode: not string element=${e}`);const t=n.indexOf(e);if(-1===t)throw new Error(`Unknown letter: "${e}". Allowed: ${n}`);return t}))}}}function Vn(n=""){if("string"!=typeof n)throw new Error("join separator should be string");return{encode:e=>{if(!Array.isArray(e)||e.length&&"string"!=typeof e[0])throw new Error("join.encode input should be array of strings");for(let n of e)if("string"!=typeof n)throw new Error(`join.encode: non-string input=${n}`);return e.join(n)},decode:e=>{if("string"!=typeof e)throw new Error("join.decode input should be string");return e.split(n)}}}function Mn(n,e="="){if(jn(n),"string"!=typeof e)throw new Error("padding chr should be string");return{encode(t){if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("padding.encode input should be array of strings");for(let n of t)if("string"!=typeof n)throw new Error(`padding.encode: non-string input=${n}`);for(;t.length*n%8;)t.push(e);return t},decode(t){if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("padding.encode input should be array of strings");for(let n of t)if("string"!=typeof n)throw new Error(`padding.decode: non-string input=${n}`);let r=t.length;if(r*n%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;r>0&&t[r-1]===e;r--)if(!((r-1)*n%8))throw new Error("Invalid padding: string has too much padding");return t.slice(0,r)}}}function Gn(n){if("function"!=typeof n)throw new Error("normalize fn should be function");return{encode:n=>n,decode:e=>n(e)}}function Zn(n,e,t){if(e<2)throw new Error(`convertRadix: wrong from=${e}, base cannot be less than 2`);if(t<2)throw new Error(`convertRadix: wrong to=${t}, base cannot be less than 2`);if(!Array.isArray(n))throw new Error("convertRadix: data should be array");if(!n.length)return[];let r=0;const i=[],o=Array.from(n);for(o.forEach((n=>{if(jn(n),n<0||n>=e)throw new Error(`Wrong integer: ${n}`)}));;){let n=0,s=!0;for(let i=r;i<o.length;i++){const a=o[i],c=e*n+a;if(!Number.isSafeInteger(c)||e*n/e!==n||c-a!=e*n)throw new Error("convertRadix: carry overflow");if(n=c%t,o[i]=Math.floor(c/t),!Number.isSafeInteger(o[i])||o[i]*t+n!==c)throw new Error("convertRadix: carry overflow");s&&(o[i]?s=!1:r=i)}if(i.push(n),s)break}for(let e=0;e<n.length-1&&0===n[e];e++)i.push(0);return i.reverse()}const Wn=(n,e)=>e?Wn(e,n%e):n,Yn=(n,e)=>n+(e-Wn(n,e));function Jn(n,e,t,r){if(!Array.isArray(n))throw new Error("convertRadix2: data should be array");if(e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(t<=0||t>32)throw new Error(`convertRadix2: wrong to=${t}`);if(Yn(e,t)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${t} carryBits=${Yn(e,t)}`);let i=0,o=0;const s=2**t-1,a=[];for(const r of n){if(jn(r),r>=2**e)throw new Error(`convertRadix2: invalid data word=${r} from=${e}`);if(i=i<<e|r,o+e>32)throw new Error(`convertRadix2: carry overflow pos=${o} from=${e}`);for(o+=e;o>=t;o-=t)a.push((i>>o-t&s)>>>0);i&=2**o-1}if(i=i<<t-o&s,!r&&o>=e)throw new Error("Excess padding");if(!r&&i)throw new Error(`Non-zero padding: ${i}`);return r&&o>0&&a.push(i>>>0),a}function Qn(n){return jn(n),{encode:e=>{if(!(e instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return Zn(Array.from(e),256,n)},decode:e=>{if(!Array.isArray(e)||e.length&&"number"!=typeof e[0])throw new Error("radix.decode input should be array of strings");return Uint8Array.from(Zn(e,n,256))}}}function Xn(n,e=!1){if(jn(n),n<=0||n>32)throw new Error("radix2: bits should be in (0..32]");if(Yn(8,n)>32||Yn(n,8)>32)throw new Error("radix2: carry overflow");return{encode:t=>{if(!(t instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return Jn(Array.from(t),8,n,!e)},decode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(Jn(t,n,8,e))}}}function ne(n){if("function"!=typeof n)throw new Error("unsafeWrapper fn should be function");return function(...e){try{return n.apply(null,e)}catch(n){}}}function ee(n,e){if(jn(n),"function"!=typeof e)throw new Error("checksum fn should be function");return{encode(t){if(!(t instanceof Uint8Array))throw new Error("checksum.encode: input should be Uint8Array");const r=e(t).slice(0,n),i=new Uint8Array(t.length+n);return i.set(t),i.set(r,t.length),i},decode(t){if(!(t instanceof Uint8Array))throw new Error("checksum.decode: input should be Uint8Array");const r=t.slice(0,-n),i=e(r).slice(0,n),o=t.slice(-n);for(let e=0;e<n;e++)if(i[e]!==o[e])throw new Error("Invalid checksum");return r}}}const te={alphabet:Dn,chain:Fn,checksum:ee,radix:Qn,radix2:Xn,join:Vn,padding:Mn},re=(Fn(Xn(4),Dn("0123456789ABCDEF"),Vn("")),Fn(Xn(5),Dn("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),Mn(5),Vn("")),Fn(Xn(5),Dn("0123456789ABCDEFGHIJKLMNOPQRSTUV"),Mn(5),Vn("")),Fn(Xn(5),Dn("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),Vn(""),Gn((n=>n.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")))),Fn(Xn(6),Dn("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),Mn(6),Vn(""))),ie=(Fn(Xn(6),Dn("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),Mn(6),Vn("")),n=>Fn(Qn(58),Dn(n),Vn(""))),oe=ie("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),se=(ie("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),ie("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz"),Fn(Dn("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),Vn(""))),ae=[996825010,642813549,513874426,1027748829,705979059];function ce(n){const e=n>>25;let t=(33554431&n)<<5;for(let n=0;n<ae.length;n++)1==(e>>n&1)&&(t^=ae[n]);return t}function le(n,e,t=1){const r=n.length;let i=1;for(let e=0;e<r;e++){const t=n.charCodeAt(e);if(t<33||t>126)throw new Error(`Invalid prefix (${n})`);i=ce(i)^t>>5}i=ce(i);for(let e=0;e<r;e++)i=ce(i)^31&n.charCodeAt(e);for(let n of e)i=ce(i)^n;for(let n=0;n<6;n++)i=ce(i);return i^=t,se.encode(Jn([i%2**30],30,5,!1))}function ue(n){const e="bech32"===n?1:734539939,t=Xn(5),r=t.decode,i=t.encode,o=ne(r);function s(n,t=90){if("string"!=typeof n)throw new Error("bech32.decode input should be string, not "+typeof n);if(n.length<8||!1!==t&&n.length>t)throw new TypeError(`Wrong string length: ${n.length} (${n}). Expected (8..${t})`);const r=n.toLowerCase();if(n!==r&&n!==n.toUpperCase())throw new Error("String must be lowercase or uppercase");const i=(n=r).lastIndexOf("1");if(0===i||-1===i)throw new Error('Letter "1" must be present between prefix and data only');const o=n.slice(0,i),s=n.slice(i+1);if(s.length<6)throw new Error("Data must be at least 6 characters long");const a=se.decode(s).slice(0,-6),c=le(o,a,e);if(!s.endsWith(c))throw new Error(`Invalid checksum in ${n}: expected "${c}"`);return{prefix:o,words:a}}return{encode:function(n,t,r=90){if("string"!=typeof n)throw new Error("bech32.encode prefix should be string, not "+typeof n);if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("bech32.encode words should be array of numbers, not "+typeof t);const i=n.length+7+t.length;if(!1!==r&&i>r)throw new TypeError(`Length ${i} exceeds limit ${r}`);return`${n=n.toLowerCase()}1${se.encode(t)}${le(n,t,e)}`},decode:s,decodeToBytes:function(n){const{prefix:e,words:t}=s(n,!1);return{prefix:e,words:t,bytes:r(t)}},decodeUnsafe:ne(s),fromWords:r,fromWordsUnsafe:o,toWords:i}}const he=ue("bech32"),fe=(ue("bech32m"),Fn(Xn(4),Dn("0123456789abcdef"),Vn(""),Gn((n=>{if("string"!=typeof n||n.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof n} with length ${n.length}`);return n.toLowerCase()}))),"abandon\nability\nable\nabout\nabove\nabsent\nabsorb\nabstract\nabsurd\nabuse\naccess\naccident\naccount\naccuse\nachieve\nacid\nacoustic\nacquire\nacross\nact\naction\nactor\nactress\nactual\nadapt\nadd\naddict\naddress\nadjust\nadmit\nadult\nadvance\nadvice\naerobic\naffair\nafford\nafraid\nagain\nage\nagent\nagree\nahead\naim\nair\nairport\naisle\nalarm\nalbum\nalcohol\nalert\nalien\nall\nalley\nallow\nalmost\nalone\nalpha\nalready\nalso\nalter\nalways\namateur\namazing\namong\namount\namused\nanalyst\nanchor\nancient\nanger\nangle\nangry\nanimal\nankle\nannounce\nannual\nanother\nanswer\nantenna\nantique\nanxiety\nany\napart\napology\nappear\napple\napprove\napril\narch\narctic\narea\narena\nargue\narm\narmed\narmor\narmy\naround\narrange\narrest\narrive\narrow\nart\nartefact\nartist\nartwork\nask\naspect\nassault\nasset\nassist\nassume\nasthma\nathlete\natom\nattack\nattend\nattitude\nattract\nauction\naudit\naugust\naunt\nauthor\nauto\nautumn\naverage\navocado\navoid\nawake\naware\naway\nawesome\nawful\nawkward\naxis\nbaby\nbachelor\nbacon\nbadge\nbag\nbalance\nbalcony\nball\nbamboo\nbanana\nbanner\nbar\nbarely\nbargain\nbarrel\nbase\nbasic\nbasket\nbattle\nbeach\nbean\nbeauty\nbecause\nbecome\nbeef\nbefore\nbegin\nbehave\nbehind\nbelieve\nbelow\nbelt\nbench\nbenefit\nbest\nbetray\nbetter\nbetween\nbeyond\nbicycle\nbid\nbike\nbind\nbiology\nbird\nbirth\nbitter\nblack\nblade\nblame\nblanket\nblast\nbleak\nbless\nblind\nblood\nblossom\nblouse\nblue\nblur\nblush\nboard\nboat\nbody\nboil\nbomb\nbone\nbonus\nbook\nboost\nborder\nboring\nborrow\nboss\nbottom\nbounce\nbox\nboy\nbracket\nbrain\nbrand\nbrass\nbrave\nbread\nbreeze\nbrick\nbridge\nbrief\nbright\nbring\nbrisk\nbroccoli\nbroken\nbronze\nbroom\nbrother\nbrown\nbrush\nbubble\nbuddy\nbudget\nbuffalo\nbuild\nbulb\nbulk\nbullet\nbundle\nbunker\nburden\nburger\nburst\nbus\nbusiness\nbusy\nbutter\nbuyer\nbuzz\ncabbage\ncabin\ncable\ncactus\ncage\ncake\ncall\ncalm\ncamera\ncamp\ncan\ncanal\ncancel\ncandy\ncannon\ncanoe\ncanvas\ncanyon\ncapable\ncapital\ncaptain\ncar\ncarbon\ncard\ncargo\ncarpet\ncarry\ncart\ncase\ncash\ncasino\ncastle\ncasual\ncat\ncatalog\ncatch\ncategory\ncattle\ncaught\ncause\ncaution\ncave\nceiling\ncelery\ncement\ncensus\ncentury\ncereal\ncertain\nchair\nchalk\nchampion\nchange\nchaos\nchapter\ncharge\nchase\nchat\ncheap\ncheck\ncheese\nchef\ncherry\nchest\nchicken\nchief\nchild\nchimney\nchoice\nchoose\nchronic\nchuckle\nchunk\nchurn\ncigar\ncinnamon\ncircle\ncitizen\ncity\ncivil\nclaim\nclap\nclarify\nclaw\nclay\nclean\nclerk\nclever\nclick\nclient\ncliff\nclimb\nclinic\nclip\nclock\nclog\nclose\ncloth\ncloud\nclown\nclub\nclump\ncluster\nclutch\ncoach\ncoast\ncoconut\ncode\ncoffee\ncoil\ncoin\ncollect\ncolor\ncolumn\ncombine\ncome\ncomfort\ncomic\ncommon\ncompany\nconcert\nconduct\nconfirm\ncongress\nconnect\nconsider\ncontrol\nconvince\ncook\ncool\ncopper\ncopy\ncoral\ncore\ncorn\ncorrect\ncost\ncotton\ncouch\ncountry\ncouple\ncourse\ncousin\ncover\ncoyote\ncrack\ncradle\ncraft\ncram\ncrane\ncrash\ncrater\ncrawl\ncrazy\ncream\ncredit\ncreek\ncrew\ncricket\ncrime\ncrisp\ncritic\ncrop\ncross\ncrouch\ncrowd\ncrucial\ncruel\ncruise\ncrumble\ncrunch\ncrush\ncry\ncrystal\ncube\nculture\ncup\ncupboard\ncurious\ncurrent\ncurtain\ncurve\ncushion\ncustom\ncute\ncycle\ndad\ndamage\ndamp\ndance\ndanger\ndaring\ndash\ndaughter\ndawn\nday\ndeal\ndebate\ndebris\ndecade\ndecember\ndecide\ndecline\ndecorate\ndecrease\ndeer\ndefense\ndefine\ndefy\ndegree\ndelay\ndeliver\ndemand\ndemise\ndenial\ndentist\ndeny\ndepart\ndepend\ndeposit\ndepth\ndeputy\nderive\ndescribe\ndesert\ndesign\ndesk\ndespair\ndestroy\ndetail\ndetect\ndevelop\ndevice\ndevote\ndiagram\ndial\ndiamond\ndiary\ndice\ndiesel\ndiet\ndiffer\ndigital\ndignity\ndilemma\ndinner\ndinosaur\ndirect\ndirt\ndisagree\ndiscover\ndisease\ndish\ndismiss\ndisorder\ndisplay\ndistance\ndivert\ndivide\ndivorce\ndizzy\ndoctor\ndocument\ndog\ndoll\ndolphin\ndomain\ndonate\ndonkey\ndonor\ndoor\ndose\ndouble\ndove\ndraft\ndragon\ndrama\ndrastic\ndraw\ndream\ndress\ndrift\ndrill\ndrink\ndrip\ndrive\ndrop\ndrum\ndry\nduck\ndumb\ndune\nduring\ndust\ndutch\nduty\ndwarf\ndynamic\neager\neagle\nearly\nearn\nearth\neasily\neast\neasy\necho\necology\neconomy\nedge\nedit\neducate\neffort\negg\neight\neither\nelbow\nelder\nelectric\nelegant\nelement\nelephant\nelevator\nelite\nelse\nembark\nembody\nembrace\nemerge\nemotion\nemploy\nempower\nempty\nenable\nenact\nend\nendless\nendorse\nenemy\nenergy\nenforce\nengage\nengine\nenhance\nenjoy\nenlist\nenough\nenrich\nenroll\nensure\nenter\nentire\nentry\nenvelope\nepisode\nequal\nequip\nera\nerase\nerode\nerosion\nerror\nerupt\nescape\nessay\nessence\nestate\neternal\nethics\nevidence\nevil\nevoke\nevolve\nexact\nexample\nexcess\nexchange\nexcite\nexclude\nexcuse\nexecute\nexercise\nexhaust\nexhibit\nexile\nexist\nexit\nexotic\nexpand\nexpect\nexpire\nexplain\nexpose\nexpress\nextend\nextra\neye\neyebrow\nfabric\nface\nfaculty\nfade\nfaint\nfaith\nfall\nfalse\nfame\nfamily\nfamous\nfan\nfancy\nfantasy\nfarm\nfashion\nfat\nfatal\nfather\nfatigue\nfault\nfavorite\nfeature\nfebruary\nfederal\nfee\nfeed\nfeel\nfemale\nfence\nfestival\nfetch\nfever\nfew\nfiber\nfiction\nfield\nfigure\nfile\nfilm\nfilter\nfinal\nfind\nfine\nfinger\nfinish\nfire\nfirm\nfirst\nfiscal\nfish\nfit\nfitness\nfix\nflag\nflame\nflash\nflat\nflavor\nflee\nflight\nflip\nfloat\nflock\nfloor\nflower\nfluid\nflush\nfly\nfoam\nfocus\nfog\nfoil\nfold\nfollow\nfood\nfoot\nforce\nforest\nforget\nfork\nfortune\nforum\nforward\nfossil\nfoster\nfound\nfox\nfragile\nframe\nfrequent\nfresh\nfriend\nfringe\nfrog\nfront\nfrost\nfrown\nfrozen\nfruit\nfuel\nfun\nfunny\nfurnace\nfury\nfuture\ngadget\ngain\ngalaxy\ngallery\ngame\ngap\ngarage\ngarbage\ngarden\ngarlic\ngarment\ngas\ngasp\ngate\ngather\ngauge\ngaze\ngeneral\ngenius\ngenre\ngentle\ngenuine\ngesture\nghost\ngiant\ngift\ngiggle\nginger\ngiraffe\ngirl\ngive\nglad\nglance\nglare\nglass\nglide\nglimpse\nglobe\ngloom\nglory\nglove\nglow\nglue\ngoat\ngoddess\ngold\ngood\ngoose\ngorilla\ngospel\ngossip\ngovern\ngown\ngrab\ngrace\ngrain\ngrant\ngrape\ngrass\ngravity\ngreat\ngreen\ngrid\ngrief\ngrit\ngrocery\ngroup\ngrow\ngrunt\nguard\nguess\nguide\nguilt\nguitar\ngun\ngym\nhabit\nhair\nhalf\nhammer\nhamster\nhand\nhappy\nharbor\nhard\nharsh\nharvest\nhat\nhave\nhawk\nhazard\nhead\nhealth\nheart\nheavy\nhedgehog\nheight\nhello\nhelmet\nhelp\nhen\nhero\nhidden\nhigh\nhill\nhint\nhip\nhire\nhistory\nhobby\nhockey\nhold\nhole\nholiday\nhollow\nhome\nhoney\nhood\nhope\nhorn\nhorror\nhorse\nhospital\nhost\nhotel\nhour\nhover\nhub\nhuge\nhuman\nhumble\nhumor\nhundred\nhungry\nhunt\nhurdle\nhurry\nhurt\nhusband\nhybrid\nice\nicon\nidea\nidentify\nidle\nignore\nill\nillegal\nillness\nimage\nimitate\nimmense\nimmune\nimpact\nimpose\nimprove\nimpulse\ninch\ninclude\nincome\nincrease\nindex\nindicate\nindoor\nindustry\ninfant\ninflict\ninform\ninhale\ninherit\ninitial\ninject\ninjury\ninmate\ninner\ninnocent\ninput\ninquiry\ninsane\ninsect\ninside\ninspire\ninstall\nintact\ninterest\ninto\ninvest\ninvite\ninvolve\niron\nisland\nisolate\nissue\nitem\nivory\njacket\njaguar\njar\njazz\njealous\njeans\njelly\njewel\njob\njoin\njoke\njourney\njoy\njudge\njuice\njump\njungle\njunior\njunk\njust\nkangaroo\nkeen\nkeep\nketchup\nkey\nkick\nkid\nkidney\nkind\nkingdom\nkiss\nkit\nkitchen\nkite\nkitten\nkiwi\nknee\nknife\nknock\nknow\nlab\nlabel\nlabor\nladder\nlady\nlake\nlamp\nlanguage\nlaptop\nlarge\nlater\nlatin\nlaugh\nlaundry\nlava\nlaw\nlawn\nlawsuit\nlayer\nlazy\nleader\nleaf\nlearn\nleave\nlecture\nleft\nleg\nlegal\nlegend\nleisure\nlemon\nlend\nlength\nlens\nleopard\nlesson\nletter\nlevel\nliar\nliberty\nlibrary\nlicense\nlife\nlift\nlight\nlike\nlimb\nlimit\nlink\nlion\nliquid\nlist\nlittle\nlive\nlizard\nload\nloan\nlobster\nlocal\nlock\nlogic\nlonely\nlong\nloop\nlottery\nloud\nlounge\nlove\nloyal\nlucky\nluggage\nlumber\nlunar\nlunch\nluxury\nlyrics\nmachine\nmad\nmagic\nmagnet\nmaid\nmail\nmain\nmajor\nmake\nmammal\nman\nmanage\nmandate\nmango\nmansion\nmanual\nmaple\nmarble\nmarch\nmargin\nmarine\nmarket\nmarriage\nmask\nmass\nmaster\nmatch\nmaterial\nmath\nmatrix\nmatter\nmaximum\nmaze\nmeadow\nmean\nmeasure\nmeat\nmechanic\nmedal\nmedia\nmelody\nmelt\nmember\nmemory\nmention\nmenu\nmercy\nmerge\nmerit\nmerry\nmesh\nmessage\nmetal\nmethod\nmiddle\nmidnight\nmilk\nmillion\nmimic\nmind\nminimum\nminor\nminute\nmiracle\nmirror\nmisery\nmiss\nmistake\nmix\nmixed\nmixture\nmobile\nmodel\nmodify\nmom\nmoment\nmonitor\nmonkey\nmonster\nmonth\nmoon\nmoral\nmore\nmorning\nmosquito\nmother\nmotion\nmotor\nmountain\nmouse\nmove\nmovie\nmuch\nmuffin\nmule\nmultiply\nmuscle\nmuseum\nmushroom\nmusic\nmust\nmutual\nmyself\nmystery\nmyth\nnaive\nname\nnapkin\nnarrow\nnasty\nnation\nnature\nnear\nneck\nneed\nnegative\nneglect\nneither\nnephew\nnerve\nnest\nnet\nnetwork\nneutral\nnever\nnews\nnext\nnice\nnight\nnoble\nnoise\nnominee\nnoodle\nnormal\nnorth\nnose\nnotable\nnote\nnothing\nnotice\nnovel\nnow\nnuclear\nnumber\nnurse\nnut\noak\nobey\nobject\noblige\nobscure\nobserve\nobtain\nobvious\noccur\nocean\noctober\nodor\noff\noffer\noffice\noften\noil\nokay\nold\nolive\nolympic\nomit\nonce\none\nonion\nonline\nonly\nopen\nopera\nopinion\noppose\noption\norange\norbit\norchard\norder\nordinary\norgan\norient\noriginal\norphan\nostrich\nother\noutdoor\nouter\noutput\noutside\noval\noven\nover\nown\nowner\noxygen\noyster\nozone\npact\npaddle\npage\npair\npalace\npalm\npanda\npanel\npanic\npanther\npaper\nparade\nparent\npark\nparrot\nparty\npass\npatch\npath\npatient\npatrol\npattern\npause\npave\npayment\npeace\npeanut\npear\npeasant\npelican\npen\npenalty\npencil\npeople\npepper\nperfect\npermit\nperson\npet\nphone\nphoto\nphrase\nphysical\npiano\npicnic\npicture\npiece\npig\npigeon\npill\npilot\npink\npioneer\npipe\npistol\npitch\npizza\nplace\nplanet\nplastic\nplate\nplay\nplease\npledge\npluck\nplug\nplunge\npoem\npoet\npoint\npolar\npole\npolice\npond\npony\npool\npopular\nportion\nposition\npossible\npost\npotato\npottery\npoverty\npowder\npower\npractice\npraise\npredict\nprefer\nprepare\npresent\npretty\nprevent\nprice\npride\nprimary\nprint\npriority\nprison\nprivate\nprize\nproblem\nprocess\nproduce\nprofit\nprogram\nproject\npromote\nproof\nproperty\nprosper\nprotect\nproud\nprovide\npublic\npudding\npull\npulp\npulse\npumpkin\npunch\npupil\npuppy\npurchase\npurity\npurpose\npurse\npush\nput\npuzzle\npyramid\nquality\nquantum\nquarter\nquestion\nquick\nquit\nquiz\nquote\nrabbit\nraccoon\nrace\nrack\nradar\nradio\nrail\nrain\nraise\nrally\nramp\nranch\nrandom\nrange\nrapid\nrare\nrate\nrather\nraven\nraw\nrazor\nready\nreal\nreason\nrebel\nrebuild\nrecall\nreceive\nrecipe\nrecord\nrecycle\nreduce\nreflect\nreform\nrefuse\nregion\nregret\nregular\nreject\nrelax\nrelease\nrelief\nrely\nremain\nremember\nremind\nremove\nrender\nrenew\nrent\nreopen\nrepair\nrepeat\nreplace\nreport\nrequire\nrescue\nresemble\nresist\nresource\nresponse\nresult\nretire\nretreat\nreturn\nreunion\nreveal\nreview\nreward\nrhythm\nrib\nribbon\nrice\nrich\nride\nridge\nrifle\nright\nrigid\nring\nriot\nripple\nrisk\nritual\nrival\nriver\nroad\nroast\nrobot\nrobust\nrocket\nromance\nroof\nrookie\nroom\nrose\nrotate\nrough\nround\nroute\nroyal\nrubber\nrude\nrug\nrule\nrun\nrunway\nrural\nsad\nsaddle\nsadness\nsafe\nsail\nsalad\nsalmon\nsalon\nsalt\nsalute\nsame\nsample\nsand\nsatisfy\nsatoshi\nsauce\nsausage\nsave\nsay\nscale\nscan\nscare\nscatter\nscene\nscheme\nschool\nscience\nscissors\nscorpion\nscout\nscrap\nscreen\nscript\nscrub\nsea\nsearch\nseason\nseat\nsecond\nsecret\nsection\nsecurity\nseed\nseek\nsegment\nselect\nsell\nseminar\nsenior\nsense\nsentence\nseries\nservice\nsession\nsettle\nsetup\nseven\nshadow\nshaft\nshallow\nshare\nshed\nshell\nsheriff\nshield\nshift\nshine\nship\nshiver\nshock\nshoe\nshoot\nshop\nshort\nshoulder\nshove\nshrimp\nshrug\nshuffle\nshy\nsibling\nsick\nside\nsiege\nsight\nsign\nsilent\nsilk\nsilly\nsilver\nsimilar\nsimple\nsince\nsing\nsiren\nsister\nsituate\nsix\nsize\nskate\nsketch\nski\nskill\nskin\nskirt\nskull\nslab\nslam\nsleep\nslender\nslice\nslide\nslight\nslim\nslogan\nslot\nslow\nslush\nsmall\nsmart\nsmile\nsmoke\nsmooth\nsnack\nsnake\nsnap\nsniff\nsnow\nsoap\nsoccer\nsocial\nsock\nsoda\nsoft\nsolar\nsoldier\nsolid\nsolution\nsolve\nsomeone\nsong\nsoon\nsorry\nsort\nsoul\nsound\nsoup\nsource\nsouth\nspace\nspare\nspatial\nspawn\nspeak\nspecial\nspeed\nspell\nspend\nsphere\nspice\nspider\nspike\nspin\nspirit\nsplit\nspoil\nsponsor\nspoon\nsport\nspot\nspray\nspread\nspring\nspy\nsquare\nsqueeze\nsquirrel\nstable\nstadium\nstaff\nstage\nstairs\nstamp\nstand\nstart\nstate\nstay\nsteak\nsteel\nstem\nstep\nstereo\nstick\nstill\nsting\nstock\nstomach\nstone\nstool\nstory\nstove\nstrategy\nstreet\nstrike\nstrong\nstruggle\nstudent\nstuff\nstumble\nstyle\nsubject\nsubmit\nsubway\nsuccess\nsuch\nsudden\nsuffer\nsugar\nsuggest\nsuit\nsummer\nsun\nsunny\nsunset\nsuper\nsupply\nsupreme\nsure\nsurface\nsurge\nsurprise\nsurround\nsurvey\nsuspect\nsustain\nswallow\nswamp\nswap\nswarm\nswear\nsweet\nswift\nswim\nswing\nswitch\nsword\nsymbol\nsymptom\nsyrup\nsystem\ntable\ntackle\ntag\ntail\ntalent\ntalk\ntank\ntape\ntarget\ntask\ntaste\ntattoo\ntaxi\nteach\nteam\ntell\nten\ntenant\ntennis\ntent\nterm\ntest\ntext\nthank\nthat\ntheme\nthen\ntheory\nthere\nthey\nthing\nthis\nthought\nthree\nthrive\nthrow\nthumb\nthunder\nticket\ntide\ntiger\ntilt\ntimber\ntime\ntiny\ntip\ntired\ntissue\ntitle\ntoast\ntobacco\ntoday\ntoddler\ntoe\ntogether\ntoilet\ntoken\ntomato\ntomorrow\ntone\ntongue\ntonight\ntool\ntooth\ntop\ntopic\ntopple\ntorch\ntornado\ntortoise\ntoss\ntotal\ntourist\ntoward\ntower\ntown\ntoy\ntrack\ntrade\ntraffic\ntragic\ntrain\ntransfer\ntrap\ntrash\ntravel\ntray\ntreat\ntree\ntrend\ntrial\ntribe\ntrick\ntrigger\ntrim\ntrip\ntrophy\ntrouble\ntruck\ntrue\ntruly\ntrumpet\ntrust\ntruth\ntry\ntube\ntuition\ntumble\ntuna\ntunnel\nturkey\nturn\nturtle\ntwelve\ntwenty\ntwice\ntwin\ntwist\ntwo\ntype\ntypical\nugly\numbrella\nunable\nunaware\nuncle\nuncover\nunder\nundo\nunfair\nunfold\nunhappy\nuniform\nunique\nunit\nuniverse\nunknown\nunlock\nuntil\nunusual\nunveil\nupdate\nupgrade\nuphold\nupon\nupper\nupset\nurban\nurge\nusage\nuse\nused\nuseful\nuseless\nusual\nutility\nvacant\nvacuum\nvague\nvalid\nvalley\nvalve\nvan\nvanish\nvapor\nvarious\nvast\nvault\nvehicle\nvelvet\nvendor\nventure\nvenue\nverb\nverify\nversion\nvery\nvessel\nveteran\nviable\nvibrant\nvicious\nvictory\nvideo\nview\nvillage\nvintage\nviolin\nvirtual\nvirus\nvisa\nvisit\nvisual\nvital\nvivid\nvocal\nvoice\nvoid\nvolcano\nvolume\nvote\nvoyage\nwage\nwagon\nwait\nwalk\nwall\nwalnut\nwant\nwarfare\nwarm\nwarrior\nwash\nwasp\nwaste\nwater\nwave\nway\nwealth\nweapon\nwear\nweasel\nweather\nweb\nwedding\nweekend\nweird\nwelcome\nwest\nwet\nwhale\nwhat\nwheat\nwheel\nwhen\nwhere\nwhip\nwhisper\nwide\nwidth\nwife\nwild\nwill\nwin\nwindow\nwine\nwing\nwink\nwinner\nwinter\nwire\nwisdom\nwise\nwish\nwitness\nwolf\nwoman\nwonder\nwood\nwool\nword\nwork\nworld\nworry\nworth\nwrap\nwreck\nwrestle\nwrist\nwrite\nwrong\nyard\nyear\nyellow\nyou\nyoung\nyouth\nzebra\nzero\nzone\nzoo".split("\n"));function de(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`Wrong positive integer: ${n}`)}function pe(n,...e){if(!((t=n)instanceof Uint8Array||null!=t&&"object"==typeof t&&"Uint8Array"===t.constructor.name))throw new Error("Expected Uint8Array");var t;if(e.length>0&&!e.includes(n.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${n.length}`)}function ge(n){if("function"!=typeof n||"function"!=typeof n.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");de(n.outputLen),de(n.blockLen)}function ye(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function we(n,e){pe(n);const t=e.outputLen;if(n.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const be={number:de,bool:function(n){if("boolean"!=typeof n)throw new Error(`Expected boolean, not ${n}`)},bytes:pe,hash:ge,exists:ye,output:we},me="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;const Ee=n=>new DataView(n.buffer,n.byteOffset,n.byteLength),ve=(n,e)=>n<<32-e|n>>>e;if(68!==new Uint8Array(new Uint32Array([287454020]).buffer)[0])throw new Error("Non little-endian hardware is not supported");function xe(n){if("string"==typeof n&&(n=function(n){if("string"!=typeof n)throw new Error("utf8ToBytes expected string, got "+typeof n);return new Uint8Array((new TextEncoder).encode(n))}(n)),!((e=n)instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name))throw new Error("expected Uint8Array, got "+typeof n);var e;return n}class Ae{clone(){return this._cloneInto()}}const Be={}.toString;function ke(n){const e=e=>n().update(xe(e)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}class Ie extends Ae{constructor(n,e){super(),this.finished=!1,this.destroyed=!1,ge(n);const t=xe(e);if(this.iHash=n.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,i=new Uint8Array(r);i.set(t.length>r?n.create().update(t).digest():t);for(let n=0;n<i.length;n++)i[n]^=54;this.iHash.update(i),this.oHash=n.create();for(let n=0;n<i.length;n++)i[n]^=106;this.oHash.update(i),i.fill(0)}update(n){return ye(this),this.iHash.update(n),this}digestInto(n){ye(this),pe(n,this.outputLen),this.finished=!0,this.iHash.digestInto(n),this.oHash.update(n),this.oHash.digestInto(n),this.destroy()}digest(){const n=new Uint8Array(this.oHash.outputLen);return this.digestInto(n),n}_cloneInto(n){n||(n=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:t,finished:r,destroyed:i,blockLen:o,outputLen:s}=this;return n.finished=r,n.destroyed=i,n.blockLen=o,n.outputLen=s,n.oHash=e._cloneInto(n.oHash),n.iHash=t._cloneInto(n.iHash),n}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Se=(n,e,t)=>new Ie(n,e).update(t).digest();Se.create=(n,e)=>new Ie(n,e);class Ue extends Ae{constructor(n,e,t,r){super(),this.blockLen=n,this.outputLen=e,this.padOffset=t,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(n),this.view=Ee(this.buffer)}update(n){ye(this);const{view:e,buffer:t,blockLen:r}=this,i=(n=xe(n)).length;for(let o=0;o<i;){const s=Math.min(r-this.pos,i-o);if(s!==r)t.set(n.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===r&&(this.process(e,0),this.pos=0);else{const e=Ee(n);for(;r<=i-o;o+=r)this.process(e,o)}}return this.length+=n.length,this.roundClean(),this}digestInto(n){ye(this),we(n,this),this.finished=!0;const{buffer:e,view:t,blockLen:r,isLE:i}=this;let{pos:o}=this;e[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>r-o&&(this.process(t,0),o=0);for(let n=o;n<r;n++)e[n]=0;!function(n,e,t,r){if("function"==typeof n.setBigUint64)return n.setBigUint64(e,t,r);const i=BigInt(32),o=BigInt(4294967295),s=Number(t>>i&o),a=Number(t&o),c=r?4:0,l=r?0:4;n.setUint32(e+c,s,r),n.setUint32(e+l,a,r)}(t,r-8,BigInt(8*this.length),i),this.process(t,0);const s=Ee(n),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=a/4,l=this.get();if(c>l.length)throw new Error("_sha2: outputLen bigger than state");for(let n=0;n<c;n++)s.setUint32(4*n,l[n],i)}digest(){const{buffer:n,outputLen:e}=this;this.digestInto(n);const t=n.slice(0,e);return this.destroy(),t}_cloneInto(n){n||(n=new this.constructor),n.set(...this.get());const{blockLen:e,buffer:t,length:r,finished:i,destroyed:o,pos:s}=this;return n.length=r,n.pos=s,n.finished=i,n.destroyed=o,r%e&&n.buffer.set(t),n}}const Le=(n,e,t)=>n&e^n&t^e&t,Oe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),He=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ce=new Uint32Array(64);class Ne extends Ue{constructor(){super(64,32,8,!1),this.A=0|He[0],this.B=0|He[1],this.C=0|He[2],this.D=0|He[3],this.E=0|He[4],this.F=0|He[5],this.G=0|He[6],this.H=0|He[7]}get(){const{A:n,B:e,C:t,D:r,E:i,F:o,G:s,H:a}=this;return[n,e,t,r,i,o,s,a]}set(n,e,t,r,i,o,s,a){this.A=0|n,this.B=0|e,this.C=0|t,this.D=0|r,this.E=0|i,this.F=0|o,this.G=0|s,this.H=0|a}process(n,e){for(let t=0;t<16;t++,e+=4)Ce[t]=n.getUint32(e,!1);for(let n=16;n<64;n++){const e=Ce[n-15],t=Ce[n-2],r=ve(e,7)^ve(e,18)^e>>>3,i=ve(t,17)^ve(t,19)^t>>>10;Ce[n]=i+Ce[n-7]+r+Ce[n-16]|0}let{A:t,B:r,C:i,D:o,E:s,F:a,G:c,H:l}=this;for(let n=0;n<64;n++){const e=l+(ve(s,6)^ve(s,11)^ve(s,25))+((u=s)&a^~u&c)+Oe[n]+Ce[n]|0,h=(ve(t,2)^ve(t,13)^ve(t,22))+Le(t,r,i)|0;l=c,c=a,a=s,s=o+e|0,o=i,i=r,r=t,t=e+h|0}var u;t=t+this.A|0,r=r+this.B|0,i=i+this.C|0,o=o+this.D|0,s=s+this.E|0,a=a+this.F|0,c=c+this.G|0,l=l+this.H|0,this.set(t,r,i,o,s,a,c,l)}roundClean(){Ce.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const _e=ke((()=>new Ne)),Re=BigInt(2**32-1),$e=BigInt(32);function qe(n,e=!1){return e?{h:Number(n&Re),l:Number(n>>$e&Re)}:{h:0|Number(n>>$e&Re),l:0|Number(n&Re)}}const Te=function(n,e=!1){let t=new Uint32Array(n.length),r=new Uint32Array(n.length);for(let i=0;i<n.length;i++){const{h:o,l:s}=qe(n[i],e);[t[i],r[i]]=[o,s]}return[t,r]},Ke=(n,e,t)=>n>>>t,ze=(n,e,t)=>n<<32-t|e>>>t,Pe=(n,e,t)=>n>>>t|e<<32-t,je=(n,e,t)=>n<<32-t|e>>>t,Fe=(n,e,t)=>n<<64-t|e>>>t-32,De=(n,e,t)=>n>>>t-32|e<<64-t,Ve=function(n,e,t,r){const i=(e>>>0)+(r>>>0);return{h:n+t+(i/2**32|0)|0,l:0|i}},Me=(n,e,t)=>(n>>>0)+(e>>>0)+(t>>>0),Ge=(n,e,t,r)=>e+t+r+(n/2**32|0)|0,Ze=(n,e,t,r)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0),We=(n,e,t,r,i)=>e+t+r+i+(n/2**32|0)|0,Ye=(n,e,t,r,i,o)=>e+t+r+i+o+(n/2**32|0)|0,Je=(n,e,t,r,i)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0),[Qe,Xe]=(()=>Te(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((n=>BigInt(n)))))(),nt=new Uint32Array(80),et=new Uint32Array(80);class tt extends Ue{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:n,Al:e,Bh:t,Bl:r,Ch:i,Cl:o,Dh:s,Dl:a,Eh:c,El:l,Fh:u,Fl:h,Gh:f,Gl:d,Hh:p,Hl:g}=this;return[n,e,t,r,i,o,s,a,c,l,u,h,f,d,p,g]}set(n,e,t,r,i,o,s,a,c,l,u,h,f,d,p,g){this.Ah=0|n,this.Al=0|e,this.Bh=0|t,this.Bl=0|r,this.Ch=0|i,this.Cl=0|o,this.Dh=0|s,this.Dl=0|a,this.Eh=0|c,this.El=0|l,this.Fh=0|u,this.Fl=0|h,this.Gh=0|f,this.Gl=0|d,this.Hh=0|p,this.Hl=0|g}process(n,e){for(let t=0;t<16;t++,e+=4)nt[t]=n.getUint32(e),et[t]=n.getUint32(e+=4);for(let n=16;n<80;n++){const e=0|nt[n-15],t=0|et[n-15],r=Pe(e,t,1)^Pe(e,t,8)^Ke(e,t,7),i=je(e,t,1)^je(e,t,8)^ze(e,t,7),o=0|nt[n-2],s=0|et[n-2],a=Pe(o,s,19)^Fe(o,s,61)^Ke(o,s,6),c=je(o,s,19)^De(o,s,61)^ze(o,s,6),l=Ze(i,c,et[n-7],et[n-16]),u=We(l,r,a,nt[n-7],nt[n-16]);nt[n]=0|u,et[n]=0|l}let{Ah:t,Al:r,Bh:i,Bl:o,Ch:s,Cl:a,Dh:c,Dl:l,Eh:u,El:h,Fh:f,Fl:d,Gh:p,Gl:g,Hh:y,Hl:w}=this;for(let n=0;n<80;n++){const e=Pe(u,h,14)^Pe(u,h,18)^Fe(u,h,41),b=je(u,h,14)^je(u,h,18)^De(u,h,41),m=u&f^~u&p,E=Je(w,b,h&d^~h&g,Xe[n],et[n]),v=Ye(E,y,e,m,Qe[n],nt[n]),x=0|E,A=Pe(t,r,28)^Fe(t,r,34)^Fe(t,r,39),B=je(t,r,28)^De(t,r,34)^De(t,r,39),k=t&i^t&s^i&s,I=r&o^r&a^o&a;y=0|p,w=0|g,p=0|f,g=0|d,f=0|u,d=0|h,({h:u,l:h}=Ve(0|c,0|l,0|v,0|x)),c=0|s,l=0|a,s=0|i,a=0|o,i=0|t,o=0|r;const S=Me(x,B,I);t=Ge(S,v,A,k),r=0|S}({h:t,l:r}=Ve(0|this.Ah,0|this.Al,0|t,0|r)),({h:i,l:o}=Ve(0|this.Bh,0|this.Bl,0|i,0|o)),({h:s,l:a}=Ve(0|this.Ch,0|this.Cl,0|s,0|a)),({h:c,l}=Ve(0|this.Dh,0|this.Dl,0|c,0|l)),({h:u,l:h}=Ve(0|this.Eh,0|this.El,0|u,0|h)),({h:f,l:d}=Ve(0|this.Fh,0|this.Fl,0|f,0|d)),({h:p,l:g}=Ve(0|this.Gh,0|this.Gl,0|p,0|g)),({h:y,l:w}=Ve(0|this.Hh,0|this.Hl,0|y,0|w)),this.set(t,r,i,o,s,a,c,l,u,h,f,d,p,g,y,w)}roundClean(){nt.fill(0),et.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const rt=ke((()=>new tt));function it(n){if("string"!=typeof n)throw new TypeError("Invalid mnemonic type: "+typeof n);return n.normalize("NFKD")}function ot(n){const e=it(n),t=e.split(" ");if(![12,15,18,21,24].includes(t.length))throw new Error("Invalid mnemonic");return{nfkd:e,words:t}}function st(n){be.bytes(n,16,20,24,28,32)}const at=n=>{const e=8-n.length/4;return new Uint8Array([_e(n)[0]>>e<<e])};function ct(n){if(!Array.isArray(n)||2048!==n.length||"string"!=typeof n[0])throw new Error("Worlist: expected array of 2048 strings");return n.forEach((n=>{if("string"!=typeof n)throw new Error(`Wordlist: non-string element: ${n}`)})),te.chain(te.checksum(1,at),te.radix2(11,!0),te.alphabet(n))}function lt(n,e=""){return function(n,e,t){const{c:r,dkLen:i,DK:o,PRF:s,PRFSalt:a}=function(n,e,t,r){ge(n);const i=function(n,e){if(void 0!==e&&"[object Object]"!==Be.call(e))throw new Error("Options should be object or undefined");return Object.assign({dkLen:32,asyncTick:10},e)}(0,r),{c:o,dkLen:s,asyncTick:a}=i;if(de(o),de(s),de(a),o<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const c=xe(e),l=xe(t),u=new Uint8Array(s),h=Se.create(n,c),f=h._cloneInto().update(l);return{c:o,dkLen:s,asyncTick:a,DK:u,PRF:h,PRFSalt:f}}(n,e,t,{c:2048,dkLen:64});let c;const l=new Uint8Array(4),u=Ee(l),h=new Uint8Array(s.outputLen);for(let n=1,e=0;e<i;n++,e+=s.outputLen){const t=o.subarray(e,e+s.outputLen);u.setInt32(0,n,!1),(c=a._cloneInto(c)).update(l).digestInto(h),t.set(h.subarray(0,t.length));for(let n=1;n<r;n++){s._cloneInto(c).update(h).digestInto(h);for(let n=0;n<t.length;n++)t[n]^=h[n]}}return function(n,e,t,r,i){return n.destroy(),e.destroy(),r&&r.destroy(),i.fill(0),t}(s,a,o,c,h)}(rt,ot(n).nfkd,(n=>it(`mnemonic${n}`))(e))}function ut(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`Wrong positive integer: ${n}`)}function ht(n,...e){if(!((t=n)instanceof Uint8Array||null!=t&&"object"==typeof t&&"Uint8Array"===t.constructor.name))throw new Error("Expected Uint8Array");var t;if(e.length>0&&!e.includes(n.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${n.length}`)}function ft(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function dt(n){return n instanceof Uint8Array||null!=n&&"object"==typeof n&&"Uint8Array"===n.constructor.name}const pt=n=>new DataView(n.buffer,n.byteOffset,n.byteLength),gt=(n,e)=>n<<32-e|n>>>e;if(68!==new Uint8Array(new Uint32Array([287454020]).buffer)[0])throw new Error("Non little-endian hardware is not supported");const yt=Array.from({length:256},((n,e)=>e.toString(16).padStart(2,"0")));function wt(n){return n>=48&&n<=57?n-48:n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:void 0}function bt(n){if("string"!=typeof n)throw new Error("utf8ToBytes expected string, got "+typeof n);return new Uint8Array((new TextEncoder).encode(n))}function mt(n){if("string"==typeof n&&(n=bt(n)),!dt(n))throw new Error("expected Uint8Array, got "+typeof n);return n}function Et(...n){let e=0;for(let t=0;t<n.length;t++){const r=n[t];if(!dt(r))throw new Error("Uint8Array expected");e+=r.length}const t=new Uint8Array(e);for(let e=0,r=0;e<n.length;e++){const i=n[e];t.set(i,r),r+=i.length}return t}class vt{clone(){return this._cloneInto()}}function xt(n){const e=e=>n().update(mt(e)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}class At extends vt{constructor(n,e){super(),this.finished=!1,this.destroyed=!1,function(n){if("function"!=typeof n||"function"!=typeof n.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");ut(n.outputLen),ut(n.blockLen)}(n);const t=mt(e);if(this.iHash=n.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,i=new Uint8Array(r);i.set(t.length>r?n.create().update(t).digest():t);for(let n=0;n<i.length;n++)i[n]^=54;this.iHash.update(i),this.oHash=n.create();for(let n=0;n<i.length;n++)i[n]^=106;this.oHash.update(i),i.fill(0)}update(n){return ft(this),this.iHash.update(n),this}digestInto(n){ft(this),ht(n,this.outputLen),this.finished=!0,this.iHash.digestInto(n),this.oHash.update(n),this.oHash.digestInto(n),this.destroy()}digest(){const n=new Uint8Array(this.oHash.outputLen);return this.digestInto(n),n}_cloneInto(n){n||(n=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:t,finished:r,destroyed:i,blockLen:o,outputLen:s}=this;return n.finished=r,n.destroyed=i,n.blockLen=o,n.outputLen=s,n.oHash=e._cloneInto(n.oHash),n.iHash=t._cloneInto(n.iHash),n}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Bt=(n,e,t)=>new At(n,e).update(t).digest();Bt.create=(n,e)=>new At(n,e);class kt extends vt{constructor(n,e,t,r){super(),this.blockLen=n,this.outputLen=e,this.padOffset=t,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(n),this.view=pt(this.buffer)}update(n){ft(this);const{view:e,buffer:t,blockLen:r}=this,i=(n=mt(n)).length;for(let o=0;o<i;){const s=Math.min(r-this.pos,i-o);if(s!==r)t.set(n.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===r&&(this.process(e,0),this.pos=0);else{const e=pt(n);for(;r<=i-o;o+=r)this.process(e,o)}}return this.length+=n.length,this.roundClean(),this}digestInto(n){ft(this),function(n,e){ht(n);const t=e.outputLen;if(n.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}(n,this),this.finished=!0;const{buffer:e,view:t,blockLen:r,isLE:i}=this;let{pos:o}=this;e[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>r-o&&(this.process(t,0),o=0);for(let n=o;n<r;n++)e[n]=0;!function(n,e,t,r){if("function"==typeof n.setBigUint64)return n.setBigUint64(e,t,r);const i=BigInt(32),o=BigInt(4294967295),s=Number(t>>i&o),a=Number(t&o),c=r?4:0,l=r?0:4;n.setUint32(e+c,s,r),n.setUint32(e+l,a,r)}(t,r-8,BigInt(8*this.length),i),this.process(t,0);const s=pt(n),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=a/4,l=this.get();if(c>l.length)throw new Error("_sha2: outputLen bigger than state");for(let n=0;n<c;n++)s.setUint32(4*n,l[n],i)}digest(){const{buffer:n,outputLen:e}=this;this.digestInto(n);const t=n.slice(0,e);return this.destroy(),t}_cloneInto(n){n||(n=new this.constructor),n.set(...this.get());const{blockLen:e,buffer:t,length:r,finished:i,destroyed:o,pos:s}=this;return n.length=r,n.pos=s,n.finished=i,n.destroyed=o,r%e&&n.buffer.set(t),n}}const It=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),St=Uint8Array.from({length:16},((n,e)=>e));let Ut=[St],Lt=[St.map((n=>(9*n+5)%16))];for(let n=0;n<4;n++)for(let e of[Ut,Lt])e.push(e[n].map((n=>It[n])));const Ot=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map((n=>new Uint8Array(n))),Ht=Ut.map(((n,e)=>n.map((n=>Ot[e][n])))),Ct=Lt.map(((n,e)=>n.map((n=>Ot[e][n])))),Nt=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),_t=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),Rt=(n,e)=>n<<e|n>>>32-e;function $t(n,e,t,r){return 0===n?e^t^r:1===n?e&t|~e&r:2===n?(e|~t)^r:3===n?e&r|t&~r:e^(t|~r)}const qt=new Uint32Array(16);class Tt extends kt{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:n,h1:e,h2:t,h3:r,h4:i}=this;return[n,e,t,r,i]}set(n,e,t,r,i){this.h0=0|n,this.h1=0|e,this.h2=0|t,this.h3=0|r,this.h4=0|i}process(n,e){for(let t=0;t<16;t++,e+=4)qt[t]=n.getUint32(e,!0);let t=0|this.h0,r=t,i=0|this.h1,o=i,s=0|this.h2,a=s,c=0|this.h3,l=c,u=0|this.h4,h=u;for(let n=0;n<5;n++){const e=4-n,f=Nt[n],d=_t[n],p=Ut[n],g=Lt[n],y=Ht[n],w=Ct[n];for(let e=0;e<16;e++){const r=Rt(t+$t(n,i,s,c)+qt[p[e]]+f,y[e])+u|0;t=u,u=c,c=0|Rt(s,10),s=i,i=r}for(let n=0;n<16;n++){const t=Rt(r+$t(e,o,a,l)+qt[g[n]]+d,w[n])+h|0;r=h,h=l,l=0|Rt(a,10),a=o,o=t}}this.set(this.h1+s+l|0,this.h2+c+h|0,this.h3+u+r|0,this.h4+t+o|0,this.h0+i+a|0)}roundClean(){qt.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}const Kt=xt((()=>new Tt)),zt=(n,e,t)=>n&e^n&t^e&t,Pt=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),jt=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ft=new Uint32Array(64);class Dt extends kt{constructor(){super(64,32,8,!1),this.A=0|jt[0],this.B=0|jt[1],this.C=0|jt[2],this.D=0|jt[3],this.E=0|jt[4],this.F=0|jt[5],this.G=0|jt[6],this.H=0|jt[7]}get(){const{A:n,B:e,C:t,D:r,E:i,F:o,G:s,H:a}=this;return[n,e,t,r,i,o,s,a]}set(n,e,t,r,i,o,s,a){this.A=0|n,this.B=0|e,this.C=0|t,this.D=0|r,this.E=0|i,this.F=0|o,this.G=0|s,this.H=0|a}process(n,e){for(let t=0;t<16;t++,e+=4)Ft[t]=n.getUint32(e,!1);for(let n=16;n<64;n++){const e=Ft[n-15],t=Ft[n-2],r=gt(e,7)^gt(e,18)^e>>>3,i=gt(t,17)^gt(t,19)^t>>>10;Ft[n]=i+Ft[n-7]+r+Ft[n-16]|0}let{A:t,B:r,C:i,D:o,E:s,F:a,G:c,H:l}=this;for(let n=0;n<64;n++){const e=l+(gt(s,6)^gt(s,11)^gt(s,25))+((u=s)&a^~u&c)+Pt[n]+Ft[n]|0,h=(gt(t,2)^gt(t,13)^gt(t,22))+zt(t,r,i)|0;l=c,c=a,a=s,s=o+e|0,o=i,i=r,r=t,t=e+h|0}var u;t=t+this.A|0,r=r+this.B|0,i=i+this.C|0,o=o+this.D|0,s=s+this.E|0,a=a+this.F|0,c=c+this.G|0,l=l+this.H|0,this.set(t,r,i,o,s,a,c,l)}roundClean(){Ft.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Vt=xt((()=>new Dt)),Mt=BigInt(2**32-1),Gt=BigInt(32);function Zt(n,e=!1){return e?{h:Number(n&Mt),l:Number(n>>Gt&Mt)}:{h:0|Number(n>>Gt&Mt),l:0|Number(n&Mt)}}const Wt=function(n,e=!1){let t=new Uint32Array(n.length),r=new Uint32Array(n.length);for(let i=0;i<n.length;i++){const{h:o,l:s}=Zt(n[i],e);[t[i],r[i]]=[o,s]}return[t,r]},Yt=(n,e,t)=>n>>>t,Jt=(n,e,t)=>n<<32-t|e>>>t,Qt=(n,e,t)=>n>>>t|e<<32-t,Xt=(n,e,t)=>n<<32-t|e>>>t,nr=(n,e,t)=>n<<64-t|e>>>t-32,er=(n,e,t)=>n>>>t-32|e<<64-t,tr=function(n,e,t,r){const i=(e>>>0)+(r>>>0);return{h:n+t+(i/2**32|0)|0,l:0|i}},rr=(n,e,t)=>(n>>>0)+(e>>>0)+(t>>>0),ir=(n,e,t,r)=>e+t+r+(n/2**32|0)|0,or=(n,e,t,r)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0),sr=(n,e,t,r,i)=>e+t+r+i+(n/2**32|0)|0,ar=(n,e,t,r,i,o)=>e+t+r+i+o+(n/2**32|0)|0,cr=(n,e,t,r,i)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0),[lr,ur]=(()=>Wt(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((n=>BigInt(n)))))(),hr=new Uint32Array(80),fr=new Uint32Array(80);class dr extends kt{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:n,Al:e,Bh:t,Bl:r,Ch:i,Cl:o,Dh:s,Dl:a,Eh:c,El:l,Fh:u,Fl:h,Gh:f,Gl:d,Hh:p,Hl:g}=this;return[n,e,t,r,i,o,s,a,c,l,u,h,f,d,p,g]}set(n,e,t,r,i,o,s,a,c,l,u,h,f,d,p,g){this.Ah=0|n,this.Al=0|e,this.Bh=0|t,this.Bl=0|r,this.Ch=0|i,this.Cl=0|o,this.Dh=0|s,this.Dl=0|a,this.Eh=0|c,this.El=0|l,this.Fh=0|u,this.Fl=0|h,this.Gh=0|f,this.Gl=0|d,this.Hh=0|p,this.Hl=0|g}process(n,e){for(let t=0;t<16;t++,e+=4)hr[t]=n.getUint32(e),fr[t]=n.getUint32(e+=4);for(let n=16;n<80;n++){const e=0|hr[n-15],t=0|fr[n-15],r=Qt(e,t,1)^Qt(e,t,8)^Yt(e,t,7),i=Xt(e,t,1)^Xt(e,t,8)^Jt(e,t,7),o=0|hr[n-2],s=0|fr[n-2],a=Qt(o,s,19)^nr(o,s,61)^Yt(o,s,6),c=Xt(o,s,19)^er(o,s,61)^Jt(o,s,6),l=or(i,c,fr[n-7],fr[n-16]),u=sr(l,r,a,hr[n-7],hr[n-16]);hr[n]=0|u,fr[n]=0|l}let{Ah:t,Al:r,Bh:i,Bl:o,Ch:s,Cl:a,Dh:c,Dl:l,Eh:u,El:h,Fh:f,Fl:d,Gh:p,Gl:g,Hh:y,Hl:w}=this;for(let n=0;n<80;n++){const e=Qt(u,h,14)^Qt(u,h,18)^nr(u,h,41),b=Xt(u,h,14)^Xt(u,h,18)^er(u,h,41),m=u&f^~u&p,E=cr(w,b,h&d^~h&g,ur[n],fr[n]),v=ar(E,y,e,m,lr[n],hr[n]),x=0|E,A=Qt(t,r,28)^nr(t,r,34)^nr(t,r,39),B=Xt(t,r,28)^er(t,r,34)^er(t,r,39),k=t&i^t&s^i&s,I=r&o^r&a^o&a;y=0|p,w=0|g,p=0|f,g=0|d,f=0|u,d=0|h,({h:u,l:h}=tr(0|c,0|l,0|v,0|x)),c=0|s,l=0|a,s=0|i,a=0|o,i=0|t,o=0|r;const S=rr(x,B,I);t=ir(S,v,A,k),r=0|S}({h:t,l:r}=tr(0|this.Ah,0|this.Al,0|t,0|r)),({h:i,l:o}=tr(0|this.Bh,0|this.Bl,0|i,0|o)),({h:s,l:a}=tr(0|this.Ch,0|this.Cl,0|s,0|a)),({h:c,l}=tr(0|this.Dh,0|this.Dl,0|c,0|l)),({h:u,l:h}=tr(0|this.Eh,0|this.El,0|u,0|h)),({h:f,l:d}=tr(0|this.Fh,0|this.Fl,0|f,0|d)),({h:p,l:g}=tr(0|this.Gh,0|this.Gl,0|p,0|g)),({h:y,l:w}=tr(0|this.Hh,0|this.Hl,0|y,0|w)),this.set(t,r,i,o,s,a,c,l,u,h,f,d,p,g,y,w)}roundClean(){hr.fill(0),fr.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const pr=xt((()=>new dr));function gr(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`Wrong positive integer: ${n}`)}function yr(n,...e){if(!(n instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(n.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${n.length}`)}const wr={number:gr,bool:function(n){if("boolean"!=typeof n)throw new Error(`Expected boolean, not ${n}`)},bytes:yr,hash:function(n){if("function"!=typeof n||"function"!=typeof n.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");gr(n.outputLen),gr(n.blockLen)},exists:function(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")},output:function(n,e){yr(n);const t=e.outputLen;if(n.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}},br="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,mr=n=>n instanceof Uint8Array,Er=n=>new DataView(n.buffer,n.byteOffset,n.byteLength),vr=(n,e)=>n<<32-e|n>>>e;if(68!==new Uint8Array(new Uint32Array([287454020]).buffer)[0])throw new Error("Non little-endian hardware is not supported");function xr(n){if("string"==typeof n&&(n=function(n){if("string"!=typeof n)throw new Error("utf8ToBytes expected string, got "+typeof n);return new Uint8Array((new TextEncoder).encode(n))}(n)),!mr(n))throw new Error("expected Uint8Array, got "+typeof n);return n}Array.from({length:256},((n,e)=>e.toString(16).padStart(2,"0")));class Ar{clone(){return this._cloneInto()}}function Br(n){const e=e=>n().update(xr(e)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}function kr(n=32){if(br&&"function"==typeof br.getRandomValues)return br.getRandomValues(new Uint8Array(n));throw new Error("crypto.getRandomValues must be defined")}class Ir extends Ar{constructor(n,e,t,r){super(),this.blockLen=n,this.outputLen=e,this.padOffset=t,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(n),this.view=Er(this.buffer)}update(n){wr.exists(this);const{view:e,buffer:t,blockLen:r}=this,i=(n=xr(n)).length;for(let o=0;o<i;){const s=Math.min(r-this.pos,i-o);if(s!==r)t.set(n.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===r&&(this.process(e,0),this.pos=0);else{const e=Er(n);for(;r<=i-o;o+=r)this.process(e,o)}}return this.length+=n.length,this.roundClean(),this}digestInto(n){wr.exists(this),wr.output(n,this),this.finished=!0;const{buffer:e,view:t,blockLen:r,isLE:i}=this;let{pos:o}=this;e[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>r-o&&(this.process(t,0),o=0);for(let n=o;n<r;n++)e[n]=0;!function(n,e,t,r){if("function"==typeof n.setBigUint64)return n.setBigUint64(e,t,r);const i=BigInt(32),o=BigInt(4294967295),s=Number(t>>i&o),a=Number(t&o),c=r?4:0,l=r?0:4;n.setUint32(e+c,s,r),n.setUint32(e+l,a,r)}(t,r-8,BigInt(8*this.length),i),this.process(t,0);const s=Er(n),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=a/4,l=this.get();if(c>l.length)throw new Error("_sha2: outputLen bigger than state");for(let n=0;n<c;n++)s.setUint32(4*n,l[n],i)}digest(){const{buffer:n,outputLen:e}=this;this.digestInto(n);const t=n.slice(0,e);return this.destroy(),t}_cloneInto(n){n||(n=new this.constructor),n.set(...this.get());const{blockLen:e,buffer:t,length:r,finished:i,destroyed:o,pos:s}=this;return n.length=r,n.pos=s,n.finished=i,n.destroyed=o,r%e&&n.buffer.set(t),n}}const Sr=(n,e,t)=>n&e^n&t^e&t,Ur=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Lr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Or=new Uint32Array(64);class Hr extends Ir{constructor(){super(64,32,8,!1),this.A=0|Lr[0],this.B=0|Lr[1],this.C=0|Lr[2],this.D=0|Lr[3],this.E=0|Lr[4],this.F=0|Lr[5],this.G=0|Lr[6],this.H=0|Lr[7]}get(){const{A:n,B:e,C:t,D:r,E:i,F:o,G:s,H:a}=this;return[n,e,t,r,i,o,s,a]}set(n,e,t,r,i,o,s,a){this.A=0|n,this.B=0|e,this.C=0|t,this.D=0|r,this.E=0|i,this.F=0|o,this.G=0|s,this.H=0|a}process(n,e){for(let t=0;t<16;t++,e+=4)Or[t]=n.getUint32(e,!1);for(let n=16;n<64;n++){const e=Or[n-15],t=Or[n-2],r=vr(e,7)^vr(e,18)^e>>>3,i=vr(t,17)^vr(t,19)^t>>>10;Or[n]=i+Or[n-7]+r+Or[n-16]|0}let{A:t,B:r,C:i,D:o,E:s,F:a,G:c,H:l}=this;for(let n=0;n<64;n++){const e=l+(vr(s,6)^vr(s,11)^vr(s,25))+((u=s)&a^~u&c)+Ur[n]+Or[n]|0,h=(vr(t,2)^vr(t,13)^vr(t,22))+Sr(t,r,i)|0;l=c,c=a,a=s,s=o+e|0,o=i,i=r,r=t,t=e+h|0}var u;t=t+this.A|0,r=r+this.B|0,i=i+this.C|0,o=o+this.D|0,s=s+this.E|0,a=a+this.F|0,c=c+this.G|0,l=l+this.H|0,this.set(t,r,i,o,s,a,c,l)}roundClean(){Or.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class Cr extends Hr{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const Nr=Br((()=>new Hr)),_r=(Br((()=>new Cr)),BigInt(0),BigInt(1)),Rr=BigInt(2),$r=n=>n instanceof Uint8Array,qr=Array.from({length:256},((n,e)=>e.toString(16).padStart(2,"0")));function Tr(n){if(!$r(n))throw new Error("Uint8Array expected");let e="";for(let t=0;t<n.length;t++)e+=qr[n[t]];return e}function Kr(n){if("string"!=typeof n)throw new Error("hex string expected, got "+typeof n);return BigInt(""===n?"0":`0x${n}`)}function zr(n){if("string"!=typeof n)throw new Error("hex string expected, got "+typeof n);const e=n.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const t=new Uint8Array(e/2);for(let e=0;e<t.length;e++){const r=2*e,i=n.slice(r,r+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[e]=o}return t}function Pr(n){return Kr(Tr(n))}function jr(n){if(!$r(n))throw new Error("Uint8Array expected");return Kr(Tr(Uint8Array.from(n).reverse()))}function Fr(n,e){return zr(n.toString(16).padStart(2*e,"0"))}function Dr(n,e){return Fr(n,e).reverse()}function Vr(n,e,t){let r;if("string"==typeof e)try{r=zr(e)}catch(t){throw new Error(`${n} must be valid hex string, got "${e}". Cause: ${t}`)}else{if(!$r(e))throw new Error(`${n} must be hex string or Uint8Array`);r=Uint8Array.from(e)}const i=r.length;if("number"==typeof t&&i!==t)throw new Error(`${n} expected ${t} bytes, got ${i}`);return r}function Mr(...n){const e=new Uint8Array(n.reduce(((n,e)=>n+e.length),0));let t=0;return n.forEach((n=>{if(!$r(n))throw new Error("Uint8Array expected");e.set(n,t),t+=n.length})),e}const Gr=n=>(Rr<<BigInt(n-1))-_r,Zr=n=>new Uint8Array(n),Wr=n=>Uint8Array.from(n);function Yr(n,e,t){if("number"!=typeof n||n<2)throw new Error("hashLen must be a number");if("number"!=typeof e||e<2)throw new Error("qByteLen must be a number");if("function"!=typeof t)throw new Error("hmacFn must be a function");let r=Zr(n),i=Zr(n),o=0;const s=()=>{r.fill(1),i.fill(0),o=0},a=(...n)=>t(i,r,...n),c=(n=Zr())=>{i=a(Wr([0]),n),r=a(),0!==n.length&&(i=a(Wr([1]),n),r=a())},l=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let n=0;const t=[];for(;n<e;){r=a();const e=r.slice();t.push(e),n+=r.length}return Mr(...t)};return(n,e)=>{let t;for(s(),c(n);!(t=e(l()));)c();return s(),t}}const Jr={bigint:n=>"bigint"==typeof n,function:n=>"function"==typeof n,boolean:n=>"boolean"==typeof n,string:n=>"string"==typeof n,isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,e)=>e.Fp.isValid(n),hash:n=>"function"==typeof n&&Number.isSafeInteger(n.outputLen)};function Qr(n,e,t={}){const r=(e,t,r)=>{const i=Jr[t];if("function"!=typeof i)throw new Error(`Invalid validator "${t}", expected function`);const o=n[e];if(!(r&&void 0===o||i(o,n)))throw new Error(`Invalid param ${String(e)}=${o} (${typeof o}), expected ${t}`)};for(const[n,t]of Object.entries(e))r(n,t,!1);for(const[n,e]of Object.entries(t))r(n,e,!0);return n}const Xr=BigInt(0),ni=BigInt(1),ei=BigInt(2),ti=BigInt(3),ri=BigInt(4),ii=BigInt(5),oi=BigInt(8);function si(n,e){const t=n%e;return t>=Xr?t:e+t}function ai(n,e,t){if(t<=Xr||e<Xr)throw new Error("Expected power/modulo > 0");if(t===ni)return Xr;let r=ni;for(;e>Xr;)e&ni&&(r=r*n%t),n=n*n%t,e>>=ni;return r}function ci(n,e,t){let r=n;for(;e-- >Xr;)r*=r,r%=t;return r}function li(n,e){if(n===Xr||e<=Xr)throw new Error(`invert: expected positive integers, got n=${n} mod=${e}`);let t=si(n,e),r=e,i=Xr,o=ni,s=ni,a=Xr;for(;t!==Xr;){const n=r/t,e=r%t,c=i-s*n,l=o-a*n;r=t,t=e,i=s,o=a,s=c,a=l}if(r!==ni)throw new Error("invert: does not exist");return si(i,e)}BigInt(9),BigInt(16);const ui=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function hi(n,e){const t=void 0!==e?e:n.toString(2).length;return{nBitLength:t,nByteLength:Math.ceil(t/8)}}const fi=BigInt(0),di=BigInt(1);function pi(n){return Qr(n.Fp,ui.reduce(((n,e)=>(n[e]="function",n)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),Qr(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...hi(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}const{Ph:gi,aT:yi}=t,wi={Err:class extends Error{constructor(n=""){super(n)}},_parseInt(n){const{Err:e}=wi;if(n.length<2||2!==n[0])throw new e("Invalid signature integer tag");const t=n[1],r=n.subarray(2,t+2);if(!t||r.length!==t)throw new e("Invalid signature integer: wrong length");if(128&r[0])throw new e("Invalid signature integer: negative");if(0===r[0]&&!(128&r[1]))throw new e("Invalid signature integer: unnecessary leading zero");return{d:gi(r),l:n.subarray(t+2)}},toSig(n){const{Err:e}=wi,t="string"==typeof n?yi(n):n;if(!(t instanceof Uint8Array))throw new Error("ui8a expected");let r=t.length;if(r<2||48!=t[0])throw new e("Invalid signature tag");if(t[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:i,l:o}=wi._parseInt(t.subarray(2)),{d:s,l:a}=wi._parseInt(o);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s}},hexFromSig(n){const e=n=>8&Number.parseInt(n[0],16)?"00"+n:n,t=n=>{const e=n.toString(16);return 1&e.length?`0${e}`:e},r=e(t(n.s)),i=e(t(n.r)),o=r.length/2,s=i.length/2,a=t(o),c=t(s);return`30${t(s+o+4)}02${c}${i}02${a}${r}`}},bi=BigInt(0),mi=BigInt(1),Ei=(BigInt(2),BigInt(3));function vi(n){const e=function(n){const e=pi(n);return Qr(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}(n),{Fp:t,n:r}=e,i=t.BYTES+1,o=2*t.BYTES+1;function s(n){return si(n,r)}function a(n){return li(n,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:u,isWithinCurveOrder:h}=function(n){const e=function(n){const e=pi(n);Qr(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:t,Fp:r,a:i}=e;if(t){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof t||"bigint"!=typeof t.beta||"function"!=typeof t.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}(n),{Fp:t}=e,r=e.toBytes||((n,e,r)=>{const i=e.toAffine();return Mr(Uint8Array.from([4]),t.toBytes(i.x),t.toBytes(i.y))}),i=e.fromBytes||(n=>{const e=n.subarray(1);return{x:t.fromBytes(e.subarray(0,t.BYTES)),y:t.fromBytes(e.subarray(t.BYTES,2*t.BYTES))}});function o(n){const{a:r,b:i}=e,o=t.sqr(n),s=t.mul(o,n);return t.add(t.add(s,t.mul(n,r)),i)}if(!t.eql(t.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function s(n){return"bigint"==typeof n&&bi<n&&n<e.n}function a(n){if(!s(n))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(n){const{allowedPrivateKeyLengths:t,nByteLength:r,wrapPrivateKey:i,n:o}=e;if(t&&"bigint"!=typeof n){if(n instanceof Uint8Array&&(n=Tr(n)),"string"!=typeof n||!t.includes(n.length))throw new Error("Invalid key");n=n.padStart(2*r,"0")}let s;try{s="bigint"==typeof n?n:Pr(Vr("private key",n,r))}catch(e){throw new Error(`private key must be ${r} bytes, hex or bigint, not ${typeof n}`)}return i&&(s=si(s,o)),a(s),s}const l=new Map;function u(n){if(!(n instanceof h))throw new Error("ProjectivePoint expected")}class h{constructor(n,e,r){if(this.px=n,this.py=e,this.pz=r,null==n||!t.isValid(n))throw new Error("x required");if(null==e||!t.isValid(e))throw new Error("y required");if(null==r||!t.isValid(r))throw new Error("z required")}static fromAffine(n){const{x:e,y:r}=n||{};if(!n||!t.isValid(e)||!t.isValid(r))throw new Error("invalid affine point");if(n instanceof h)throw new Error("projective point not allowed");const i=n=>t.eql(n,t.ZERO);return i(e)&&i(r)?h.ZERO:new h(e,r,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(n){const e=t.invertBatch(n.map((n=>n.pz)));return n.map(((n,t)=>n.toAffine(e[t]))).map(h.fromAffine)}static fromHex(n){const e=h.fromAffine(i(Vr("pointHex",n)));return e.assertValidity(),e}static fromPrivateKey(n){return h.BASE.multiply(c(n))}_setWindowSize(n){this._WINDOW_SIZE=n,l.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint)return;throw new Error("bad point: ZERO")}const{x:n,y:r}=this.toAffine();if(!t.isValid(n)||!t.isValid(r))throw new Error("bad point: x or y not FE");const i=t.sqr(r),s=o(n);if(!t.eql(i,s))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:n}=this.toAffine();if(t.isOdd)return!t.isOdd(n);throw new Error("Field doesn't support isOdd")}equals(n){u(n);const{px:e,py:r,pz:i}=this,{px:o,py:s,pz:a}=n,c=t.eql(t.mul(e,a),t.mul(o,i)),l=t.eql(t.mul(r,a),t.mul(s,i));return c&&l}negate(){return new h(this.px,t.neg(this.py),this.pz)}double(){const{a:n,b:r}=e,i=t.mul(r,Ei),{px:o,py:s,pz:a}=this;let c=t.ZERO,l=t.ZERO,u=t.ZERO,f=t.mul(o,o),d=t.mul(s,s),p=t.mul(a,a),g=t.mul(o,s);return g=t.add(g,g),u=t.mul(o,a),u=t.add(u,u),c=t.mul(n,u),l=t.mul(i,p),l=t.add(c,l),c=t.sub(d,l),l=t.add(d,l),l=t.mul(c,l),c=t.mul(g,c),u=t.mul(i,u),p=t.mul(n,p),g=t.sub(f,p),g=t.mul(n,g),g=t.add(g,u),u=t.add(f,f),f=t.add(u,f),f=t.add(f,p),f=t.mul(f,g),l=t.add(l,f),p=t.mul(s,a),p=t.add(p,p),f=t.mul(p,g),c=t.sub(c,f),u=t.mul(p,d),u=t.add(u,u),u=t.add(u,u),new h(c,l,u)}add(n){u(n);const{px:r,py:i,pz:o}=this,{px:s,py:a,pz:c}=n;let l=t.ZERO,f=t.ZERO,d=t.ZERO;const p=e.a,g=t.mul(e.b,Ei);let y=t.mul(r,s),w=t.mul(i,a),b=t.mul(o,c),m=t.add(r,i),E=t.add(s,a);m=t.mul(m,E),E=t.add(y,w),m=t.sub(m,E),E=t.add(r,o);let v=t.add(s,c);return E=t.mul(E,v),v=t.add(y,b),E=t.sub(E,v),v=t.add(i,o),l=t.add(a,c),v=t.mul(v,l),l=t.add(w,b),v=t.sub(v,l),d=t.mul(p,E),l=t.mul(g,b),d=t.add(l,d),l=t.sub(w,d),d=t.add(w,d),f=t.mul(l,d),w=t.add(y,y),w=t.add(w,y),b=t.mul(p,b),E=t.mul(g,E),w=t.add(w,b),b=t.sub(y,b),b=t.mul(p,b),E=t.add(E,b),y=t.mul(w,E),f=t.add(f,y),y=t.mul(v,E),l=t.mul(m,l),l=t.sub(l,y),y=t.mul(m,w),d=t.mul(v,d),d=t.add(d,y),new h(l,f,d)}subtract(n){return this.add(n.negate())}is0(){return this.equals(h.ZERO)}wNAF(n){return d.wNAFCached(this,l,n,(n=>{const e=t.invertBatch(n.map((n=>n.pz)));return n.map(((n,t)=>n.toAffine(e[t]))).map(h.fromAffine)}))}multiplyUnsafe(n){const r=h.ZERO;if(n===bi)return r;if(a(n),n===mi)return this;const{endo:i}=e;if(!i)return d.unsafeLadder(this,n);let{k1neg:o,k1:s,k2neg:c,k2:l}=i.splitScalar(n),u=r,f=r,p=this;for(;s>bi||l>bi;)s&mi&&(u=u.add(p)),l&mi&&(f=f.add(p)),p=p.double(),s>>=mi,l>>=mi;return o&&(u=u.negate()),c&&(f=f.negate()),f=new h(t.mul(f.px,i.beta),f.py,f.pz),u.add(f)}multiply(n){a(n);let r,i,o=n;const{endo:s}=e;if(s){const{k1neg:n,k1:e,k2neg:a,k2:c}=s.splitScalar(o);let{p:l,f:u}=this.wNAF(e),{p:f,f:p}=this.wNAF(c);l=d.constTimeNegate(n,l),f=d.constTimeNegate(a,f),f=new h(t.mul(f.px,s.beta),f.py,f.pz),r=l.add(f),i=u.add(p)}else{const{p:n,f:e}=this.wNAF(o);r=n,i=e}return h.normalizeZ([r,i])[0]}multiplyAndAddUnsafe(n,e,t){const r=h.BASE,i=(n,e)=>e!==bi&&e!==mi&&n.equals(r)?n.multiply(e):n.multiplyUnsafe(e),o=i(this,e).add(i(n,t));return o.is0()?void 0:o}toAffine(n){const{px:e,py:r,pz:i}=this,o=this.is0();null==n&&(n=o?t.ONE:t.inv(i));const s=t.mul(e,n),a=t.mul(r,n),c=t.mul(i,n);if(o)return{x:t.ZERO,y:t.ZERO};if(!t.eql(c,t.ONE))throw new Error("invZ was invalid");return{x:s,y:a}}isTorsionFree(){const{h:n,isTorsionFree:t}=e;if(n===mi)return!0;if(t)return t(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:n,clearCofactor:t}=e;return n===mi?this:t?t(h,this):this.multiplyUnsafe(e.h)}toRawBytes(n=!0){return this.assertValidity(),r(h,this,n)}toHex(n=!0){return Tr(this.toRawBytes(n))}}h.BASE=new h(e.Gx,e.Gy,t.ONE),h.ZERO=new h(t.ZERO,t.ONE,t.ZERO);const f=e.nBitLength,d=function(n,e){const t=(n,e)=>{const t=e.negate();return n?t:e},r=n=>({windows:Math.ceil(e/n)+1,windowSize:2**(n-1)});return{constTimeNegate:t,unsafeLadder(e,t){let r=n.ZERO,i=e;for(;t>fi;)t&di&&(r=r.add(i)),i=i.double(),t>>=di;return r},precomputeWindow(n,e){const{windows:t,windowSize:i}=r(e),o=[];let s=n,a=s;for(let n=0;n<t;n++){a=s,o.push(a);for(let n=1;n<i;n++)a=a.add(s),o.push(a);s=a.double()}return o},wNAF(e,i,o){const{windows:s,windowSize:a}=r(e);let c=n.ZERO,l=n.BASE;const u=BigInt(2**e-1),h=2**e,f=BigInt(e);for(let n=0;n<s;n++){const e=n*a;let r=Number(o&u);o>>=f,r>a&&(r-=h,o+=di);const s=e,d=e+Math.abs(r)-1,p=n%2!=0,g=r<0;0===r?l=l.add(t(p,i[s])):c=c.add(t(g,i[d]))}return{p:c,f:l}},wNAFCached(n,e,t,r){const i=n._WINDOW_SIZE||1;let o=e.get(n);return o||(o=this.precomputeWindow(n,i),1!==i&&e.set(n,r(o))),this.wNAF(i,o,t)}}}(h,e.endo?Math.ceil(f/2):f);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:s}}({...e,toBytes(n,e,r){const i=e.toAffine(),o=t.toBytes(i.x),s=Mr;return r?s(Uint8Array.from([e.hasEvenY()?2:3]),o):s(Uint8Array.from([4]),o,t.toBytes(i.y))},fromBytes(n){const e=n.length,r=n[0],s=n.subarray(1);if(e!==i||2!==r&&3!==r){if(e===o&&4===r)return{x:t.fromBytes(s.subarray(0,t.BYTES)),y:t.fromBytes(s.subarray(t.BYTES,2*t.BYTES))};throw new Error(`Point of length ${e} was invalid. Expected ${i} compressed bytes or ${o} uncompressed bytes`)}{const n=Pr(s);if(!(bi<(a=n)&&a<t.ORDER))throw new Error("Point is not on curve");const e=u(n);let i=t.sqrt(e);return!(1&~r)!=((i&mi)===mi)&&(i=t.neg(i)),{x:n,y:i}}var a}}),f=n=>Tr(Fr(n,e.nByteLength));function d(n){return n>r>>mi}const p=(n,e,t)=>Pr(n.slice(e,t));class g{constructor(n,e,t){this.r=n,this.s=e,this.recovery=t,this.assertValidity()}static fromCompact(n){const t=e.nByteLength;return n=Vr("compactSignature",n,2*t),new g(p(n,0,t),p(n,t,2*t))}static fromDER(n){const{r:e,s:t}=wi.toSig(Vr("DER",n));return new g(e,t)}assertValidity(){if(!h(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(n){return new g(this.r,this.s,n)}recoverPublicKey(n){const{r,s:i,recovery:o}=this,l=m(Vr("msgHash",n));if(null==o||![0,1,2,3].includes(o))throw new Error("recovery id invalid");const u=2===o||3===o?r+e.n:r;if(u>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const h=1&o?"03":"02",d=c.fromHex(h+f(u)),p=a(u),g=s(-l*p),y=s(i*p),w=c.BASE.multiplyAndAddUnsafe(d,g,y);if(!w)throw new Error("point at infinify");return w.assertValidity(),w}hasHighS(){return d(this.s)}normalizeS(){return this.hasHighS()?new g(this.r,s(-this.s),this.recovery):this}toDERRawBytes(){return zr(this.toDERHex())}toDERHex(){return wi.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return zr(this.toCompactHex())}toCompactHex(){return f(this.r)+f(this.s)}}const y={isValidPrivateKey(n){try{return l(n),!0}catch(n){return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>Fr(function(n,e,t=!1){const r=(n=Vr("privateHash",n)).length,i=hi(e).nByteLength+8;if(i<24||r<i||r>1024)throw new Error(`hashToPrivateScalar: expected ${i}-1024 bytes of input, got ${r}`);return si(t?jr(n):Pr(n),e-ni)+ni}(e.randomBytes(t.BYTES+8),r),e.nByteLength),precompute:(n=8,e=c.BASE)=>(e._setWindowSize(n),e.multiply(BigInt(3)),e)};function w(n){const e=n instanceof Uint8Array,t="string"==typeof n,r=(e||t)&&n.length;return e?r===i||r===o:t?r===2*i||r===2*o:n instanceof c}const b=e.bits2int||function(n){const t=Pr(n),r=8*n.length-e.nBitLength;return r>0?t>>BigInt(r):t},m=e.bits2int_modN||function(n){return s(b(n))},E=Gr(e.nBitLength);function v(n){if("bigint"!=typeof n)throw new Error("bigint expected");if(!(bi<=n&&n<E))throw new Error(`bigint expected < 2^${e.nBitLength}`);return Fr(n,e.nByteLength)}const x={lowS:e.lowS,prehash:!1},A={lowS:e.lowS,prehash:!1};return c.BASE._setWindowSize(8),{CURVE:e,getPublicKey:function(n,e=!0){return c.fromPrivateKey(n).toRawBytes(e)},getSharedSecret:function(n,e,t=!0){if(w(n))throw new Error("first arg must be private key");if(!w(e))throw new Error("second arg must be public key");return c.fromHex(e).multiply(l(n)).toRawBytes(t)},sign:function(n,r,i=x){const{seed:o,k2sig:u}=function(n,r,i=x){if(["recovered","canonical"].some((n=>n in i)))throw new Error("sign() legacy options not supported");const{hash:o,randomBytes:u}=e;let{lowS:f,prehash:p,extraEntropy:y}=i;null==f&&(f=!0),n=Vr("msgHash",n),p&&(n=Vr("prehashed msgHash",o(n)));const w=m(n),E=l(r),A=[v(E),v(w)];if(null!=y){const n=!0===y?u(t.BYTES):y;A.push(Vr("extraEntropy",n,t.BYTES))}const B=Mr(...A),k=w;return{seed:B,k2sig:function(n){const e=b(n);if(!h(e))return;const t=a(e),r=c.BASE.multiply(e).toAffine(),i=s(r.x);if(i===bi)return;const o=s(t*s(k+i*E));if(o===bi)return;let l=(r.x===i?0:2)|Number(r.y&mi),u=o;return f&&d(o)&&(u=function(n){return d(n)?s(-n):n}(o),l^=1),new g(i,u,l)}}}(n,r,i),f=e;return Yr(f.hash.outputLen,f.nByteLength,f.hmac)(o,u)},verify:function(n,t,r,i=A){const o=n;if(t=Vr("msgHash",t),r=Vr("publicKey",r),"strict"in i)throw new Error("options.strict was renamed to lowS");const{lowS:l,prehash:u}=i;let h,f;try{if("string"==typeof o||o instanceof Uint8Array)try{h=g.fromDER(o)}catch(n){if(!(n instanceof wi.Err))throw n;h=g.fromCompact(o)}else{if("object"!=typeof o||"bigint"!=typeof o.r||"bigint"!=typeof o.s)throw new Error("PARSE");{const{r:n,s:e}=o;h=new g(n,e)}}f=c.fromHex(r)}catch(n){if("PARSE"===n.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(l&&h.hasHighS())return!1;u&&(t=e.hash(t));const{r:d,s:p}=h,y=m(t),w=a(p),b=s(y*w),E=s(d*w),v=c.BASE.multiplyAndAddUnsafe(f,b,E)?.toAffine();return!!v&&s(v.x)===d},ProjectivePoint:c,Signature:g,utils:y}}BigInt(4);class xi extends Ar{constructor(n,e){super(),this.finished=!1,this.destroyed=!1,wr.hash(n);const t=xr(e);if(this.iHash=n.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,i=new Uint8Array(r);i.set(t.length>r?n.create().update(t).digest():t);for(let n=0;n<i.length;n++)i[n]^=54;this.iHash.update(i),this.oHash=n.create();for(let n=0;n<i.length;n++)i[n]^=106;this.oHash.update(i),i.fill(0)}update(n){return wr.exists(this),this.iHash.update(n),this}digestInto(n){wr.exists(this),wr.bytes(n,this.outputLen),this.finished=!0,this.iHash.digestInto(n),this.oHash.update(n),this.oHash.digestInto(n),this.destroy()}digest(){const n=new Uint8Array(this.oHash.outputLen);return this.digestInto(n),n}_cloneInto(n){n||(n=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:t,finished:r,destroyed:i,blockLen:o,outputLen:s}=this;return n.finished=r,n.destroyed=i,n.blockLen=o,n.outputLen=s,n.oHash=e._cloneInto(n.oHash),n.iHash=t._cloneInto(n.iHash),n}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Ai=(n,e,t)=>new xi(n,e).update(t).digest();function Bi(n){return{hash:n,hmac:(e,...t)=>Ai(n,e,function(...n){const e=new Uint8Array(n.reduce(((n,e)=>n+e.length),0));let t=0;return n.forEach((n=>{if(!mr(n))throw new Error("Uint8Array expected");e.set(n,t),t+=n.length})),e}(...t)),randomBytes:kr}}Ai.create=(n,e)=>new xi(n,e);const ki=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Ii=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Si=BigInt(1),Ui=BigInt(2),Li=(n,e)=>(n+e/Ui)/e;const Oi=function(n,e,t=!1,r={}){if(n<=Xr)throw new Error(`Expected Fp ORDER > 0, got ${n}`);const{nBitLength:i,nByteLength:o}=hi(n,e);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");const s=function(n){if(n%ri===ti){const e=(n+ni)/ri;return function(n,t){const r=n.pow(t,e);if(!n.eql(n.sqr(r),t))throw new Error("Cannot find square root");return r}}if(n%oi===ii){const e=(n-ii)/oi;return function(n,t){const r=n.mul(t,ei),i=n.pow(r,e),o=n.mul(t,i),s=n.mul(n.mul(o,ei),i),a=n.mul(o,n.sub(s,n.ONE));if(!n.eql(n.sqr(a),t))throw new Error("Cannot find square root");return a}}return function(n){const e=(n-ni)/ei;let t,r,i;for(t=n-ni,r=0;t%ei===Xr;t/=ei,r++);for(i=ei;i<n&&ai(i,e,n)!==n-ni;i++);if(1===r){const e=(n+ni)/ri;return function(n,t){const r=n.pow(t,e);if(!n.eql(n.sqr(r),t))throw new Error("Cannot find square root");return r}}const o=(t+ni)/ei;return function(n,s){if(n.pow(s,e)===n.neg(n.ONE))throw new Error("Cannot find square root");let a=r,c=n.pow(n.mul(n.ONE,i),t),l=n.pow(s,o),u=n.pow(s,t);for(;!n.eql(u,n.ONE);){if(n.eql(u,n.ZERO))return n.ZERO;let e=1;for(let t=n.sqr(u);e<a&&!n.eql(t,n.ONE);e++)t=n.sqr(t);const t=n.pow(c,ni<<BigInt(a-e-1));c=n.sqr(t),l=n.mul(l,t),u=n.mul(u,c),a=e}return l}}(n)}(n),a=Object.freeze({ORDER:n,BITS:i,BYTES:o,MASK:Gr(i),ZERO:Xr,ONE:ni,create:e=>si(e,n),isValid:e=>{if("bigint"!=typeof e)throw new Error("Invalid field element: expected bigint, got "+typeof e);return Xr<=e&&e<n},is0:n=>n===Xr,isOdd:n=>(n&ni)===ni,neg:e=>si(-e,n),eql:(n,e)=>n===e,sqr:e=>si(e*e,n),add:(e,t)=>si(e+t,n),sub:(e,t)=>si(e-t,n),mul:(e,t)=>si(e*t,n),pow:(n,e)=>function(n,e,t){if(t<Xr)throw new Error("Expected power > 0");if(t===Xr)return n.ONE;if(t===ni)return e;let r=n.ONE,i=e;for(;t>Xr;)t&ni&&(r=n.mul(r,i)),i=n.sqr(i),t>>=ni;return r}(a,n,e),div:(e,t)=>si(e*li(t,n),n),sqrN:n=>n*n,addN:(n,e)=>n+e,subN:(n,e)=>n-e,mulN:(n,e)=>n*e,inv:e=>li(e,n),sqrt:r.sqrt||(n=>s(a,n)),invertBatch:n=>function(n,e){const t=new Array(e.length),r=e.reduce(((e,r,i)=>n.is0(r)?e:(t[i]=e,n.mul(e,r))),n.ONE),i=n.inv(r);return e.reduceRight(((e,r,i)=>n.is0(r)?e:(t[i]=n.mul(e,t[i]),n.mul(e,r))),i),t}(a,n),cmov:(n,e,t)=>t?e:n,toBytes:n=>t?Dr(n,o):Fr(n,o),fromBytes:n=>{if(n.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${n.length}`);return t?jr(n):Pr(n)}});return Object.freeze(a)}(ki,void 0,void 0,{sqrt:function(n){const e=ki,t=BigInt(3),r=BigInt(6),i=BigInt(11),o=BigInt(22),s=BigInt(23),a=BigInt(44),c=BigInt(88),l=n*n*n%e,u=l*l*n%e,h=ci(u,t,e)*u%e,f=ci(h,t,e)*u%e,d=ci(f,Ui,e)*l%e,p=ci(d,i,e)*d%e,g=ci(p,o,e)*p%e,y=ci(g,a,e)*g%e,w=ci(y,c,e)*y%e,b=ci(w,a,e)*g%e,m=ci(b,t,e)*u%e,E=ci(m,s,e)*p%e,v=ci(E,r,e)*l%e,x=ci(v,Ui,e);if(!Oi.eql(Oi.sqr(x),n))throw new Error("Cannot find square root");return x}}),Hi=function(n,e){const t=e=>vi({...n,...Bi(e)});return Object.freeze({...t(e),create:t})}({a:BigInt(0),b:BigInt(7),Fp:Oi,n:Ii,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{const e=Ii,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Si*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=t,s=BigInt("0x100000000000000000000000000000000"),a=Li(o*n,e),c=Li(-r*n,e);let l=si(n-a*t-c*i,e),u=si(-a*r-c*o,e);const h=l>s,f=u>s;if(h&&(l=e-l),f&&(u=e-u),l>s||u>s)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:h,k1:l,k2neg:f,k2:u}}}},Nr);BigInt(0),Hi.ProjectivePoint;const Ci=Hi.ProjectivePoint,Ni=(_i=Vt,Fn(ee(4,(n=>_i(_i(n)))),oe));var _i;function Ri(n){return BigInt(`0x${function(n){if(!dt(n))throw new Error("Uint8Array expected");let e="";for(let t=0;t<n.length;t++)e+=yt[n[t]];return e}(n)}`)}const $i=bt("Bitcoin seed"),qi={private:76066276,public:76067358},Ti=2147483648,Ki=n=>{if(!Number.isSafeInteger(n)||n<0||n>2**32-1)throw new Error(`Invalid number=${n}. Should be from 0 to 2 ** 32 - 1`);const e=new Uint8Array(4);return pt(e).setUint32(0,n,!1),e};class zi{get fingerprint(){if(!this.pubHash)throw new Error("No publicKey set!");return n=this.pubHash,pt(n).getUint32(0,!1);var n}get identifier(){return this.pubHash}get pubKeyHash(){return this.pubHash}get privateKey(){return this.privKeyBytes||null}get publicKey(){return this.pubKey||null}get privateExtendedKey(){const n=this.privateKey;if(!n)throw new Error("No private key");return Ni.encode(this.serialize(this.versions.private,Et(new Uint8Array([0]),n)))}get publicExtendedKey(){if(!this.pubKey)throw new Error("No public key");return Ni.encode(this.serialize(this.versions.public,this.pubKey))}static fromMasterSeed(n,e=qi){if(ht(n),8*n.length<128||8*n.length>512)throw new Error(`HDKey: wrong seed length=${n.length}. Should be between 128 and 512 bits; 256 bits is advised)`);const t=Bt(pr,$i,n);return new zi({versions:e,chainCode:t.slice(32),privateKey:t.slice(0,32)})}static fromExtendedKey(n,e=qi){const t=Ni.decode(n),r=pt(t),i=r.getUint32(0,!1),o={versions:e,depth:t[4],parentFingerprint:r.getUint32(5,!1),index:r.getUint32(9,!1),chainCode:t.slice(13,45)},s=t.slice(45),a=0===s[0];if(i!==e[a?"private":"public"])throw new Error("Version mismatch");return new zi(a?{...o,privateKey:s.slice(1)}:{...o,publicKey:s})}static fromJSON(n){return zi.fromExtendedKey(n.xpriv)}constructor(n){if(this.depth=0,this.index=0,this.chainCode=null,this.parentFingerprint=0,!n||"object"!=typeof n)throw new Error("HDKey.constructor must not be called directly");if(this.versions=n.versions||qi,this.depth=n.depth||0,this.chainCode=n.chainCode,this.index=n.index||0,this.parentFingerprint=n.parentFingerprint||0,!this.depth&&(this.parentFingerprint||this.index))throw new Error("HDKey: zero depth with non-zero index/parent fingerprint");if(n.publicKey&&n.privateKey)throw new Error("HDKey: publicKey and privateKey at same time.");if(n.privateKey){if(!Hi.utils.isValidPrivateKey(n.privateKey))throw new Error("Invalid private key");this.privKey="bigint"==typeof n.privateKey?n.privateKey:Ri(n.privateKey),this.privKeyBytes=function(n){if("string"!=typeof n)throw new Error("hex string expected, got "+typeof n);const e=n.length,t=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(t);for(let e=0,i=0;e<t;e++,i+=2){const t=wt(n.charCodeAt(i)),o=wt(n.charCodeAt(i+1));if(void 0===t||void 0===o){const e=n[i]+n[i+1];throw new Error('hex string expected, got non-hex character "'+e+'" at index '+i)}r[e]=16*t+o}return r}(this.privKey.toString(16).padStart(64,"0")),this.pubKey=Hi.getPublicKey(n.privateKey,!0)}else{if(!n.publicKey)throw new Error("HDKey: no public or private key provided");this.pubKey=Ci.fromHex(n.publicKey).toRawBytes(!0)}var e;this.pubHash=(e=this.pubKey,Kt(Vt(e)))}derive(n){if(!/^[mM]'?/.test(n))throw new Error('Path must start with "m" or "M"');if(/^[mM]'?$/.test(n))return this;const e=n.replace(/^[mM]'?\//,"").split("/");let t=this;for(const n of e){const e=/^(\d+)('?)$/.exec(n);if(!e||3!==e.length)throw new Error(`Invalid child index: ${n}`);let r=+e[1];if(!Number.isSafeInteger(r)||r>=Ti)throw new Error("Invalid index");"'"===e[2]&&(r+=Ti),t=t.deriveChild(r)}return t}deriveChild(n){if(!this.pubKey||!this.chainCode)throw new Error("No publicKey or chainCode set");let e=Ki(n);if(n>=Ti){const n=this.privateKey;if(!n)throw new Error("Could not derive hardened child key");e=Et(new Uint8Array([0]),n,e)}else e=Et(this.pubKey,e);const t=Bt(pr,this.chainCode,e),r=Ri(t.slice(0,32)),i=t.slice(32);if(!Hi.utils.isValidPrivateKey(r))throw new Error("Tweak bigger than curve order");const o={versions:this.versions,chainCode:i,depth:this.depth+1,parentFingerprint:this.fingerprint,index:n};try{if(this.privateKey){const n=si(this.privKey+r,Hi.CURVE.n);if(!Hi.utils.isValidPrivateKey(n))throw new Error("The tweak was out of range or the resulted private key is invalid");o.privateKey=n}else{const n=Ci.fromHex(this.pubKey).add(Ci.fromPrivateKey(r));if(n.equals(Ci.ZERO))throw new Error("The tweak was equal to negative P, which made the result key invalid");o.publicKey=n.toRawBytes(!0)}return new zi(o)}catch(e){return this.deriveChild(n+1)}}sign(n){if(!this.privateKey)throw new Error("No privateKey set!");return ht(n,32),Hi.sign(n,this.privKey).toCompactRawBytes()}verify(n,e){if(ht(n,32),ht(e,64),!this.publicKey)throw new Error("No publicKey set!");let t;try{t=Hi.Signature.fromCompact(e)}catch(n){return!1}return Hi.verify(t,n,this.publicKey)}wipePrivateData(){return this.privKey=void 0,this.privKeyBytes&&(this.privKeyBytes.fill(0),this.privKeyBytes=void 0),this}toJSON(){return{xpriv:this.privateExtendedKey,xpub:this.publicExtendedKey}}serialize(n,e){if(!this.chainCode)throw new Error("No chainCode set");return ht(e,33),Et(Ki(n),new Uint8Array([this.depth]),Ki(this.parentFingerprint),Ki(this.index),this.chainCode,e)}}const Pi=n=>new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4));if(68!==new Uint8Array(new Uint32Array([287454020]).buffer)[0])throw new Error("Non little-endian hardware is not supported");function ji(n){if("string"!=typeof n)throw new Error("utf8ToBytes expected string, got "+typeof n);return new Uint8Array((new TextEncoder).encode(n))}function Fi(n){if("string"==typeof n&&(n=ji(n)),!(n instanceof Uint8Array))throw new Error("expected Uint8Array, got "+typeof n);return n}function Di(n,e){if(!(n instanceof Uint8Array))throw new Error("Uint8Array expected");if("number"==typeof e&&n.length!==e)throw new Error(`Uint8Array length ${e} expected`)}function Vi(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`Wrong positive integer: ${n}`)}function Mi(n,...e){if(!(n instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(n.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${n.length}`)}const Gi={number:Vi,bool:function(n){if("boolean"!=typeof n)throw new Error(`Expected boolean, not ${n}`)},bytes:Mi,hash:function(n){if("function"!=typeof n||"function"!=typeof n.create)throw new Error("hash must be wrapped by utils.wrapConstructor");Vi(n.outputLen),Vi(n.blockLen)},exists:function(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")},output:function(n,e){Mi(n);const t=e.outputLen;if(n.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}},Zi=(n,e)=>255&n[e++]|(255&n[e++])<<8;class Wi{constructor(n){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,Di(n=Fi(n),32);const e=Zi(n,0),t=Zi(n,2),r=Zi(n,4),i=Zi(n,6),o=Zi(n,8),s=Zi(n,10),a=Zi(n,12),c=Zi(n,14);this.r[0]=8191&e,this.r[1]=8191&(e>>>13|t<<3),this.r[2]=7939&(t>>>10|r<<6),this.r[3]=8191&(r>>>7|i<<9),this.r[4]=255&(i>>>4|o<<12),this.r[5]=o>>>1&8190,this.r[6]=8191&(o>>>14|s<<2),this.r[7]=8065&(s>>>11|a<<5),this.r[8]=8191&(a>>>8|c<<8),this.r[9]=c>>>5&127;for(let e=0;e<8;e++)this.pad[e]=Zi(n,16+2*e)}process(n,e,t=!1){const r=t?0:2048,{h:i,r:o}=this,s=o[0],a=o[1],c=o[2],l=o[3],u=o[4],h=o[5],f=o[6],d=o[7],p=o[8],g=o[9],y=Zi(n,e+0),w=Zi(n,e+2),b=Zi(n,e+4),m=Zi(n,e+6),E=Zi(n,e+8),v=Zi(n,e+10),x=Zi(n,e+12),A=Zi(n,e+14);let B=i[0]+(8191&y),k=i[1]+(8191&(y>>>13|w<<3)),I=i[2]+(8191&(w>>>10|b<<6)),S=i[3]+(8191&(b>>>7|m<<9)),U=i[4]+(8191&(m>>>4|E<<12)),L=i[5]+(E>>>1&8191),O=i[6]+(8191&(E>>>14|v<<2)),H=i[7]+(8191&(v>>>11|x<<5)),C=i[8]+(8191&(x>>>8|A<<8)),N=i[9]+(A>>>5|r),_=0,R=_+B*s+k*(5*g)+I*(5*p)+S*(5*d)+U*(5*f);_=R>>>13,R&=8191,R+=L*(5*h)+O*(5*u)+H*(5*l)+C*(5*c)+N*(5*a),_+=R>>>13,R&=8191;let $=_+B*a+k*s+I*(5*g)+S*(5*p)+U*(5*d);_=$>>>13,$&=8191,$+=L*(5*f)+O*(5*h)+H*(5*u)+C*(5*l)+N*(5*c),_+=$>>>13,$&=8191;let q=_+B*c+k*a+I*s+S*(5*g)+U*(5*p);_=q>>>13,q&=8191,q+=L*(5*d)+O*(5*f)+H*(5*h)+C*(5*u)+N*(5*l),_+=q>>>13,q&=8191;let T=_+B*l+k*c+I*a+S*s+U*(5*g);_=T>>>13,T&=8191,T+=L*(5*p)+O*(5*d)+H*(5*f)+C*(5*h)+N*(5*u),_+=T>>>13,T&=8191;let K=_+B*u+k*l+I*c+S*a+U*s;_=K>>>13,K&=8191,K+=L*(5*g)+O*(5*p)+H*(5*d)+C*(5*f)+N*(5*h),_+=K>>>13,K&=8191;let z=_+B*h+k*u+I*l+S*c+U*a;_=z>>>13,z&=8191,z+=L*s+O*(5*g)+H*(5*p)+C*(5*d)+N*(5*f),_+=z>>>13,z&=8191;let P=_+B*f+k*h+I*u+S*l+U*c;_=P>>>13,P&=8191,P+=L*a+O*s+H*(5*g)+C*(5*p)+N*(5*d),_+=P>>>13,P&=8191;let j=_+B*d+k*f+I*h+S*u+U*l;_=j>>>13,j&=8191,j+=L*c+O*a+H*s+C*(5*g)+N*(5*p),_+=j>>>13,j&=8191;let F=_+B*p+k*d+I*f+S*h+U*u;_=F>>>13,F&=8191,F+=L*l+O*c+H*a+C*s+N*(5*g),_+=F>>>13,F&=8191;let D=_+B*g+k*p+I*d+S*f+U*h;_=D>>>13,D&=8191,D+=L*u+O*l+H*c+C*a+N*s,_+=D>>>13,D&=8191,_=(_<<2)+_|0,_=_+R|0,R=8191&_,_>>>=13,$+=_,i[0]=R,i[1]=$,i[2]=q,i[3]=T,i[4]=K,i[5]=z,i[6]=P,i[7]=j,i[8]=F,i[9]=D}finalize(){const{h:n,pad:e}=this,t=new Uint16Array(10);let r=n[1]>>>13;n[1]&=8191;for(let e=2;e<10;e++)n[e]+=r,r=n[e]>>>13,n[e]&=8191;n[0]+=5*r,r=n[0]>>>13,n[0]&=8191,n[1]+=r,r=n[1]>>>13,n[1]&=8191,n[2]+=r,t[0]=n[0]+5,r=t[0]>>>13,t[0]&=8191;for(let e=1;e<10;e++)t[e]=n[e]+r,r=t[e]>>>13,t[e]&=8191;t[9]-=8192;let i=(1^r)-1;for(let n=0;n<10;n++)t[n]&=i;i=~i;for(let e=0;e<10;e++)n[e]=n[e]&i|t[e];n[0]=65535&(n[0]|n[1]<<13),n[1]=65535&(n[1]>>>3|n[2]<<10),n[2]=65535&(n[2]>>>6|n[3]<<7),n[3]=65535&(n[3]>>>9|n[4]<<4),n[4]=65535&(n[4]>>>12|n[5]<<1|n[6]<<14),n[5]=65535&(n[6]>>>2|n[7]<<11),n[6]=65535&(n[7]>>>5|n[8]<<8),n[7]=65535&(n[8]>>>8|n[9]<<5);let o=n[0]+e[0];n[0]=65535&o;for(let t=1;t<8;t++)o=(n[t]+e[t]|0)+(o>>>16)|0,n[t]=65535&o}update(n){Gi.exists(this);const{buffer:e,blockLen:t}=this,r=(n=Fi(n)).length;for(let i=0;i<r;){const o=Math.min(t-this.pos,r-i);if(o!==t)e.set(n.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===t&&(this.process(e,0,!1),this.pos=0);else for(;t<=r-i;i+=t)this.process(n,i)}return this}destroy(){this.h.fill(0),this.r.fill(0),this.buffer.fill(0),this.pad.fill(0)}digestInto(n){Gi.exists(this),Gi.output(n,this),this.finished=!0;const{buffer:e,h:t}=this;let{pos:r}=this;if(r){for(e[r++]=1;r<16;r++)e[r]=0;this.process(e,0,!0)}this.finalize();let i=0;for(let e=0;e<8;e++)n[i++]=t[e]>>>0,n[i++]=t[e]>>>8;return n}digest(){const{buffer:n,outputLen:e}=this;this.digestInto(n);const t=n.slice(0,e);return this.destroy(),t}}!function(n){const e=(e,t)=>n(t).update(Fi(e)).digest(),t=n(new Uint8Array(32));e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=e=>n(e)}((n=>new Wi(n)));const Yi=ji("expand 16-byte k"),Ji=ji("expand 32-byte k"),Qi=Pi(Yi),Xi=Pi(Ji),no=n=>!(n.byteOffset%4),eo=(n,e)=>n<<e|n>>>32-e;const to=(n=>{const{core:e,rounds:t,counterRight:r,counterLen:i,allow128bitKeys:o,extendNonceFn:s,blockLen:a}=function(n,e){if(void 0!==e&&("object"!=typeof e||(t=e,"[object Object]"!==Object.prototype.toString.call(t)||t.constructor!==Object)))throw new Error("options must be object or undefined");var t;return Object.assign(n,e)}({rounds:20,counterRight:!1,counterLen:8,allow128bitKeys:!0,blockLen:64},n);Gi.number(i),Gi.number(t),Gi.number(a),Gi.bool(r),Gi.bool(o);const c=a/4;if(a%4!=0)throw new Error("Salsa/ChaCha: blockLen must be aligned to 4 bytes");return(n,l,u,h,f=0)=>{if(Gi.bytes(n),Gi.bytes(l),Gi.bytes(u),h||(h=new Uint8Array(u.length)),Gi.bytes(h),Gi.number(f),f<0||f>=2**32-1)throw new Error("Salsa/ChaCha: counter overflow");if(h.length<u.length)throw new Error(`Salsa/ChaCha: output (${h.length}) is shorter than data (${u.length})`);const d=[];let p,g;if(32===n.length)p=n,g=Xi;else{if(16!==n.length||!o)throw new Error(`Salsa/ChaCha: invalid 32-byte key, got length=${n.length}`);p=new Uint8Array(32),p.set(n),p.set(n,16),g=Qi,d.push(p)}if(s){if(l.length<=16)throw new Error("Salsa/ChaCha: extended nonce must be bigger than 16 bytes");p=s(g,p,l.subarray(0,16),new Uint8Array(32)),d.push(p),l=l.subarray(16)}const y=16-i;if(l.length!==y)throw new Error(`Salsa/ChaCha: nonce must be ${y} or 16 bytes`);if(12!==y){const n=new Uint8Array(12);n.set(l,r?0:12-l.length),d.push(l=n)}const w=new Uint8Array(a),b=Pi(w),m=Pi(p),E=Pi(l),v=no(u)&&Pi(u),x=no(h)&&Pi(h);d.push(b);const A=u.length;for(let n=0,r=f;n<A;r++){if(e(g,m,E,b,r,t),r>=2**32-1)throw new Error("Salsa/ChaCha: counter overflow");const i=Math.min(a,A-n);if(i===a&&x&&v){const e=n/4;if(n%4!=0)throw new Error("Salsa/ChaCha: invalid block position");for(let n=0;n<c;n++)x[e+n]=v[e+n]^b[n];n+=a}else{for(let e=0;e<i;e++)h[n+e]=u[n+e]^w[e];n+=i}}for(let n=0;n<d.length;n++)d[n].fill(0);return h}})({core:function(n,e,t,r,i,o=20){let s=n[0],a=n[1],c=n[2],l=n[3],u=e[0],h=e[1],f=e[2],d=e[3],p=e[4],g=e[5],y=e[6],w=e[7],b=i,m=t[0],E=t[1],v=t[2],x=s,A=a,B=c,k=l,I=u,S=h,U=f,L=d,O=p,H=g,C=y,N=w,_=b,R=m,$=E,q=v;for(let n=0;n<o;n+=2)x=x+I|0,_=eo(_^x,16),O=O+_|0,I=eo(I^O,12),x=x+I|0,_=eo(_^x,8),O=O+_|0,I=eo(I^O,7),A=A+S|0,R=eo(R^A,16),H=H+R|0,S=eo(S^H,12),A=A+S|0,R=eo(R^A,8),H=H+R|0,S=eo(S^H,7),B=B+U|0,$=eo($^B,16),C=C+$|0,U=eo(U^C,12),B=B+U|0,$=eo($^B,8),C=C+$|0,U=eo(U^C,7),k=k+L|0,q=eo(q^k,16),N=N+q|0,L=eo(L^N,12),k=k+L|0,q=eo(q^k,8),N=N+q|0,L=eo(L^N,7),x=x+S|0,q=eo(q^x,16),C=C+q|0,S=eo(S^C,12),x=x+S|0,q=eo(q^x,8),C=C+q|0,S=eo(S^C,7),A=A+U|0,_=eo(_^A,16),N=N+_|0,U=eo(U^N,12),A=A+U|0,_=eo(_^A,8),N=N+_|0,U=eo(U^N,7),B=B+L|0,R=eo(R^B,16),O=O+R|0,L=eo(L^O,12),B=B+L|0,R=eo(R^B,8),O=O+R|0,L=eo(L^O,7),k=k+I|0,$=eo($^k,16),H=H+$|0,I=eo(I^H,12),k=k+I|0,$=eo($^k,8),H=H+$|0,I=eo(I^H,7);let T=0;r[T++]=s+x|0,r[T++]=a+A|0,r[T++]=c+B|0,r[T++]=l+k|0,r[T++]=u+I|0,r[T++]=h+S|0,r[T++]=f+U|0,r[T++]=d+L|0,r[T++]=p+O|0,r[T++]=g+H|0,r[T++]=y+C|0,r[T++]=w+N|0,r[T++]=b+_|0,r[T++]=m+R|0,r[T++]=E+$|0,r[T++]=v+q|0},counterRight:!1,counterLen:4,allow128bitKeys:!1}),ro=new Uint8Array([0]),io=new Uint8Array;var oo=Object.defineProperty,so=(n,e)=>{for(var t in e)oo(n,t,{get:e[t],enumerable:!0})};function ao(n){return h(Pn.getPublicKey(n))}so({},{MessageNode:()=>po,MessageQueue:()=>go,insertEventIntoAscendingList:()=>fo,insertEventIntoDescendingList:()=>ho,normalizeURL:()=>uo,utf8Decoder:()=>co,utf8Encoder:()=>lo});var co=new TextDecoder("utf-8"),lo=new TextEncoder;function uo(n){let e=new URL(n);return e.pathname=e.pathname.replace(/\/+/g,"/"),e.pathname.endsWith("/")&&(e.pathname=e.pathname.slice(0,-1)),("80"===e.port&&"ws:"===e.protocol||"443"===e.port&&"wss:"===e.protocol)&&(e.port=""),e.searchParams.sort(),e.hash="",e.toString()}function ho(n,e){let t,r=0,i=n.length-1,o=r;if(i<0)o=0;else if(e.created_at<n[i].created_at)o=i+1;else if(e.created_at>=n[r].created_at)o=r;else for(;;){if(i<=r+1){o=i;break}if(t=Math.floor(r+(i-r)/2),n[t].created_at>e.created_at)r=t;else{if(!(n[t].created_at<e.created_at)){o=t;break}i=t}}return n[o]?.id!==e.id?[...n.slice(0,o),e,...n.slice(o)]:n}function fo(n,e){let t,r=0,i=n.length-1,o=r;if(i<0)o=0;else if(e.created_at>n[i].created_at)o=i+1;else if(e.created_at<=n[r].created_at)o=r;else for(;;){if(i<=r+1){o=i;break}if(t=Math.floor(r+(i-r)/2),n[t].created_at<e.created_at)r=t;else{if(!(n[t].created_at>e.created_at)){o=t;break}i=t}}return n[o]?.id!==e.id?[...n.slice(0,o),e,...n.slice(o)]:n}var po=class{_value;_next;get value(){return this._value}set value(n){this._value=n}get next(){return this._next}set next(n){this._next=n}constructor(n){this._value=n,this._next=null}},go=class{_first;_last;get first(){return this._first}set first(n){this._first=n}get last(){return this._last}set last(n){this._last=n}_size;get size(){return this._size}set size(n){this._size=n}constructor(){this._first=null,this._last=null,this._size=0}enqueue(n){const e=new po(n);return 0!==this._size&&this._last?(this._last.next=e,this._last=e):(this._first=e,this._last=e),this._size++,!0}dequeue(){if(0===this._size||!this._first)return null;let n=this._first;return this._first=n.next,n.next=null,this._size--,n.value}},yo=Symbol("verified");function wo(n,e){const t=n;return t.pubkey=ao(e),t.id=bo(t),t.sig=function(n,e){return h(Pn.sign(bo(n),e))}(t,e),t[yo]=!0,t}function bo(n){return h(k(lo.encode(function(n){if(!Eo(n))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,n.pubkey,n.created_at,n.kind,n.tags,n.content])}(n))))}var mo=n=>n instanceof Object;function Eo(n){if(!mo(n))return!1;if("number"!=typeof n.kind)return!1;if("string"!=typeof n.content)return!1;if("number"!=typeof n.created_at)return!1;if("string"!=typeof n.pubkey)return!1;if(!n.pubkey.match(/^[a-f0-9]{64}$/))return!1;if(!Array.isArray(n.tags))return!1;for(let e=0;e<n.tags.length;e++){let t=n.tags[e];if(!Array.isArray(t))return!1;for(let n=0;n<t.length;n++)if("object"==typeof t[n])return!1}return!0}function vo(n){if("boolean"==typeof n[yo])return n[yo];const e=bo(n);if(e!==n.id)return n[yo]=!1;try{return n[yo]=Pn.verify(n.sig,e,n.pubkey)}catch(e){return n[yo]=!1}}function xo(n,e){if(n.ids&&-1===n.ids.indexOf(e.id)&&!n.ids.some((n=>e.id.startsWith(n))))return!1;if(n.kinds&&-1===n.kinds.indexOf(e.kind))return!1;if(n.authors&&-1===n.authors.indexOf(e.pubkey)&&!n.authors.some((n=>e.pubkey.startsWith(n))))return!1;for(let t in n)if("#"===t[0]){let r=n[`#${t.slice(1)}`];if(r&&!e.tags.find((([n,e])=>n===t.slice(1)&&-1!==r.indexOf(e))))return!1}return!(n.since&&e.created_at<n.since||n.until&&e.created_at>n.until)}function Ao(n,e){for(let t=0;t<n.length;t++)if(xo(n[t],e))return!0;return!1}function Bo(...n){let e={};for(let t=0;t<n.length;t++){let r=n[t];Object.entries(r).forEach((([n,t])=>{if("kinds"===n||"ids"===n||"authors"===n||"#"===n[0]){e[n]=e[n]||[];for(let r=0;r<t.length;r++){let i=t[r];e[n].includes(i)||e[n].push(i)}}})),r.limit&&(!e.limit||r.limit>e.limit)&&(e.limit=r.limit),r.until&&(!e.until||r.until>e.until)&&(e.until=r.until),r.since&&(!e.since||r.since<e.since)&&(e.since=r.since)}return e}function ko(n,e){let t=e.length+3,r=n.indexOf(`"${e}":`)+t,i=n.slice(r).indexOf('"')+r+1;return n.slice(i,i+64)}function Io(n,e){let t=e.length,r=n.indexOf(`"${e}":`)+t+3,i=n.slice(r),o=Math.min(i.indexOf(","),i.indexOf("}"));return parseInt(i.slice(0,o),10)}function So(n){let e=n.slice(0,22).indexOf('"EVENT"');if(-1===e)return null;let t=n.slice(e+7+1).indexOf('"');if(-1===t)return null;let r=e+7+1+t,i=n.slice(r+1,80).indexOf('"');if(-1===i)return null;let o=r+1+i;return n.slice(r+1,o)}function Uo(n,e){return e===ko(n,"id")}function Lo(n,e){return e===ko(n,"pubkey")}function Oo(n,e){return e===Io(n,"kind")}async function*Ho(n){let e;const t=[],r=n=>{e?(e(n),e=void 0):t.push(n)};n.on("event",r);try{for(;;)if(t.length>0)yield t.shift();else{const n=await new Promise((n=>{e=n}));yield n}}finally{n.off("event",r)}}so({},{getHex64:()=>ko,getInt:()=>Io,getSubscriptionId:()=>So,matchEventId:()=>Uo,matchEventKind:()=>Oo,matchEventPubkey:()=>Lo});var Co=class{_conn;_seenOn={};batchedByKey={};eoseSubTimeout;getTimeout;seenOnEnabled=!0;batchInterval=100;constructor(n={}){this._conn={},this.eoseSubTimeout=n.eoseSubTimeout||3400,this.getTimeout=n.getTimeout||3400,this.seenOnEnabled=!1!==n.seenOnEnabled,this.batchInterval=n.batchInterval||100}close(n){n.forEach((n=>{let e=this._conn[uo(n)];e&&e.close()}))}async ensureRelay(n){const e=uo(n);this._conn[e]||(this._conn[e]=function(n,e={}){let{listTimeout:t=3e3,getTimeout:r=3e3,countTimeout:i=3e3}=e;var o,s,a={},c={connect:[],disconnect:[],error:[],notice:[],auth:[]},l={},u={};function h(){return 1===o?.readyState}async function f(n){let e=JSON.stringify(n);if(h()||(await new Promise((n=>setTimeout(n,1e3))),h()))try{o.send(e)}catch(n){console.log(n)}}const d=(n,{verb:e="REQ",skipVerification:t=!1,alreadyHaveEvent:r=null,id:i=Math.random().toString().slice(2)}={})=>{let o=i;a[o]={id:o,filters:n,skipVerification:t,alreadyHaveEvent:r},f([e,o,...n]);let s={sub:(e,i={})=>d(e||n,{skipVerification:i.skipVerification||t,alreadyHaveEvent:i.alreadyHaveEvent||r,id:o}),unsub:()=>{delete a[o],delete l[o],f(["CLOSE",o])},on:(n,e)=>{l[o]=l[o]||{event:[],count:[],eose:[]},l[o][n].push(e)},off:(n,e)=>{let t=l[o],r=t[n].indexOf(e);r>=0&&t[n].splice(r,1)},get events(){return Ho(s)}};return s};function p(n,e){return new Promise(((t,r)=>{if(!n.id)return void r(new Error(`event ${n} has no id`));let i=n.id;f([e,n]),u[i]={resolve:t,reject:r}}))}return{url:n,sub:d,on:(n,e)=>{c[n].push(e),"connect"===n&&1===o?.readyState&&e()},off:(n,e)=>{let t=c[n].indexOf(e);-1!==t&&c[n].splice(t,1)},list:(n,e)=>new Promise((r=>{let i=d(n,e),o=[],s=setTimeout((()=>{i.unsub(),r(o)}),t);i.on("eose",(()=>{i.unsub(),clearTimeout(s),r(o)})),i.on("event",(n=>{o.push(n)}))})),get:(n,e)=>new Promise((t=>{let i=d([n],e),o=setTimeout((()=>{i.unsub(),t(null)}),r);i.on("event",(n=>{i.unsub(),clearTimeout(o),t(n)}))})),count:n=>new Promise((e=>{let t=d(n,{...d,verb:"COUNT"}),r=setTimeout((()=>{t.unsub(),e(null)}),i);t.on("count",(n=>{t.unsub(),clearTimeout(r),e(n)}))})),async publish(n){await p(n,"EVENT")},async auth(n){await p(n,"AUTH")},connect:async function(){h()||await async function(){return s||(s=new Promise(((e,t)=>{try{o=new WebSocket(n)}catch(n){t(n)}o.onopen=()=>{c.connect.forEach((n=>n())),e()},o.onerror=()=>{s=void 0,c.error.forEach((n=>n())),t()},o.onclose=async()=>{s=void 0,c.disconnect.forEach((n=>n()))};let r,i=new go;function h(){if(0===i.size)return clearInterval(r),void(r=null);var e=i.dequeue();if(!e)return;let t=So(e);if(t){let r=a[t];if(r&&r.alreadyHaveEvent&&r.alreadyHaveEvent(ko(e,"id"),n))return}try{let n=JSON.parse(e);switch(n[0]){case"EVENT":{let e=n[1],t=n[2];return void(Eo(t)&&a[e]&&(a[e].skipVerification||vo(t))&&Ao(a[e].filters,t)&&(a[e],(l[e]?.event||[]).forEach((n=>n(t)))))}case"COUNT":let e=n[1],t=n[2];return void(a[e]&&(l[e]?.count||[]).forEach((n=>n(t))));case"EOSE":{let e=n[1];return void(e in l&&(l[e].eose.forEach((n=>n())),l[e].eose=[]))}case"OK":{let e=n[1],t=n[2],r=n[3]||"";if(e in u){let{resolve:n,reject:i}=u[e];t?n(null):i(new Error(r))}return}case"NOTICE":let r=n[1];return void c.notice.forEach((n=>n(r)));case"AUTH":{let e=n[1];return void c.auth?.forEach((n=>n(e)))}}}catch(n){return}}o.onmessage=n=>{i.enqueue(n.data),r||(r=setInterval(h,0))}})),s)}()},close(){c={connect:[],disconnect:[],error:[],notice:[],auth:[]},l={},u={},o?.readyState===WebSocket.OPEN&&o.close()},get status(){return o?.readyState??3}}}(e,{getTimeout:.9*this.getTimeout,listTimeout:.9*this.getTimeout}));const t=this._conn[e];return await t.connect(),t}sub(n,e,t){let r=new Set,i={...t||{}};i.alreadyHaveEvent=(n,e)=>{if(t?.alreadyHaveEvent?.(n,e))return!0;if(this.seenOnEnabled){let t=this._seenOn[n]||new Set;t.add(e),this._seenOn[n]=t}return r.has(n)};let o=[],s=new Set,a=new Set,c=n.length,l=!1,u=setTimeout((()=>{l=!0;for(let n of a.values())n()}),t?.eoseSubTimeout||this.eoseSubTimeout);n.filter(((n,e,t)=>t.indexOf(n)===e)).forEach((async n=>{let t;try{t=await this.ensureRelay(n)}catch(n){return void f()}if(!t)return;let h=t.sub(e,i);function f(){if(c--,0===c){clearTimeout(u);for(let n of a.values())n()}}h.on("event",(n=>{r.add(n.id);for(let e of s.values())e(n)})),h.on("eose",(()=>{l||f()})),o.push(h)}));let h={sub:(n,e)=>(o.forEach((t=>t.sub(n,e))),h),unsub(){o.forEach((n=>n.unsub()))},on(n,e){"event"===n?s.add(e):"eose"===n&&a.add(e)},off(n,e){"event"===n?s.delete(e):"eose"===n&&a.delete(e)},get events(){return Ho(h)}};return h}get(n,e,t){return new Promise((r=>{let i=this.sub(n,[e],t),o=setTimeout((()=>{i.unsub(),r(null)}),this.getTimeout);i.on("event",(n=>{r(n),clearTimeout(o),i.unsub()}))}))}list(n,e,t){return new Promise((r=>{let i=[],o=this.sub(n,e,t);o.on("event",(n=>{i.push(n)})),o.on("eose",(()=>{o.unsub(),r(i)}))}))}batchedList(n,e,t){return new Promise((r=>{this.batchedByKey[n]?this.batchedByKey[n].push({filters:t,relays:e,resolve:r,events:[]}):(this.batchedByKey[n]=[{filters:t,relays:e,resolve:r,events:[]}],setTimeout((()=>{Object.keys(this.batchedByKey).forEach((async n=>{const e=this.batchedByKey[n],t=[],r=[];e.forEach((n=>{t.push(...n.filters),r.push(...n.relays)}));const i=this.sub(r,[Bo(...t)]);i.on("event",(n=>{e.forEach((e=>Ao(e.filters,n)&&e.events.push(n)))})),i.on("eose",(()=>{i.unsub(),e.forEach((n=>n.resolve(n.events)))})),delete this.batchedByKey[n]}))}),this.batchInterval))}))}publish(n,e){return n.map((async n=>(await this.ensureRelay(n)).publish(e)))}seenOn(n){return Array.from(this._seenOn[n]?.values?.()||[])}},No={};so(No,{BECH32_REGEX:()=>Ro,decode:()=>$o,naddrEncode:()=>Vo,neventEncode:()=>Do,noteEncode:()=>zo,nprofileEncode:()=>Fo,npubEncode:()=>Ko,nrelayEncode:()=>Mo,nsecEncode:()=>To});var _o=5e3,Ro=/[\x21-\x7E]{1,83}1[023456789acdefghjklmnpqrstuvwxyz]{6,}/;function $o(n){let{prefix:e,words:t}=he.decode(n,_o),r=new Uint8Array(he.fromWords(t));switch(e){case"nprofile":{let n=qo(r);if(!n[0]?.[0])throw new Error("missing TLV 0 for nprofile");if(32!==n[0][0].length)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:h(n[0][0]),relays:n[1]?n[1].map((n=>co.decode(n))):[]}}}case"nevent":{let n=qo(r);if(!n[0]?.[0])throw new Error("missing TLV 0 for nevent");if(32!==n[0][0].length)throw new Error("TLV 0 should be 32 bytes");if(n[2]&&32!==n[2][0].length)throw new Error("TLV 2 should be 32 bytes");if(n[3]&&4!==n[3][0].length)throw new Error("TLV 3 should be 4 bytes");return{type:"nevent",data:{id:h(n[0][0]),relays:n[1]?n[1].map((n=>co.decode(n))):[],author:n[2]?.[0]?h(n[2][0]):void 0,kind:n[3]?.[0]?parseInt(h(n[3][0]),16):void 0}}}case"naddr":{let n=qo(r);if(!n[0]?.[0])throw new Error("missing TLV 0 for naddr");if(!n[2]?.[0])throw new Error("missing TLV 2 for naddr");if(32!==n[2][0].length)throw new Error("TLV 2 should be 32 bytes");if(!n[3]?.[0])throw new Error("missing TLV 3 for naddr");if(4!==n[3][0].length)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:co.decode(n[0][0]),pubkey:h(n[2][0]),kind:parseInt(h(n[3][0]),16),relays:n[1]?n[1].map((n=>co.decode(n))):[]}}}case"nrelay":{let n=qo(r);if(!n[0]?.[0])throw new Error("missing TLV 0 for nrelay");return{type:"nrelay",data:co.decode(n[0][0])}}case"nsec":case"npub":case"note":return{type:e,data:h(r)};default:throw new Error(`unknown prefix ${e}`)}}function qo(n){let e={},t=n;for(;t.length>0;){let n=t[0],r=t[1];if(!r)throw new Error(`malformed TLV ${n}`);let i=t.slice(2,2+r);if(t=t.slice(2+r),i.length<r)throw new Error(`not enough data to read on TLV ${n}`);e[n]=e[n]||[],e[n].push(i)}return e}function To(n){return jo("nsec",n)}function Ko(n){return jo("npub",n)}function zo(n){return jo("note",n)}function Po(n,e){let t=he.toWords(e);return he.encode(n,t,_o)}function jo(n,e){return Po(n,f(e))}function Fo(n){return Po("nprofile",Go({0:[f(n.pubkey)],1:(n.relays||[]).map((n=>lo.encode(n)))}))}function Do(n){let e;return null!=n.kind&&(e=function(n){const e=new Uint8Array(4);return e[0]=n>>24&255,e[1]=n>>16&255,e[2]=n>>8&255,e[3]=255&n,e}(n.kind)),Po("nevent",Go({0:[f(n.id)],1:(n.relays||[]).map((n=>lo.encode(n))),2:n.author?[f(n.author)]:[],3:e?[new Uint8Array(e)]:[]}))}function Vo(n){let e=new ArrayBuffer(4);return new DataView(e).setUint32(0,n.kind,!1),Po("naddr",Go({0:[lo.encode(n.identifier)],1:(n.relays||[]).map((n=>lo.encode(n))),2:[f(n.pubkey)],3:[new Uint8Array(e)]}))}function Mo(n){return Po("nrelay",Go({0:[lo.encode(n)]}))}function Go(n){let e=[];return Object.entries(n).forEach((([n,t])=>{t.forEach((t=>{let r=new Uint8Array(t.length+2);r.set([parseInt(n)],0),r.set([t.length],1),r.set(t,2),e.push(r)}))})),p(...e)}async function Zo(n,e,t){const r=Yo(kn.getSharedSecret(n,"02"+e));let i=Uint8Array.from(w(16)),o=lo.encode(t),s=await crypto.subtle.importKey("raw",r,{name:"AES-CBC"},!1,["encrypt"]),a=await crypto.subtle.encrypt({name:"AES-CBC",iv:i},s,o);return`${re.encode(new Uint8Array(a))}?iv=${re.encode(new Uint8Array(i.buffer))}`}async function Wo(n,e,t){let[r,i]=t.split("?iv="),o=Yo(kn.getSharedSecret(n,"02"+e)),s=await crypto.subtle.importKey("raw",o,{name:"AES-CBC"},!1,["decrypt"]),a=re.decode(r),c=re.decode(i),l=await crypto.subtle.decrypt({name:"AES-CBC",iv:c},s,a);return co.decode(l)}function Yo(n){return n.slice(1,33)}so({},{decrypt:()=>Wo,encrypt:()=>Zo}),"undefined"!=typeof crypto&&!crypto.subtle&&crypto.webcrypto&&(crypto.subtle=crypto.webcrypto.subtle),so({},{NIP05_REGEX:()=>Qo,queryProfile:()=>es,searchDomain:()=>ns,useFetchImplementation:()=>Xo});var Jo,Qo=/^(?:([\w.+-]+)@)?([\w.-]+)$/;try{Jo=fetch}catch{}function Xo(n){Jo=n}async function ns(n,e=""){try{return(await(await Jo(`https://${n}/.well-known/nostr.json?name=${e}`)).json()).names}catch(n){return{}}}async function es(n){const e=n.match(Qo);if(!e)return null;const[t,r="_",i]=e;try{const n=await Jo(`https://${i}/.well-known/nostr.json?name=${r}`),{names:e,relays:t}=function(n){const e={names:{}};for(const[t,r]of Object.entries(n.names))"string"==typeof t&&"string"==typeof r&&(e.names[t]=r);if(n.relays){e.relays={};for(const[t,r]of Object.entries(n.relays))"string"==typeof t&&Array.isArray(r)&&(e.relays[t]=r.filter((n=>"string"==typeof n)))}return e}(await n.json()),o=e[r];return o?{pubkey:o,relays:t?.[o]}:null}catch(n){return null}}function ts(n,e){let t=zi.fromMasterSeed(lt(n,e)).derive("m/44'/1237'/0'/0/0").privateKey;if(!t)throw new Error("could not derive private key");return h(t)}function rs(){return function(n,e=128){if(be.number(e),e%32!=0||e>256)throw new TypeError("Invalid entropy");return function(n,e){return st(n),ct(e).encode(n).join((n=>""===n[0])(e)?"":" ")}(function(n=32){if(me&&"function"==typeof me.getRandomValues)return me.getRandomValues(new Uint8Array(n));throw new Error("crypto.getRandomValues must be defined")}(e/8),n)}(fe)}function is(n){return function(n,e){try{!function(n,e){const{words:t}=ot(n);st(ct(e).decode(t))}(n,e)}catch(n){return!1}return!0}(n,fe)}function os(n){const e={reply:void 0,root:void 0,mentions:[],profiles:[]},t=[];for(const r of n.tags)"e"===r[0]&&r[1]&&t.push(r),"p"===r[0]&&r[1]&&e.profiles.push({pubkey:r[1],relays:r[2]?[r[2]]:[]});for(let n=0;n<t.length;n++){const r=t[n],[i,o,s,a]=r,c={id:o,relays:s?[s]:[]},l=0===n,u=n===t.length-1;"root"!==a?"reply"!==a?"mention"!==a?l?e.root=c:u?e.reply=c:e.mentions.push(c):e.mentions.push(c):e.reply=c:e.root=c}return e}function ss(n){let e=0;for(let t=0;t<n.length;t++){const r=parseInt(n[t],16);if(0!==r){e+=Math.clz32(r)-28;break}e+=4}return e}function as(n,e){let t=0;const r=n,i=["nonce",t.toString(),e.toString()];for(r.tags.push(i);;){const n=Math.floor((new Date).getTime()/1e3);if(n!==r.created_at&&(t=0,r.created_at=n),i[1]=(++t).toString(),r.id=bo(r),ss(r.id)>=e)break}return r}function cs(n,e,t,r){return wo({kind:6,tags:[...n.tags??[],["e",e.id,t],["p",e.pubkey]],content:""===n.content?"":JSON.stringify(e),created_at:n.created_at},r)}function ls(n){if(6!==n.kind)return;let e,t;for(let r=n.tags.length-1;r>=0&&(void 0===e||void 0===t);r--){const i=n.tags[r];i.length>=2&&("e"===i[0]&&void 0===e?e=i:"p"===i[0]&&void 0===t&&(t=i))}return void 0!==e?{id:e[1],relays:[e[2],t?.[2]].filter((n=>"string"==typeof n)),author:t?.[1]}:void 0}function us(n,{skipVerification:e}={}){const t=ls(n);if(void 0===t||""===n.content)return;let r;try{r=JSON.parse(n.content)}catch(n){return}return r.id===t.id&&(e||vo(r))?r:void 0}so({},{generateSeedWords:()=>rs,privateKeyFromSeedWords:()=>ts,validateWords:()=>is}),so({},{parse:()=>os}),so({},{getPow:()=>ss,minePow:()=>as}),so({},{finishRepostEvent:()=>cs,getRepostedEvent:()=>us,getRepostedEventPointer:()=>ls}),so({},{NOSTR_URI_REGEX:()=>hs,parse:()=>ds,test:()=>fs});var hs=new RegExp(`nostr:(${Ro.source})`);function fs(n){return"string"==typeof n&&new RegExp(`^${hs.source}$`).test(n)}function ds(n){const e=n.match(new RegExp(`^${hs.source}$`));if(!e)throw new Error(`Invalid Nostr URI: ${n}`);return{uri:e[0],value:e[1],decoded:$o(e[1])}}function ps(n,e,t){const r=e.tags.filter((n=>n.length>=2&&("e"===n[0]||"p"===n[0])));return wo({...n,kind:7,tags:[...n.tags??[],...r,["e",e.id],["p",e.pubkey]],content:n.content??"+"},t)}function gs(n){if(7!==n.kind)return;let e,t;for(let r=n.tags.length-1;r>=0&&(void 0===e||void 0===t);r--){const i=n.tags[r];i.length>=2&&("e"===i[0]&&void 0===e?e=i:"p"===i[0]&&void 0===t&&(t=i))}return void 0!==e&&void 0!==t?{id:e[1],relays:[e[2],t[2]].filter((n=>void 0!==n)),author:t[1]}:void 0}function ys(n,e){let t=[];(e.kind||-1)>=0&&t.push(`kind=${e.kind}`),e.until&&t.push(`created_at<${e.until}`),e.since&&t.push(`created_at>${e.since}`);let r=t.join("&");if(""===r)throw new Error("refusing to create a delegation without any conditions");let i=k(lo.encode(`nostr:delegation:${e.pubkey}:${r}`)),o=h(Pn.sign(i,n));return{from:ao(n),to:e.pubkey,cond:r,sig:o}}function ws(n){let e=n.tags.find((n=>"delegation"===n[0]&&n.length>=4));if(!e)return null;let t=e[1],r=e[2],i=e[3],o=r.split("&");for(let e=0;e<o.length;e++){let[t,r,i]=o[e].split(/\b/);if(("kind"!==t||"="!==r||n.kind!==parseInt(i))&&!("created_at"===t&&"<"===r&&n.created_at<parseInt(i)||"created_at"===t&&">"===r&&n.created_at>parseInt(i)))return null}let s=k(lo.encode(`nostr:delegation:${n.pubkey}:${r}`));return Pn.verify(i,s,t)?t:null}so({},{finishReactionEvent:()=>ps,getReactedEventPointer:()=>gs}),so({},{createDelegation:()=>ys,getDelegator:()=>ws}),so({},{matchAll:()=>ms,regex:()=>bs,replaceAll:()=>Es});var bs=()=>new RegExp(`\\b${hs.source}\\b`,"g");function*ms(n){const e=n.matchAll(bs());for(const n of e)try{const[e,t]=n;yield{uri:e,value:t,decoded:$o(t),start:n.index,end:n.index+e.length}}catch(n){}}function Es(n,e){return n.replaceAll(bs(),((n,t)=>e({uri:n,value:t,decoded:$o(t)})))}so({},{channelCreateEvent:()=>xs,channelHideMessageEvent:()=>ks,channelMessageEvent:()=>Bs,channelMetadataEvent:()=>As,channelMuteUserEvent:()=>Is});var vs,xs=(n,e)=>{let t;if("object"==typeof n.content)t=JSON.stringify(n.content);else{if("string"!=typeof n.content)return;t=n.content}return wo({kind:40,tags:[...n.tags??[]],content:t,created_at:n.created_at},e)},As=(n,e)=>{let t;if("object"==typeof n.content)t=JSON.stringify(n.content);else{if("string"!=typeof n.content)return;t=n.content}return wo({kind:41,tags:[["e",n.channel_create_event_id],...n.tags??[]],content:t,created_at:n.created_at},e)},Bs=(n,e)=>{const t=[["e",n.channel_create_event_id,n.relay_url,"root"]];return n.reply_to_channel_message_event_id&&t.push(["e",n.reply_to_channel_message_event_id,n.relay_url,"reply"]),wo({kind:42,tags:[...t,...n.tags??[]],content:n.content,created_at:n.created_at},e)},ks=(n,e)=>{let t;if("object"==typeof n.content)t=JSON.stringify(n.content);else{if("string"!=typeof n.content)return;t=n.content}return wo({kind:43,tags:[["e",n.channel_message_event_id],...n.tags??[]],content:t,created_at:n.created_at},e)},Is=(n,e)=>{let t;if("object"==typeof n.content)t=JSON.stringify(n.content);else{if("string"!=typeof n.content)return;t=n.content}return wo({kind:44,tags:[["p",n.pubkey_to_mute],...n.tags??[]],content:t,created_at:n.created_at},e)};so({},{useFetchImplementation:()=>Ss,validateGithub:()=>Us});try{vs=fetch}catch{}function Ss(n){vs=n}async function Us(n,e,t){try{return await(await vs(`https://gist.github.com/${e}/${t}/raw`)).text()===`Verifying that I control the following Nostr public key: ${n}`}catch(n){return!1}}so({},{authenticate:()=>Ls});var Ls=async({challenge:n,relay:e,sign:t})=>{const r={kind:22242,created_at:Math.floor(Date.now()/1e3),tags:[["relay",e.url],["challenge",n]],content:""};return e.auth(await t(r))};so({},{decrypt:()=>Ns,encrypt:()=>Cs,utils:()=>Hs});var Os,Hs={v2:{maxPlaintextSize:65408,minCiphertextSize:100,maxCiphertextSize:102400,getConversationKey:(n,e)=>kn.getSharedSecret(n,"02"+e).subarray(1,33),getMessageKeys(n,e){const t=((n,e,t,r,i)=>function(n,e,t,r=32){if(o.hash(n),o.number(r),r>255*n.outputLen)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(r/n.outputLen);void 0===t&&(t=io);const s=new Uint8Array(i*n.outputLen),a=yn.create(n,e),c=a._cloneInto(),l=new Uint8Array(a.outputLen);for(let e=0;e<i;e++)ro[0]=e+1,c.update(0===e?io:l).update(t).update(ro).digestInto(l),s.set(l,n.outputLen*e),a._cloneInto(c);return a.destroy(),c.destroy(),l.fill(0),ro.fill(0),s.slice(0,r)}(n,function(n,e,t){return o.hash(n),void 0===t&&(t=new Uint8Array(n.outputLen)),yn(n,d(t),d(e))}(n,e,t),r,i))(k,n,e,"nip44-v2",76);return{encryption:t.subarray(0,32),nonce:t.subarray(32,44),auth:t.subarray(44,76)}},calcPadding(n){if(!Number.isSafeInteger(n)||n<0)throw new Error("expected positive integer");if(n<=32)return 32;const e=1<<Math.floor(Math.log2(n-1))+1,t=e<=256?32:e/8;return t*(Math.floor((n-1)/t)+1)},pad(n){const e=lo.encode(n),t=e.length;if(t<1||t>=Hs.v2.maxPlaintextSize)throw new Error("invalid plaintext length: must be between 1b and 64KB");const r=Hs.v2.calcPadding(t),i=new Uint8Array(r-t),o=new Uint8Array(2);return new DataView(o.buffer).setUint16(0,t),p(o,e,i)},unpad(n){const e=new DataView(n.buffer).getUint16(0),t=n.subarray(2,2+e);if(0===e||t.length!==e||n.length!==2+Hs.v2.calcPadding(e))throw new Error("invalid padding");return co.decode(t)}}};function Cs(n,e,t={}){const r=t.version??2;if(2!==r)throw new Error("unknown encryption version "+r);const i=t.salt??w(32);Di(i,32);const o=Hs.v2.getMessageKeys(n,i),s=Hs.v2.pad(e),a=to(o.encryption,o.nonce,s),c=yn(k,o.auth,a);return re.encode(p(new Uint8Array([r]),i,a,c))}function Ns(n,e){const t=Hs.v2;Di(n,32);const r=e.length;if(r<t.minCiphertextSize||r>=t.maxCiphertextSize)throw new Error("invalid ciphertext length: "+r);if("#"===e[0])throw new Error("unknown encryption version");let i;try{i=re.decode(e)}catch(n){throw new Error("invalid base64: "+n.message)}const o=i.subarray(0,1)[0];if(2!==o)throw new Error("unknown encryption version "+o);const s=i.subarray(1,33),a=i.subarray(33,-32),c=i.subarray(-32),l=t.getMessageKeys(n,s);if(!function(n,e){if(n.length!==e.length)throw new Error("equalBytes: Different size of Uint8Arrays");let t=!0;for(let r=0;r<n.length;r++)t&&(t=n[r]===e[r]);return t}(yn(k,l.auth,a),c))throw new Error("invalid MAC");const u=to(l.encryption,l.nonce,a);return t.unpad(u)}function _s(n){const{pathname:e,searchParams:t}=new URL(n),r=e,i=t.get("relay"),o=t.get("secret");if(!r||!i||!o)throw new Error("invalid connection string");return{pubkey:r,relay:i,secret:o}}async function Rs({pubkey:n,secret:e,invoice:t}){const r={method:"pay_invoice",params:{invoice:t}},i=await Zo(e,n,JSON.stringify(r));return wo({kind:23194,created_at:Math.round(Date.now()/1e3),content:i,tags:[["p",n]]},e)}so({},{makeNwcRequestEvent:()=>Rs,parseConnectionString:()=>_s}),so({},{getZapEndpoint:()=>qs,makeZapReceipt:()=>zs,makeZapRequest:()=>Ts,useFetchImplementation:()=>$s,validateZapRequest:()=>Ks});try{Os=fetch}catch{}function $s(n){Os=n}async function qs(n){try{let e="",{lud06:t,lud16:r}=JSON.parse(n.content);if(t){let{words:n}=he.decode(t,1e3),r=he.fromWords(n);e=co.decode(r)}else{if(!r)return null;{let[n,t]=r.split("@");e=`https://${t}/.well-known/lnurlp/${n}`}}let i=await Os(e),o=await i.json();if(o.allowsNostr&&o.nostrPubkey)return o.callback}catch(n){}return null}function Ts({profile:n,event:e,amount:t,relays:r,comment:i=""}){if(!t)throw new Error("amount not given");if(!n)throw new Error("profile not given");let o={kind:9734,created_at:Math.round(Date.now()/1e3),content:i,tags:[["p",n],["amount",t.toString()],["relays",...r]]};return e&&o.tags.push(["e",e]),o}function Ks(n){let e;try{e=JSON.parse(n)}catch(n){return"Invalid zap request JSON."}if(!Eo(e))return"Zap request is not a valid Nostr event.";if(!vo(e))return"Invalid signature on zap request.";let t=e.tags.find((([n,e])=>"p"===n&&e));if(!t)return"Zap request doesn't have a 'p' tag.";if(!t[1].match(/^[a-f0-9]{64}$/))return"Zap request 'p' tag is not valid hex.";let r=e.tags.find((([n,e])=>"e"===n&&e));return r&&!r[1].match(/^[a-f0-9]{64}$/)?"Zap request 'e' tag is not valid hex.":e.tags.find((([n,e])=>"relays"===n&&e))?null:"Zap request doesn't have a 'relays' tag."}function zs({zapRequest:n,preimage:e,bolt11:t,paidAt:r}){let i=JSON.parse(n).tags.filter((([n])=>"e"===n||"p"===n||"a"===n)),o={kind:9735,created_at:Math.round(r.getTime()/1e3),content:"",tags:[...i,["bolt11",t],["description",n]]};return e&&o.tags.push(["preimage",e]),o}so({},{getToken:()=>js,unpackEventFromToken:()=>Ds,validateEvent:()=>Vs,validateToken:()=>Fs});var Ps="Nostr ";async function js(n,e,t,r=!1){if(!n||!e)throw new Error("Missing loginUrl or httpMethod");const i=function(n=255){return{kind:n,content:"",tags:[],created_at:0}}(27235);i.tags=[["u",n],["method",e]],i.created_at=Math.round((new Date).getTime()/1e3);const o=await t(i);return(r?Ps:"")+re.encode(lo.encode(JSON.stringify(o)))}async function Fs(n,e,t){const r=await Ds(n).catch((n=>{throw n}));return await Vs(r,e,t).catch((n=>{throw n}))}async function Ds(n){if(!n)throw new Error("Missing token");n=n.replace(Ps,"");const e=co.decode(re.decode(n));if(!e||0===e.length||!e.startsWith("{"))throw new Error("Invalid token");return JSON.parse(e)}async function Vs(n,e,t){if(!n)throw new Error("Invalid nostr event");if(!vo(n))throw new Error("Invalid nostr event, signature invalid");if(27235!==n.kind)throw new Error("Invalid nostr event, kind invalid");if(!n.created_at)throw new Error("Invalid nostr event, created_at invalid");if(Math.round((new Date).getTime()/1e3)-n.created_at>60)throw new Error("Invalid nostr event, expired");const r=n.tags.find((n=>"u"===n[0]));if(1!==r?.length&&r?.[1]!==e)throw new Error("Invalid nostr event, url tag invalid");const i=n.tags.find((n=>"method"===n[0]));if(1!==i?.length&&i?.[1].toLowerCase()!==t.toLowerCase())throw new Error("Invalid nostr event, method tag invalid");return!0}const Ms=document.querySelector(".theme-toggle"),Gs=document.documentElement,Zs=Ms.querySelector("i"),Ws=localStorage.getItem("theme")||"light";function Ys(n){Zs.className="light"===n?"fas fa-moon":"fas fa-sun"}Gs.setAttribute("data-theme",Ws),Ys(Ws),Ms.addEventListener("click",(()=>{const n="light"===Gs.getAttribute("data-theme")?"dark":"light";Gs.setAttribute("data-theme",n),localStorage.setItem("theme",n),Ys(n)}));const Js="npub12xyl6w6aacmqa3gmmzwrr9m3u0ldx3dwqhczuascswvew9am9q4sfg99cx",Qs=["wss://relay.damus.io","wss://relay.nostr.band","wss://nos.lol","wss://relay.MaiQR.app"],Xs=document.querySelectorAll(".tab-button"),na=document.querySelectorAll(".tab-content");Xs.forEach((n=>{n.addEventListener("click",(()=>{Xs.forEach((n=>n.classList.remove("active"))),na.forEach((n=>n.classList.remove("active"))),n.classList.add("active");const e=`${n.dataset.tab}-tab`;document.getElementById(e).classList.add("active")}))}));const ea=document.querySelector(".qr-button"),ta=document.getElementById("qrOverlay"),ra=document.querySelector(".close-overlay"),ia=document.querySelectorAll(".copy-button");ea.addEventListener("click",(()=>{ta.classList.add("active")})),ra.addEventListener("click",(()=>{ta.classList.remove("active")})),ta.addEventListener("click",(n=>{n.target===ta&&ta.classList.remove("active")})),ia.forEach((n=>{n.addEventListener("click",(async()=>{const e=n.dataset.copy,t=document.getElementById("lightning"===e?"lightningAddress":"npub"===e?"nostrNpub":"nostrPubkey").textContent;try{await navigator.clipboard.writeText(t);const e=n.textContent;n.textContent="Copied!",setTimeout((()=>{n.textContent=e}),2e3)}catch(n){console.error("Failed to copy:",n)}}))})),async function(){try{const{type:n,data:e}=No.decode(Js),t=new Co,r=await t.list(Qs,[{kinds:[0],authors:[e]}]);if(r.length>0){const n=JSON.parse(r[0].content);n.lud16&&(document.getElementById("lightningAddress").textContent=n.lud16,function(n){if(!n)return;const e=qrcode(0,"M");e.addData(`lightning:${n}`),e.make(),document.getElementById("lightning-qrcode").innerHTML=e.createImgTag(5)}(n.lud16))}document.getElementById("nostrNpub").textContent=Js,document.getElementById("nostrPubkey").textContent=e,function(n){const e=qrcode(0,"M");e.addData(`nostr:${n}`),e.make(),document.getElementById("nostr-qrcode").innerHTML=e.createImgTag(5)}(e)}catch(n){console.error("Error initializing Nostr:",n)}}()})();